{"version":3,"file":"index.js","sources":["../../node_modules/@kenzap/k-cloud/index.js","../../src/_/_helpers.js","../../src/_/_cnt_www.js","../../src/_/_cart_util.js","../../src/_/_cart.js","../../src/_/_modal_product.js","../../src/_/_order.js","../../src/_/_order_list.js","../../src/www/index.js"],"sourcesContent":["/**\n * @name initHeader\n * @description Initiates Kenzap Cloud extension header and related scripts. Verifies user sessions, handles SSO, does cloud space navigation, initializes i18n localization. \n * @param {object} response\n */\nexport const initHeader = (response) => {\n\n    // cache header from backend\n    if(response.header) localStorage.setItem('header', response.header);\n  \n    // load header to html if not present\n    if(!document.querySelector(\"#k-script\")){\n  \n        let child = document.createElement('div');\n        child.innerHTML = localStorage.getItem('header');\n        child = child.firstChild;\n        document.body.prepend(child);\n  \n        // run header scripts\n        Function(document.querySelector(\"#k-script\").innerHTML).call('test');\n    }\n  \n    // load locales if present\n    if(response.locale) window.i18n.init(response.locale); \n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nexport const __init = (locale) => {\n\n    if(typeof locale !== 'object' || locale === null) return;\n\n    if(typeof window.i18n === 'undefined') window.i18n = {};\n\n    if(typeof window.i18n.state === 'undefined') window.i18n.state = { locale: {} };\n   \n    window.i18n.state.locale = locale;\n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nexport const __ = (text, ...p) => {\n\n    let match = (input, pa) => {\n\n        pa.forEach((p, i) => { input = input.replace('%'+(i+1)+'$', p); }); \n        \n        return input;\n    }\n\n    if(typeof window.i18n === 'undefined') return match(text, p);\n    if(window.i18n.state.locale.values[text] === undefined) return match(text, p);\n\n\n\n    return match(window.i18n.state.locale.values[text], p);\n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param cb {Function} callback function to escape text variable\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nconst __esc = (text, cb, ...p) => {\n\n    let match = (input, pa) => {\n\n        pa.forEach((p, i) => { input = input.replace('%'+(i+1)+'$', p); }); \n        \n        return input;\n    }\n\n    if(typeof window.i18n === 'undefined') return match(text, p);\n    if(window.i18n.state.locale.values[text] === undefined) return match(text, p);\n\n    return match(cb(window.i18n.state.locale.values[text]), p);\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const attr = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&apos;',\n            '\"': '&quot;'\n        } [tag]));\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities and does translation\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __attr = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    let cb = (text) => {\n\n        return text.replace(/[<>'\"]/g, tag => (\n            {\n                '&': '&amp;',\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&apos;',\n                '\"': '&quot;'\n            } [tag]));\n    }\n\n    return __esc(text, cb, ...p);\n}\n\n/*\n * Removes special characters `<`, `>`, `\"`, `'` from the link.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const src = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[<>'\"]/g, tag => (\n        {\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&apos;',\n            '\"': '&quot;'\n        } [tag]));\n    \n}\n\n/*\n * Converts special characters `<`, `>`, `\"`, `'` from the link and does translation\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __src = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    let cb = (text) => {\n\n        return text.replace(/[<>'\"]/g, tag => (\n            {\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&apos;',\n                '\"': '&quot;'\n            } [tag]));\n    }\n\n    return __esc(text, cb, ...p);\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const html = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&apos;',\n            '\"': '&quot;'\n        } [tag]));\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities and does translations\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __html = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    let cb = (text) => {\n\n        return text.replace(/[&<>'\"]/g, tag => (\n            {\n                '&': '&amp;',\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&apos;',\n                '\"': '&quot;'\n            } [tag]));\n    }\n\n    return __esc(text, cb, ...p);\n}\n\n/**\n * @name showLoader\n * @description Initiates full screen three dots loader.\n */\nexport const showLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'block';\n}\n\n/**\n * @name hideLoader\n * @description Removes full screen three dots loader.\n */\nexport const hideLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'none';\n}\n\n/**\n * @name initFooter\n * @description Removes full screen three dots loader.\n * @param {string} left - Text or html code to be present on the left bottom side of screen\n * @param {string} right - Text or html code to be present on the left bottom side of screen\n */\nexport const initFooter = (left, right) => {\n\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\n/**\n * @name link\n * @description Handles Cloud navigation links between extensions and its pages. Takes care of custom url parameters.\n * @param {string} slug - Any inbound link\n * \n * @returns {string} link - Returns original link with kenzp cloud space ID identifier.\n */\nexport const link = (slug) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let sid = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    let postfix = slug.indexOf('?') == -1 ? '?sid='+sid : '&sid='+sid;\n\n    return slug + postfix;\n}\n\n/**\n * @name getSiteId\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\nexport const getSiteId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name spaceID\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\n export const spaceID = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name setCookie\n * @description Set cookie by its name to all .kenzap.cloud subdomains\n * @param {string} name - Cookie name.\n * @param {string} value - Cookie value.\n * @param {string} days - Number of days when cookie expires.\n */\n export const setCookie = (name, value, days) => {\n\n    let expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \";expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (escape(value) || \"\") + expires + \";path=/;domain=.kenzap.cloud\"; \n}\n\n/**\n * @name getCookie\n * @description Read cookie by its name.\n * @param {string} cname - Cookie name.\n * \n * @returns {string} value - Cookie value.\n */\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n/**\n * @name checkHeader\n * @description This function tracks UI updates, creates header version checksum and compares it after every page reload\n * @param {object} object - API response.\n */\n export const checkHeader = () => {\n\n    let version = (localStorage.hasOwnProperty('header') && localStorage.hasOwnProperty('header-version')) ? localStorage.getItem('header-version') : 0;\n    let check = window.location.hostname + '/' + spaceID() + '/' + getCookie('locale');\n    if(check != getCookie('check')){ version = 0; console.log('refresh'); }\n    \n    setCookie('check', check, 5);\n\n    return version\n}\n\n/**\n * @name headers\n * @description Default headers object for all Kenzap Cloud fetch queries. \n * @param {object} headers\n */\n export const headers = {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n    'Kenzap-Locale': getCookie('locale') ? getCookie('locale') : \"en\",\n    'Kenzap-Header': checkHeader(),\n    'Kenzap-Token': getCookie('kenzap_token'),\n    'Kenzap-Sid': spaceID(),\n}\n\n/**\n * @name parseApiError\n * @description Set default logics for different API Error responses.\n * @param {object} object - API response.\n */\n export const parseApiError = (data) => {\n\n    // outout to frontend console\n    console.log(data);\n\n    // unstructured failure\n    if(isNaN(data.code)){\n    \n        // structure failure data\n        let log = data;\n        try{ log = JSON.stringify(log); }catch(e){ }\n\n        let params = new URLSearchParams();\n        params.append(\"cmd\", \"report\");\n        params.append(\"sid\", spaceID());\n        params.append(\"token\", getCookie('kenzap_token'));\n        params.append(\"data\", log);\n        \n        // report error\n        fetch('https://api-v1.kenzap.cloud/error/', { method: 'post', headers: { 'Accept': 'application/json', 'Content-type': 'application/x-www-form-urlencoded', }, body: params });\n\n        alert('Can not connect to Kenzap Cloud');  \n        return;\n    }\n    \n    // handle cloud error codes\n    switch(data.code){\n\n        // unauthorized\n        case 401:\n\n            // dev mode\n            if(window.location.href.indexOf('localhost')!=-1){ \n\n                alert(data.reason); \n                return; \n            }\n\n            // production mode\n            location.href=\"https://auth.kenzap.com/?app=65432108792785&redirect=\"+window.location.href; break;\n        \n        // something else\n        default:\n\n            alert(data.reason); \n            break;\n    }\n}\n\n/**\n * @name initBreadcrumbs\n * @description Render ui breadcrumbs.\n * @param {array} data - List of link objects containing link text and url. If url is missing then renders breadcrumb as static text. Requires html holder with .bc class.\n */\nexport const initBreadcrumbs = (data) => {\n\n    let html = '<ol class=\"breadcrumb mt-2 mb-0\">';\n    for(let bc of data){\n        \n        if(typeof(bc.link) === 'undefined'){\n\n            html += `<li class=\"breadcrumb-item\">${ bc.text }</li>`;\n        }else{\n\n            html += `<li class=\"breadcrumb-item\"><a href=\"${ bc.link }\">${ bc.text }</a></li>`;\n        }\n    }\n    html += '</ol>';\n    \n    document.querySelector(\".bc\").innerHTML = html;\n}\n\n/**\n * @name onClick\n * @description One row click event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onClick = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n/**\n * @name onKeyUp\n * @description One row key up event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onKeyUp = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('keyup', fn, true);\n        e.addEventListener('keyup', fn, true);\n    }\n}\n\n/**\n * @name onChange\n * @description One row change event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onChange = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('change', fn, true);\n        e.addEventListener('change', fn, true);\n    }\n}\n\n/**\n * @name loadScript\n * @description Asynchronous script loader function.\n * @param {string} url - HTML selector, id, class, etc.\n * @param {string} cb - callback function fired immediately after script is loaded.\n */\n export const loadScript = (url, cb) => {\n\n    if (!Array.from(document.querySelectorAll('script')).some(elm => elm.src == url)) {\n      let script = document.createElement('script')\n      script.onload = cb\n      script.src = url\n      document.getElementsByTagName('head')[0].appendChild(script)\n    }\n}\n\n/**\n * @name simulateClick\n * @description Trigger on click event without user interaction.\n * @param {string} elem - HTML selector, id, class, etc.\n */\n export const simulateClick = (elem) => {\n\n\t// create our event (with options)\n\tlet evt = new MouseEvent('click', {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tview: window\n\t});\n\n\t// if cancelled, don't dispatch the event\n\t!elem.dispatchEvent(evt);\n};\n\n/**\n * Create a web friendly URL slug from a string.\n *\n * Requires XRegExp (http://xregexp.com) with unicode add-ons for UTF-8 support.\n *\n * Although supported, transliteration is discouraged because\n *     1) most web browsers support UTF-8 characters in URLs\n *     2) transliteration causes a loss of information\n *\n * @author Sean Murphy <sean@iamseanmurphy.com>\n * @copyright Copyright 2012 Sean Murphy. All rights reserved.\n * @license http://creativecommons.org/publicdomain/zero/1.0/\n *\n * @param string s\n * @param object opt\n * @return string\n */\n export const slugify = (s, opt) => {\n\n\ts = String(s);\n\topt = Object(opt);\n\t\n\tvar defaults = {\n\t\t'delimiter': '-',\n\t\t'limit': undefined,\n\t\t'lowercase': true,\n\t\t'replacements': {},\n\t\t'transliterate': (typeof(XRegExp) === 'undefined') ? true : false\n\t};\n\t\n\t// Merge options\n\tfor (var k in defaults) {\n\t\tif (!opt.hasOwnProperty(k)) {\n\t\t\topt[k] = defaults[k];\n\t\t}\n\t}\n\t\n\tvar char_map = {\n\t\t// Latin\n\t\t'À': 'A', 'Á': 'A', 'Â': 'A', 'Ã': 'A', 'Ä': 'A', 'Å': 'A', 'Æ': 'AE', 'Ç': 'C', \n\t\t'È': 'E', 'É': 'E', 'Ê': 'E', 'Ë': 'E', 'Ì': 'I', 'Í': 'I', 'Î': 'I', 'Ï': 'I', \n\t\t'Ð': 'D', 'Ñ': 'N', 'Ò': 'O', 'Ó': 'O', 'Ô': 'O', 'Õ': 'O', 'Ö': 'O', 'Å': 'O', \n\t\t'Ø': 'O', 'Ù': 'U', 'Ú': 'U', 'Û': 'U', 'Ü': 'U', 'Å°': 'U', 'Ý': 'Y', 'Þ': 'TH', \n\t\t'ß': 'ss', \n\t\t'à': 'a', 'á': 'a', 'â': 'a', 'ã': 'a', 'ä': 'a', 'å': 'a', 'æ': 'ae', 'ç': 'c', \n\t\t'è': 'e', 'é': 'e', 'ê': 'e', 'ë': 'e', 'ì': 'i', 'í': 'i', 'î': 'i', 'ï': 'i', \n\t\t'ð': 'd', 'ñ': 'n', 'ò': 'o', 'ó': 'o', 'ô': 'o', 'õ': 'o', 'ö': 'o', 'Å': 'o', \n\t\t'ø': 'o', 'ù': 'u', 'ú': 'u', 'û': 'u', 'ü': 'u', 'Å±': 'u', 'ý': 'y', 'þ': 'th', \n\t\t'ÿ': 'y',\n\n\t\t// Latin symbols\n\t\t'©': '(c)',\n\n\t\t// Greek\n\t\t'Α': 'A', 'Β': 'B', 'Γ': 'G', 'Δ': 'D', 'Ε': 'E', 'Ζ': 'Z', 'Η': 'H', 'Θ': '8',\n\t\t'Ι': 'I', 'Κ': 'K', 'Λ': 'L', 'Μ': 'M', 'Ν': 'N', 'Ξ': '3', 'Ο': 'O', 'Π': 'P',\n\t\t'Ρ': 'R', 'Σ': 'S', 'Τ': 'T', 'Υ': 'Y', 'Φ': 'F', 'Χ': 'X', 'Ψ': 'PS', 'Ω': 'W',\n\t\t'Î': 'A', 'Î': 'E', 'Î': 'I', 'Î': 'O', 'Î': 'Y', 'Î': 'H', 'Î': 'W', 'Îª': 'I',\n\t\t'Î«': 'Y',\n\t\t'α': 'a', 'β': 'b', 'γ': 'g', 'δ': 'd', 'ε': 'e', 'ζ': 'z', 'η': 'h', 'θ': '8',\n\t\t'ι': 'i', 'κ': 'k', 'λ': 'l', 'μ': 'm', 'ν': 'n', 'ξ': '3', 'ο': 'o', 'π': 'p',\n\t\t'ρ': 'r', 'σ': 's', 'τ': 't', 'υ': 'y', 'φ': 'f', 'χ': 'x', 'ψ': 'ps', 'ω': 'w',\n\t\t'Î¬': 'a', 'Î­': 'e', 'Î¯': 'i', 'Ï': 'o', 'Ï': 'y', 'Î®': 'h', 'Ï': 'w', 'ς': 's',\n\t\t'Ï': 'i', 'Î°': 'y', 'Ï': 'y', 'Î': 'i',\n\n\t\t// Turkish\n\t\t'Å': 'S', 'Ä°': 'I', 'Ç': 'C', 'Ü': 'U', 'Ö': 'O', 'Ä': 'G',\n\t\t'Å': 's', 'Ä±': 'i', 'ç': 'c', 'ü': 'u', 'ö': 'o', 'Ä': 'g', \n\n\t\t// Russian\n\t\t'Ð': 'A', 'Ð': 'B', 'Ð': 'V', 'Ð': 'G', 'Ð': 'D', 'Ð': 'E', 'Ð': 'Yo', 'Ð': 'Zh',\n\t\t'Ð': 'Z', 'Ð': 'I', 'Ð': 'J', 'Ð': 'K', 'Ð': 'L', 'Ð': 'M', 'Ð': 'N', 'Ð': 'O',\n\t\t'Ð': 'P', 'Ð ': 'R', 'Ð¡': 'S', 'Ð¢': 'T', 'Ð£': 'U', 'Ð¤': 'F', 'Ð¥': 'H', 'Ð¦': 'C',\n\t\t'Ð§': 'Ch', 'Ð¨': 'Sh', 'Ð©': 'Sh', 'Ðª': '', 'Ð«': 'Y', 'Ð¬': '', 'Ð­': 'E', 'Ð®': 'Yu',\n\t\t'Ð¯': 'Ya',\n\t\t'Ð°': 'a', 'Ð±': 'b', 'Ð²': 'v', 'Ð³': 'g', 'Ð´': 'd', 'Ðµ': 'e', 'Ñ': 'yo', 'Ð¶': 'zh',\n\t\t'Ð·': 'z', 'Ð¸': 'i', 'Ð¹': 'j', 'Ðº': 'k', 'Ð»': 'l', 'Ð¼': 'm', 'Ð½': 'n', 'Ð¾': 'o',\n\t\t'Ð¿': 'p', 'Ñ': 'r', 'Ñ': 's', 'Ñ': 't', 'Ñ': 'u', 'Ñ': 'f', 'Ñ': 'h', 'Ñ': 'c',\n\t\t'Ñ': 'ch', 'Ñ': 'sh', 'Ñ': 'sh', 'Ñ': '', 'Ñ': 'y', 'Ñ': '', 'Ñ': 'e', 'Ñ': 'yu',\n\t\t'Ñ': 'ya',\n\n\t\t// Ukrainian\n\t\t'Ð': 'Ye', 'Ð': 'I', 'Ð': 'Yi', 'Ò': 'G',\n\t\t'Ñ': 'ye', 'Ñ': 'i', 'Ñ': 'yi', 'Ò': 'g',\n\n\t\t// Czech\n\t\t'Ä': 'C', 'Ä': 'D', 'Ä': 'E', 'Å': 'N', 'Å': 'R', 'Š': 'S', 'Å¤': 'T', 'Å®': 'U', \n\t\t'Å½': 'Z', \n\t\t'Ä': 'c', 'Ä': 'd', 'Ä': 'e', 'Å': 'n', 'Å': 'r', 'š': 's', 'Å¥': 't', 'Å¯': 'u',\n\t\t'Å¾': 'z', \n\n\t\t// Polish\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'e', 'Å': 'L', 'Å': 'N', 'Ó': 'o', 'Å': 'S', 'Å¹': 'Z', \n\t\t'Å»': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Å': 'l', 'Å': 'n', 'ó': 'o', 'Å': 's', 'Åº': 'z',\n\t\t'Å¼': 'z',\n\n\t\t// Latvian\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'E', 'Ä¢': 'G', 'Äª': 'i', 'Ä¶': 'k', 'Ä»': 'L', 'Å': 'N', \n\t\t'Š': 'S', 'Åª': 'u', 'Å½': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Ä£': 'g', 'Ä«': 'i', 'Ä·': 'k', 'Ä¼': 'l', 'Å': 'n',\n\t\t'š': 's', 'Å«': 'u', 'Å¾': 'z'\n\t};\n\t\n\t// Make custom replacements\n\tfor (var k in opt.replacements) {\n\t\ts = s.replace(RegExp(k, 'g'), opt.replacements[k]);\n\t}\n\t\n\t// Transliterate characters to ASCII\n\tif (opt.transliterate) {\n\t\tfor (var k in char_map) {\n\t\t\ts = s.replace(RegExp(k, 'g'), char_map[k]);\n\t\t}\n\t}\n\t\n\t// Replace non-alphanumeric characters with our delimiter\n\tvar alnum = (typeof(XRegExp) === 'undefined') ? RegExp('[^a-z0-9]+', 'ig') : XRegExp('[^\\\\p{L}\\\\p{N}]+', 'ig');\n\ts = s.replace(alnum, opt.delimiter);\n\t\n\t// Remove duplicate delimiters\n\ts = s.replace(RegExp('[' + opt.delimiter + ']{2,}', 'g'), opt.delimiter);\n\t\n\t// Truncate slug to max. characters\n\ts = s.substring(0, opt.limit);\n\t\n\t// Remove delimiter from ends\n\ts = s.replace(RegExp('(^' + opt.delimiter + '|' + opt.delimiter + '$)', 'g'), '');\n\t\n\treturn opt.lowercase ? s.toLowerCase() : s;\n}\n\n/**\n * @name toast\n * @description Triggers toast notification. Adds toast html to the page if missing.\n * @param {string} text - Toast notification.\n */\n export const toast = (text) => {\n\n    // only add once\n    if(!document.querySelector(\".toast\")){\n\n        let html = `\n        <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\">\n            <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n                <div class=\"d-flex\">\n                    <div class=\"toast-body\"></div>\n                    <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n                </div>\n            </div>\n        </div>`;\n        if(document.querySelector('body > div')) document.querySelector('body > div').insertAdjacentHTML('afterend', html);\n    }\n\n    let toast = new bootstrap.Toast(document.querySelector('.toast'));\n    document.querySelector('.toast .toast-body').innerHTML = text;  \n    toast.show();\n}","import { getCookie, getSiteId, simulateClick, headers } from '@kenzap/k-cloud';\n\nexport const CDN = \"https://cdn.kenzap.cloud/\";\nexport const API_KEY = \"Qz3fOs8Ghi7rpaW8BOlNgUyo7ANWYoKbRoUa8UkYd2I4FlAgUYFqzPM33IxqoFYa\";\n\nexport const spaceID = () => {\n\n    return \"1002170\"\n}\n\nexport const sortAlphaNum = (a, b) => a['title'].localeCompare(b['title'], 'en', { numeric: true })\n\n/**\n* Generates a random string\n* \n* @param int length_\n* @return string\n*/\nexport const randomString = (length_) => {\n\n    let chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz'.split('');\n    if (typeof length_ !== \"number\") {\n        length_ = Math.floor(Math.random() * chars.length_);\n    }\n    let str = '';\n    for (let i = 0; i < length_; i++) {\n        str += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return str;\n}\n\nexport const stringToHash = str => {\n\n    let hash = 0\n    for (let i = 0; i < str.length; ++i)\n        hash = Math.imul(31, hash) + str.charCodeAt(i)\n  \n    hash = 'c'+Math.abs(hash);\n    \n    // console.log(hash);\n\n    return hash;\n}\n\nexport const mt = (val) => {\n\n    return (\"\"+val).length < 2 ? \"0\"+val : val;\n}\n\nexport const getProductId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('id') ? urlParams.get('id') : \"\";\n    return id;\n}\n\nexport const getProductIdFromLink = () => {\n    \n    let url = new URL(window.location.href);\n    let id = url.pathname.trim().split('/').slice(-2)[0];\n    return id;\n}\n\nexport const replaceQueryParam = (param, newval, search) => {\n\n    let regex = new RegExp(\"([?;&])\" + param + \"[^&;]*[;&]?\");\n    let query = search.replace(regex, \"$1\").replace(/&$/, '');\n\n    return (query.length > 2 ? query + \"&\" : \"?\") + (newval ? param + \"=\" + newval : '');\n}\n\nexport const getPageNumberOld = () => {\n\n    let url = window.location.href.split('/');\n    let page = url[url.length-1];\n    let pageN = 1;\n    if(page.indexOf('page')==0){\n      pageN = page.replace('page', '').replace('#', '');\n    }\n    // console.log(pageN);\n    return parseInt(pageN);\n}\n\nexport const getPageNumber = () => {\n\n    let urlParams = new URLSearchParams(window.location.search);\n    let page = urlParams.get('page') ? urlParams.get('page') : 1;\n\n    return parseInt(page);\n}\n\nexport const getPagination = (__, meta, cb) => {\n\n    if(typeof(meta) === 'undefined'){ document.querySelector(\"#listing_info\").innerHTML = __('no records to display'); return; }\n\n    let offset = meta.limit+meta.offset;\n    if(offset>meta.total_records) offset = meta.total_records;\n\n    document.querySelector(\"#listing_info\").innerHTML = __(\"Showing %1$ to %2$ of %3$ entries\", (1+meta.offset), (offset), meta.total_records);\n    //  \"Showing \"+(1+meta.offset)+\" to \"+(offset)+\" of \"+meta.total_records+\" entries\";\n\n    let pbc = Math.ceil(meta.total_records / meta.limit);\n    document.querySelector(\"#listing_paginate\").style.display = (pbc < 2) ? \"none\" : \"block\";\n\n    let page = getPageNumber(); \n    let html = '<ul class=\"pagination d-flex justify-content-end pagination-flat mb-0\">';\n    html += '<li class=\"paginate_button page-item previous\" id=\"listing_previous\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"prev\" data-page=\"0\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&laquo;</span></li>';\n    let i = 0;\n    while(i<pbc){\n\n        i++; \n        if(((i >= page-3) && (i <= page)) || ((i <= page+3) && (i >=page))){\n\n            html += '<li class=\"paginate_button page-item '+((page==i)?'active':'')+'\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"page\" data-page=\"'+i+'\" tabindex=\"0\" class=\"page-link\">'+(page==i?i:i)+'</a></li>';      \n        }\n    }  \n    html += '<li class=\"paginate_button page-item next\" id=\"order-listing_next\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"next\" data-page=\"2\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&raquo;</span></a></li>';\n    html += '</ul>'\n\n    document.querySelector(\"#listing_paginate\").innerHTML = html;\n\n    let page_link = document.querySelectorAll(\".page-link\");\n    for (const l of page_link) {\n        \n        l.addEventListener('click', function(e) {\n\n            let p = parseInt(getPageNumber());\n            let ps = p;\n            switch(l.dataset.type){ \n                case 'prev': p-=1; if(p<1) p = 1; break;\n                case 'page': p=l.dataset.page; break;\n                case 'next': p+=1; if(p>pbc) p = pbc; break;\n            }\n            \n            // update url\n            if (window.history.replaceState) {\n\n                // let url = window.location.href.split('/page');\n                // let urlF = (url[0]+'/page'+p).replace('//page', '/page');\n\n                let str = window.location.search;\n                str = replaceQueryParam('page', p, str);\n                // window.location = window.location.pathname + str\n\n                // prevents browser from storing history with each change:\n                window.history.replaceState(\"kenzap-cloud\", document.title, window.location.pathname + str);\n            }\n\n            // only refresh if page differs\n            if(ps!=p) cb();\n            \n            e.preventDefault();\n            return false;\n        });\n    }\n}\n\nexport const formatStatus = (__, st) => {\n\n    st = parseInt(st); \n    switch(st){ \n      case 0: return '<div class=\"badge bg-warning text-dark fw-light\">' + __('Draft') + '</div>';\n      case 1: return '<div class=\"badge bg-primary fw-light\">' + __('Published') + '</div>';\n      case 3: return '<div class=\"badge bg-secondary fw-light\">' + __('Unpublished') + '</div>';\n      default: return '<div class=\"badge bg-secondary fw-light\">' + __('Drafts') + '</div>';\n    }\n}\n\n/**\n    * Render price\n    * @public\n    */\n export const priceFormat = function(_this, price) {\n\n    price = makeNumber(price);\n\n    price = (Math.round(parseFloat(price) * 100)/100).toFixed(2);\n    \n    switch(_this.state.settings.currency_symb_loc){\n        case 'left': price = _this.state.settings.currency_symb + price; break;\n        case 'right': price = price + _this.state.settings.currency_symb; break;\n        case 'left_space': price = _this.state.settings.currency_symb + ' ' + price; break;\n        case 'right_space': price = price + ' ' + _this.state.settings.currency_symb; break;\n    }\n\n    return price;\n}\n\nexport const makeNumber = function(price) {\n\n    price = price ? price : 0;\n    price = parseFloat(price);\n    price = Math.round(price * 100) / 100;\n    return price;\n}\n\nexport const formatTime = (__, timestamp) => {\n\t\n    const d = new Date(parseInt(timestamp) * 1000);\n    return d.toLocaleDateString();\n\n    let a = new Date(timestamp * 1000);\n    let months = [__('Jan'), __('Feb'), __('Mar'), __('Apr'), __('May'), __('Jun'), __('Jul'), __('Aug'), __('Sep'), __('Oct'), __('Nov'), __('Dec')];\n    let year = a.getFullYear();\n    let month = months[a.getMonth()];\n    let date = a.getDate();\n    let hour = a.getHours();\n    let min = a.getMinutes();\n    let sec = a.getSeconds();\n    let time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\n// numbers only with allowed exceptions\nexport const onlyNumbers = (sel, chars) => {\n\n    if(!document.querySelector(sel)) return;\n\n    for(let el of document.querySelectorAll(sel)){\n    \n        el.addEventListener('keypress', (e) => {\n\n            // console.log(e.which);\n\n            if((!chars.includes(e.which) && isNaN(String.fromCharCode(e.which))) || e.which == 32 || (document.querySelector(sel).value.includes(String.fromCharCode(e.which)) && chars.includes(e.which))){\n\n                // stop character from entering input\n                e.preventDefault(); \n                return false;\n            }\n        });\n    }\n}\n\n// nums only validation\nexport const numsOnly = (e, max) => {\n\n    // Only ASCII charactar in that range allowed \n    var ASCIICode = (e.which) ? e.which : e.keyCode \n    if (ASCIICode > 31 && ASCIICode != 46 && (ASCIICode < 48 || ASCIICode > 57)) \n    return false; \n\n    if(parseFloat(e.target.value)>max) \n    return false; \n\n    let dec = e.target.value.split('.');\n    if(dec.length>1)\n    if(dec[1].length>1)\n        return false;\n    \n    return true; \n}\n\nexport const onClick = (sel, fn) => {\n\n    // console.log('onClick');\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n// time elapsed since creation \nexport const timeConverterAgo = (__, now, time) => {\n\n    now = parseInt(now);\n    time = parseInt(time);\n\n    // parse as elapsed time\n    let past = now - time;\n    if(past < 60) return __('moments ago');\n    if(past < 3600) return __('%1$ minutes ago', parseInt(past / 60));\n    if(past < 86400) return  __('%1$ hours ago', parseInt(past / 60 / 60));\n\n    // process as normal date\n    var a = new Date(time * 1000);\n    var months = [ __('Jan'), __('Feb'), __('Mar'), __('Apr'), __('May'), __('Jun'), __('Jul'), __('Aug'), __('Sep'), __('Oct'), __('Nov'), __('Dec') ];\n    var year = a.getFullYear();\n    var month = months[a.getMonth()];\n    var date = a.getDate();\n    var hour = a.getHours();\n    var min = a.getMinutes();\n    var sec = a.getSeconds();\n    var time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\nexport const parseVariations = (_this, product) => {\n\n    let html_vars = '';\n    if(typeof(product.variations !== 'undefined'))\n    for(let v in product.variations){\n\n        // variation type\n        let type = '';\t\n        if(product.variations[v].type=='checkbox') type = 'check';\n        if(product.variations[v].type=='radio')    type = 'radio';\n\n        // struct variation\n        html_vars += '\\\n        <b>' + __(product.variations[v].title) + (product.variations[v].required == '1' ? ' <span class=\"tag\">'+__('required')+'</span>':'')+'</b>\\\n        <div class=\"kp-'+type+'\" >';\n\n        // variation labels\n        for(let d in product.variations[v].data){\n\n            let checked = false;\n            // for public qr feed\n            // if(typeof(cart.state.product.variations[v]) !== 'undefined' && typeof(cart.state.product.variations[v].list) !== 'undefined' && typeof(cart.state.product.variations[v].list[\"_\"+d]) !== 'undefined'){ checked = true; }\n            \n            // verify variation price validity\n            product.variations[v].data[d]['price'] = makeNumber(product.variations[v].data[d]['price']);\n\n            switch(type){\n                case 'check':\n\n                html_vars += '\\\n                    <label>\\\n                        <input type=\"checkbox\" data-required=\"'+product.variations[v].required+'\" data-indexv=\"'+v+'\" data-index=\"'+d+'\" data-title=\"'+product.variations[v].data[d]['title']+'\" data-titlev=\"'+__(product.variations[v].title)+'\" data-price=\"'+product.variations[v].data[d]['price']+'\" '+(checked?'checked=\"checked\"':'')+'>\\\n                        <div class=\"checkbox\">\\\n                            <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\">\\\n                                <path d=\"M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z\"></path>\\\n                                <polyline points=\"4 11 8 15 16 6\"></polyline>\\\n                            </svg>\\\n                        </div>\\\n                        <span>'+__(product.variations[v].data[d]['title'])+'</span>\\\n                        <div class=\"price\">+ '+priceFormat(_this, product.variations[v].data[d]['price'])+'</div>\\\n                    </label>';\n                \n                break;\n                case 'radio':\n\n                html_vars += '\\\n                    <label>\\\n                        <input type=\"radio\" data-required=\"'+product.variations[v].required+'\" data-indexv=\"'+v+'\" name=\"radio'+v+'\" data-index=\"'+d+'\" data-title=\"'+product.variations[v].data[d]['title']+'\" data-titlev=\"'+__(product.variations[v].title)+'\" data-price=\"'+product.variations[v].data[d]['price']+'\" '+(checked?'checked=\"checked\"':'')+' />\\\n                        <span>'+__(product.variations[v].data[d]['title'])+'</span>\\\n                        <div class=\"price\">+ '+priceFormat(_this, product.variations[v].data[d]['price'])+'</div>\\\n                    </label>';\n                \n                break;\n            }\n        }\n\n        html_vars += '</div>';\n    }\n\n    return html_vars;\n}\n\nexport const escape = (htmlStr) => {\n\n    return htmlStr.replace(/&/g, \"&amp;\")\n          .replace(/</g, \"&lt;\")\n          .replace(/>/g, \"&gt;\")\n          .replace(/\"/g, \"&quot;\")\n          .replace(/'/g, \"&#39;\");        \n \n}\n\nexport const unescape = (htmlStr) => {\n\n    htmlStr = htmlStr.replace(/&lt;/g , \"<\");\t \n    htmlStr = htmlStr.replace(/&gt;/g , \">\");     \n    htmlStr = htmlStr.replace(/&quot;/g , \"\\\"\");  \n    htmlStr = htmlStr.replace(/&#39;/g , \"\\'\");   \n    htmlStr = htmlStr.replace(/&amp;/g , \"&\");\n    return htmlStr;\n}\n\nexport const ecommerceUpdates = (_this, source, cb) => {\n\n    // do API query\n    fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n        method: 'post',\n        headers: headers,\n        body: JSON.stringify({\n            query: {\n                updates: {\n                    type:       'updates',\n                    source:     source,\n                }\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        if(response.success){\n\n            // do callback\n            cb(response);\n            \n            // parse notifications\n            renderNotifications(_this, response.messages);\n            \n        }else{\n\n\n        }\n    })\n    .catch(error => { // parseApiError(error); \n    });\n}\n\nexport const isMobile = () => {\n\n    const nav = navigator.userAgent.toLowerCase();\n    return (\n        nav.match(/iphone/i) || nav.match(/ipod/i) || nav.match(/ipad/i) || nav.match(/android/i)\n    );\n}\n\n// play notification sound. Ex.: when new order received\nexport const playSound = (_this, max) => {\n \n    // if(!max) max = _this.state.playSound.max_times;\n\n    _this.state.playSound.n = 0;\n\n    if(_this.state.playSound.timer) clearInterval(_this.state.playSound.timer);\n\n    if(_this.state.playSound.allowed) _this.state.playSound.audio.play();\n\n    console.log(\"playing \" + _this.state.playSound.allowed);\n\n    try{\n        if(_this.state.playSound.allowed && isMobile()) window.navigator.vibrate(200);\n    }catch{\n\n    }\n\n    if(max==1) return;\n\n    _this.state.playSound.timer = setInterval(() => {\n\n        if(!_this.state.playSound.allowed) return;\n         \n        _this.state.playSound.audio.play();\n\n        if(_this.state.playSound.n > max){ clearInterval(_this.state.playSound.timer) }\n\n        _this.state.playSound.n += 1;\n\n    }, 5000);\n\n    // console.log('playSound');\n}\n\nexport const lazyLoad = () => {\n\n    let lazyImages = [].slice.call(document.querySelectorAll(\"img.lazy\"));\n    if (document.querySelector(\"body\").dataset.lazyLoading != '1'){\n\n        document.querySelector(\"body\").dataset.lazyLoading = '1';\n        setTimeout(function() {\n            lazyImages.forEach(function(lazyImage) {\n                if ((lazyImage.getBoundingClientRect().top <= window.innerHeight && lazyImage.getBoundingClientRect().bottom >= 0) && getComputedStyle(lazyImage).display !== \"none\") {\n\n                    lazyImage.src = lazyImage.dataset.src;\n                    lazyImage.srcset = lazyImage.dataset.srcset;\n                    lazyImage.classList.remove(\"lazy\");\n                    lazyImages = lazyImages.filter(function(image) {\n                        return image !== lazyImage;\n                    });\n                }\n            });\n            document.querySelector(\"body\").dataset.lazyLoading = '0';\n        }, 0);\n    }\n}\n\nexport const renderNotifications = (_this, messages) => {\n\n    let html = '';\n\n    let play = false;\n\n    // html\n    messages.forEach(msg => {\n\n        if(!_this.state.playSound.nids.includes(msg._id)){ _this.state.playSound.nids.push(msg._id); play = true; }\n\n        if(!document.querySelector('#contents .container [data-id=\"'+msg._id+'\"]')){\n        \n            html += `\n\n            <div class=\"alert alert-${ msg.color } alert-dismissible fade show\" role=\"alert\" data-id=\"${ msg._id }\">\n                <div class=\"d-flex align-items-center\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-exclamation-square flex-shrink-0 me-2\" viewBox=\"0 0 16 16\">\n                        <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"/>\n                        <path d=\"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z\"/>\n                    </svg>\n                    <div>\n                    ${ msg.msg }\n                    </div>\n                </div>\n                <button type=\"button\" class=\"btn-close btn-dismiss-notify\" data-bs-dismiss=\"alert\" aria-label=\"Close\" data-id=\"${ msg._id }\"></button>\n            </div>`;\n        }\n    });\n\n    // play sound\n    if(play){ console.log('notify play sound'); playSound(_this, 1); _this.getData(); }\n\n    if(document.querySelector('#contents .container')) document.querySelector('#contents .container').insertAdjacentHTML(\"afterbegin\", html);\n\n    // listeners\n    onClick('.btn-dismiss-notify', (e) => {\n\n        // do API query\n        fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n            method: 'post',\n            headers: headers,\n            body: JSON.stringify({\n                query: {\n                    updates: {\n                        type:       'dismiss',\n                        id:         e.currentTarget.dataset.id,\n                    }\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            if(response.success){\n\n\n\n            }else{\n\n\n            }\n        })\n        .catch(error => { // parseApiError(error); \n        });\n    });\n\n    // order open listener\n    if(document.querySelector('.order-details')) for( let el of document.querySelectorAll('.order-details') ){\n\n        if(el.dataset.assigned == \"1\") return;\n\n        el.dataset.assigned = 1;\n\n        el.addEventListener('click', (e) => {\n\n            let el = document.querySelector(\".view-order[data-id='\"+e.currentTarget.dataset.id+\"']\");\n\n            simulateClick(el);\n\n        }, true);\n    }\n}\n\nexport const printReceipt = (_this, order) => {\n\n    // vars\n    let o = order, data = {}, date = new Date();\n\n    // 58mm wide thermal printers are best to display 32 chars per line\n    let row = (txt, end_ofst) => {\n\n        let output = '', max_char = 32 - end_ofst, max_ofst = 4, ofst_prev = 0, ofst = 0, ci = 0;\n        // console.log(max_char);\n        for(let i = 0; i < Math.ceil(txt.length / max_char); i++){\n\n            // add new line print from second loop only\n            if(i>0) output += '\\n[L]';\n\n            // ofst store first available whitespace break in words\n            ofst = ci = 0;\n            for(let e = max_ofst; e > -1 * max_ofst; e--){\n\n                ci = ((max_char + ofst_prev) * i) + max_char + e; if(txt[ci] == ' ' || ci == txt.length){ ofst += e; break; }\n            }\n\n            // add line row\n            output += txt.substr((max_char + ofst_prev) * i, max_char + ofst);\n\n            // line ends earlier than expected, skip loop\n            if(ci == txt.length) break;\n\n            ofst_prev = ofst;\n        }\n\n        return output;\n    };\n\n    // debug vs actual print\n    data.debug = false;\n\n    // get receipt template\n    data.print = _this.state.settings.receipt_template;\n\n    console.log(data.print);\n\n    // order id\n    data.print = data.print.replace(/{{order_id}}/g, o.id);\n\n    // current time\n    data.print = data.print.replace(/{{date_time}}/g, date.toLocaleString([], { dateStyle: 'medium', timeStyle: 'short', }));\n\n    // order items\n    let items = '';\n    for(let i in o.items){\n\n        console.log(__(o.items[i].title));\n\n        let total = priceFormat(_this, o.items[i].total);\n        let end_ofst = (o.items[i].qty+\"\").length + (total+\"\").length + 3;\n        items += `[L]<b>${ o.items[i].qty } X ${ row(__(o.items[i].title), end_ofst) }</b>[R]${ total }\\n`;\n        for(let v in o.items[i].variations){\n\n            items += `[L] ${ row(__(o.items[i].variations[v].title), 1) }:`;\n            for(let l in  o.items[i].variations[v].list) items += ` ${ o.items[i].variations[v].list[l].title },`;\n\n            if(items.endsWith(',')) items = items.substring(0, items.length - 1) + '\\n';\n\n            // parse variation list\n            // let list = ''; for(let l in item[x].variations[v].list) list += item[x].variations[v].list[l].title + \" \";\n            // vars += '<div><b>' + item[x].variations[v].title + \"</b> <span>\" + list + \"</span></div> \";\n    \n            // // meal note\n            // if(item[x].variations[v].note !== undefined && item[x].variations[v].note.length > 0) vars += \"<div><b>\" + __('Note') + \"</b> \" + item[x].variations[v].note + \"</div> \";\n        }\n    }\n    if(items.endsWith('\\n')) items = items.substring(0, items.length - 2);\n    data.print = data.print.replace(/{{order_items}}/g, items);\n\n    // order note\n    let note = !o.note || o.note == '<br>' ? '' : o.note;\n    if(note.length>0){\n        //  data.print += '[C]================================';\n        data.print = data.print.replace(/{{order_note}}/g, '[C]================================\\n' + note + '\\n[C]================================\\n');\n    }\n    // if(note.length>0) data.print += '[C]================================';\n\n    // order totals\n    data.print = data.print.replace(/{{total}}/g, priceFormat(_this, o.price.total));\n    data.print = data.print.replace(/{{tax_total}}/g, priceFormat(_this, o.price.tax_total));\n    data.print = data.print.replace(/{{discount_total}}/g, priceFormat(_this, o.price.discount_total));\n    data.print = data.print.replace(/{{grand_total}}/g, priceFormat(_this, o.price.grand_total));\n\n\n    let order_totals  = '';\n    order_totals += '[L]Subtotal[R]' + priceFormat(_this, o.price.total) + '\\n';\n    if(o.price.discount_total > 0) order_totals += '[L]'+__('Discount')+'[R]-' + priceFormat(_this, o.price.discount_total) + '\\n';\n    if(o.price.fee_total > 0) order_totals += '[L]'+_this.state.settings.fee_display+'[R]' + priceFormat(_this, o.price.fee_total) + '\\n';\n    if(o.price.tax_total > 0) order_totals += '[L]'+_this.state.settings.tax_display+'[R]' + priceFormat(_this, o.price.tax_total) + '\\n';\n    if(o.price.grand_total > 0) order_totals += '[L]'+__('Grand Total')+'[R]' + priceFormat(_this, o.price.grand_total);\n\n    data.print = data.print.replace(/{{order_totals}}/g, order_totals);\n\n    // qr link\n    data.print = data.print.replace(/{{qr_link}}/g, 'http://'+_this.state.qr_settings.slug + '.kenzap.site');\n    data.print = data.print.replace(/{{qr_number}}/g, document.querySelector('#qr-number').value);\n\n        \n    // let click = document.querySelector(\".print-order[data-id='\"+e.currentTarget.dataset.id+\"']\");\n\n    // click.setAttribute('href', 'kenzapprint://kenzapprint.app?data='+encodeURIComponent(JSON.stringify(data)));\n\n    // e.currentTarget.setAttribute('href', 'kenzapprint://kenzapprint.app?data='+JSON.stringify(data));\n\n    // alert(data.print);\n\n    let str = 'kenzapprint://kenzapprint.app?data='+encodeURIComponent(JSON.stringify(data));\n    \n    if(data.debug) { console.log(data.print); console.log(str); }\n\n    return str;\n}\n\nexport const printQR = (_this, order) => {\n\n    // vars\n    let o = order, data = {}, date = new Date();\n\n    // debug vs actual print\n    data.debug = false;\n\n    // get qr template\n    data.print = _this.state.settings.qr_template;\n\n    // qr link\n    data.print = data.print.replace(/{{qr_link}}/g, 'http://'+_this.state.qr_settings.slug + '.kenzap.site');\n    data.print = data.print.replace(/{{qr_number}}/g, document.querySelector('#qr-number').value);\n\n    if(data.debug) { console.log(data.print); console.log(str); }\n\n    let str = 'kenzapprint://kenzapprint.app?data='+encodeURIComponent(JSON.stringify(data));\n\n    return str;\n}\n\n/**\n * Converts degrees to radians\n * \n * @param deg {Integer}\n * @returns {Integer} - radians\n */\nexport const degToRad = (deg) => {\n\n    return (deg - 90) * Math.PI / 180.0;\n}\n\n/*\n* Load additional JS or CSS depencies\n*\n* @param    dep       dependecy. Ex.: hiebee.min.js \n* @param    cb        function to call after script is loaded (optional)       \n* @return \t{Boolen} \tresult status \n* \n*/\nexport const loadAddon = (dep, version, cb) => {\n\n    // dependency already loaded, skip\n    if(document.getElementById(dep)){ if(typeof cb === 'function') cb.call(); return; }\n\n    // detect dependency type\n    let t = dep.split('.').slice(-1)[0];\n    // console.log(dep+'loadAddon'+t);\n    switch(t){\n      case 'js':\n        \n        let js = document.createElement(\"script\");\n        js.setAttribute(\"src\", dep);\n        js.id = dep;\n        js.onload = js.onreadystatechange = function() {\n \n          if(!this.readyState || this.readyState == 'complete')\n            if(typeof cb === 'function') cb.call();\n        };\n        document.body.appendChild(js);\n        \n      break;\n      case 'css':\n\n        var head  = document.getElementsByTagName('head')[0];\n        var css  = document.createElement('link');\n        css.id   = dep;\n        css.rel  = 'stylesheet';\n        css.type = 'text/css';\n        css.href = dep;\n        head.appendChild(css);\n\n      break;\n    }\n}\n\n/**\n * @name setCookie\n * @description Set cookie by its name to all .kenzap.cloud subdomains\n * @param {string} name - Cookie name.\n * @param {string} value - Cookie value.\n * @param {string} days - Number of days when cookie expires.\n */\n export const setCookie = (name, value, days) => {\n\n    let expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \";expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (escape(value) || \"\") + expires + \";path=/\"; \n}\n\nexport const getCurrencies = () => {\n\n    // length 164\n    return [\n        {\"name\":\"Afghan Afghani\",\"code\":\"AFA\",\"symbol\":\"؋\"},\n        {\"name\":\"Albanian Lek\",\"code\":\"ALL\",\"symbol\":\"Lek\"},\n        {\"name\":\"Algerian Dinar\",\"code\":\"DZD\",\"symbol\":\"دج\"},\n        {\"name\":\"Angolan Kwanza\",\"code\":\"AOA\",\"symbol\":\"Kz\"},\n        {\"name\":\"Argentine Peso\",\"code\":\"ARS\",\"symbol\":\"$\"},\n        {\"name\":\"Armenian Dram\",\"code\":\"AMD\",\"symbol\":\"֏\"},\n        {\"name\":\"Aruban Florin\",\"code\":\"AWG\",\"symbol\":\"ƒ\"},\n        {\"name\":\"Australian Dollar\",\"code\":\"AUD\",\"symbol\":\"$\"},\n        {\"name\":\"Azerbaijani Manat\",\"code\":\"AZN\",\"symbol\":\"m\"},\n        {\"name\":\"Bahamian Dollar\",\"code\":\"BSD\",\"symbol\":\"B$\"},\n        {\"name\":\"Bahraini Dinar\",\"code\":\"BHD\",\"symbol\":\".د.ب\"},\n        {\"name\":\"Bangladeshi Taka\",\"code\":\"BDT\",\"symbol\":\"৳\"},\n        {\"name\":\"Barbadian Dollar\",\"code\":\"BBD\",\"symbol\":\"Bds$\"},\n        {\"name\":\"Belarusian Ruble\",\"code\":\"BYR\",\"symbol\":\"Br\"},\n        {\"name\":\"Belgian Franc\",\"code\":\"BEF\",\"symbol\":\"fr\"},\n        {\"name\":\"Belize Dollar\",\"code\":\"BZD\",\"symbol\":\"$\"},\n        {\"name\":\"Bermudan Dollar\",\"code\":\"BMD\",\"symbol\":\"$\"},\n        {\"name\":\"Bhutanese Ngultrum\",\"code\":\"BTN\",\"symbol\":\"Nu.\"},\n        {\"name\":\"Bitcoin\",\"code\":\"BTC\",\"symbol\":\"฿\"},\n        {\"name\":\"Bolivian Boliviano\",\"code\":\"BOB\",\"symbol\":\"Bs.\"},\n        {\"name\":\"Bosnia-Herzegovina Convertible Mark\",\"code\":\"BAM\",\"symbol\":\"KM\"},\n        {\"name\":\"Botswanan Pula\",\"code\":\"BWP\",\"symbol\":\"P\"},\n        {\"name\":\"Brazilian Real\",\"code\":\"BRL\",\"symbol\":\"R$\"},\n        {\"name\":\"British Pound Sterling\",\"code\":\"GBP\",\"symbol\":\"£\"},\n        {\"name\":\"Brunei Dollar\",\"code\":\"BND\",\"symbol\":\"B$\"},\n        {\"name\":\"Bulgarian Lev\",\"code\":\"BGN\",\"symbol\":\"Лв.\"},\n        {\"name\":\"Burundian Franc\",\"code\":\"BIF\",\"symbol\":\"FBu\"},\n        {\"name\":\"Cambodian Riel\",\"code\":\"KHR\",\"symbol\":\"KHR\"},\n        {\"name\":\"Canadian Dollar\",\"code\":\"CAD\",\"symbol\":\"$\"},\n        {\"name\":\"Cape Verdean Escudo\",\"code\":\"CVE\",\"symbol\":\"$\"},\n        {\"name\":\"Cayman Islands Dollar\",\"code\":\"KYD\",\"symbol\":\"$\"},\n        {\"name\":\"CFA Franc BCEAO\",\"code\":\"XOF\",\"symbol\":\"CFA\"},\n        {\"name\":\"CFA Franc BEAC\",\"code\":\"XAF\",\"symbol\":\"FCFA\"},\n        {\"name\":\"CFP Franc\",\"code\":\"XPF\",\"symbol\":\"₣\"},\n        {\"name\":\"Chilean Peso\",\"code\":\"CLP\",\"symbol\":\"$\"},\n        {\"name\":\"Chinese Yuan\",\"code\":\"CNY\",\"symbol\":\"¥\"},\n        {\"name\":\"Colombian Peso\",\"code\":\"COP\",\"symbol\":\"$\"},\n        {\"name\":\"Comorian Franc\",\"code\":\"KMF\",\"symbol\":\"CF\"},\n        {\"name\":\"Congolese Franc\",\"code\":\"CDF\",\"symbol\":\"FC\"},\n        {\"name\":\"Costa Rican Colón\",\"code\":\"CRC\",\"symbol\":\"₡\"},\n        {\"name\":\"Croatian Kuna\",\"code\":\"HRK\",\"symbol\":\"kn\"},\n        {\"name\":\"Cuban Convertible Peso\",\"code\":\"CUC\",\"symbol\":\"$, CUC\"},\n        {\"name\":\"Czech Republic Koruna\",\"code\":\"CZK\",\"symbol\":\"Kč\"},\n        {\"name\":\"Danish Krone\",\"code\":\"DKK\",\"symbol\":\"Kr.\"},\n        {\"name\":\"Djiboutian Franc\",\"code\":\"DJF\",\"symbol\":\"Fdj\"},\n        {\"name\":\"Dominican Peso\",\"code\":\"DOP\",\"symbol\":\"$\"},\n        {\"name\":\"East Caribbean Dollar\",\"code\":\"XCD\",\"symbol\":\"$\"},\n        {\"name\":\"Egyptian Pound\",\"code\":\"EGP\",\"symbol\":\"ج.م\"},\n        {\"name\":\"Eritrean Nakfa\",\"code\":\"ERN\",\"symbol\":\"Nfk\"},\n        {\"name\":\"Estonian Kroon\",\"code\":\"EEK\",\"symbol\":\"kr\"},\n        {\"name\":\"Ethiopian Birr\",\"code\":\"ETB\",\"symbol\":\"Nkf\"},\n        {\"name\":\"Euro\",\"code\":\"EUR\",\"symbol\":\"€\"},\n        {\"name\":\"Falkland Islands Pound\",\"code\":\"FKP\",\"symbol\":\"£\"},\n        {\"name\":\"Fijian Dollar\",\"code\":\"FJD\",\"symbol\":\"FJ$\"},\n        {\"name\":\"Gambian Dalasi\",\"code\":\"GMD\",\"symbol\":\"D\"},\n        {\"name\":\"Georgian Lari\",\"code\":\"GEL\",\"symbol\":\"ლ\"},\n        {\"name\":\"German Mark\",\"code\":\"DEM\",\"symbol\":\"DM\"},\n        {\"name\":\"Ghanaian Cedi\",\"code\":\"GHS\",\"symbol\":\"GH₵\"},\n        {\"name\":\"Gibraltar Pound\",\"code\":\"GIP\",\"symbol\":\"£\"},\n        {\"name\":\"Greek Drachma\",\"code\":\"GRD\",\"symbol\":\"₯, Δρχ, Δρ\"},\n        {\"name\":\"Guatemalan Quetzal\",\"code\":\"GTQ\",\"symbol\":\"Q\"},\n        {\"name\":\"Guinean Franc\",\"code\":\"GNF\",\"symbol\":\"FG\"},\n        {\"name\":\"Guyanaese Dollar\",\"code\":\"GYD\",\"symbol\":\"$\"},\n        {\"name\":\"Haitian Gourde\",\"code\":\"HTG\",\"symbol\":\"G\"},\n        {\"name\":\"Honduran Lempira\",\"code\":\"HNL\",\"symbol\":\"L\"},\n        {\"name\":\"Hong Kong Dollar\",\"code\":\"HKD\",\"symbol\":\"$\"},\n        {\"name\":\"Hungarian Forint\",\"code\":\"HUF\",\"symbol\":\"Ft\"},\n        {\"name\":\"Icelandic króna\",\"code\":\"ISK\",\"symbol\":\"kr\"},\n        {\"name\":\"Indian Rupee\",\"code\":\"INR\",\"symbol\":\"₹\"},\n        {\"name\":\"Indonesian Rupiah\",\"code\":\"IDR\",\"symbol\":\"Rp\"},\n        {\"name\":\"Iranian Rial\",\"code\":\"IRR\",\"symbol\":\"﷼\"},\n        {\"name\":\"Iraqi Dinar\",\"code\":\"IQD\",\"symbol\":\"د.ع\"},\n        {\"name\":\"Israeli New Sheqel\",\"code\":\"ILS\",\"symbol\":\"₪\"},\n        {\"name\":\"Italian Lira\",\"code\":\"ITL\",\"symbol\":\"L,£\"},\n        {\"name\":\"Jamaican Dollar\",\"code\":\"JMD\",\"symbol\":\"J$\"},\n        {\"name\":\"Japanese Yen\",\"code\":\"JPY\",\"symbol\":\"¥\"},\n        {\"name\":\"Jordanian Dinar\",\"code\":\"JOD\",\"symbol\":\"ا.د\"},\n        {\"name\":\"Kazakhstani Tenge\",\"code\":\"KZT\",\"symbol\":\"лв\"},\n        {\"name\":\"Kenyan Shilling\",\"code\":\"KES\",\"symbol\":\"KSh\"},\n        {\"name\":\"Kuwaiti Dinar\",\"code\":\"KWD\",\"symbol\":\"ك.د\"},\n        {\"name\":\"Kyrgystani Som\",\"code\":\"KGS\",\"symbol\":\"лв\"},\n        {\"name\":\"Laotian Kip\",\"code\":\"LAK\",\"symbol\":\"₭\"},\n        {\"name\":\"Latvian Lats\",\"code\":\"LVL\",\"symbol\":\"Ls\"},\n        {\"name\":\"Lebanese Pound\",\"code\":\"LBP\",\"symbol\":\"£\"},\n        {\"name\":\"Lesotho Loti\",\"code\":\"LSL\",\"symbol\":\"L\"},\n        {\"name\":\"Liberian Dollar\",\"code\":\"LRD\",\"symbol\":\"$\"},\n        {\"name\":\"Libyan Dinar\",\"code\":\"LYD\",\"symbol\":\"د.ل\"},\n        {\"name\":\"Lithuanian Litas\",\"code\":\"LTL\",\"symbol\":\"Lt\"},\n        {\"name\":\"Macanese Pataca\",\"code\":\"MOP\",\"symbol\":\"$\"},\n        {\"name\":\"Macedonian Denar\",\"code\":\"MKD\",\"symbol\":\"ден\"},\n        {\"name\":\"Malagasy Ariary\",\"code\":\"MGA\",\"symbol\":\"Ar\"},\n        {\"name\":\"Malawian Kwacha\",\"code\":\"MWK\",\"symbol\":\"MK\"},\n        {\"name\":\"Malaysian Ringgit\",\"code\":\"MYR\",\"symbol\":\"RM\"},\n        {\"name\":\"Maldivian Rufiyaa\",\"code\":\"MVR\",\"symbol\":\"Rf\"},\n        {\"name\":\"Mauritanian Ouguiya\",\"code\":\"MRO\",\"symbol\":\"MRU\"},\n        {\"name\":\"Mauritian Rupee\",\"code\":\"MUR\",\"symbol\":\"₨\"},\n        {\"name\":\"Mexican Peso\",\"code\":\"MXN\",\"symbol\":\"$\"},\n        {\"name\":\"Moldovan Leu\",\"code\":\"MDL\",\"symbol\":\"L\"},\n        {\"name\":\"Mongolian Tugrik\",\"code\":\"MNT\",\"symbol\":\"₮\"},\n        {\"name\":\"Moroccan Dirham\",\"code\":\"MAD\",\"symbol\":\"MAD\"},\n        {\"name\":\"Mozambican Metical\",\"code\":\"MZM\",\"symbol\":\"MT\"},\n        {\"name\":\"Myanmar Kyat\",\"code\":\"MMK\",\"symbol\":\"K\"},\n        {\"name\":\"Namibian Dollar\",\"code\":\"NAD\",\"symbol\":\"$\"},\n        {\"name\":\"Nepalese Rupee\",\"code\":\"NPR\",\"symbol\":\"₨\"},\n        {\"name\":\"Netherlands Antillean Guilder\",\"code\":\"ANG\",\"symbol\":\"ƒ\"},\n        {\"name\":\"New Taiwan Dollar\",\"code\":\"TWD\",\"symbol\":\"$\"},\n        {\"name\":\"New Zealand Dollar\",\"code\":\"NZD\",\"symbol\":\"$\"},\n        {\"name\":\"Nicaraguan Córdoba\",\"code\":\"NIO\",\"symbol\":\"C$\"},\n        {\"name\":\"Nigerian Naira\",\"code\":\"NGN\",\"symbol\":\"₦\"},\n        {\"name\":\"North Korean Won\",\"code\":\"KPW\",\"symbol\":\"₩\"},\n        {\"name\":\"Norwegian Krone\",\"code\":\"NOK\",\"symbol\":\"kr\"},\n        {\"name\":\"Omani Rial\",\"code\":\"OMR\",\"symbol\":\".ع.ر\"},\n        {\"name\":\"Pakistani Rupee\",\"code\":\"PKR\",\"symbol\":\"₨\"},\n        {\"name\":\"Panamanian Balboa\",\"code\":\"PAB\",\"symbol\":\"B/.\"},\n        {\"name\":\"Papua New Guinean Kina\",\"code\":\"PGK\",\"symbol\":\"K\"},\n        {\"name\":\"Paraguayan Guarani\",\"code\":\"PYG\",\"symbol\":\"₲\"},\n        {\"name\":\"Peruvian Nuevo Sol\",\"code\":\"PEN\",\"symbol\":\"S/.\"},\n        {\"name\":\"Philippine Peso\",\"code\":\"PHP\",\"symbol\":\"₱\"},\n        {\"name\":\"Polish Zloty\",\"code\":\"PLN\",\"symbol\":\"zł\"},\n        {\"name\":\"Qatari Rial\",\"code\":\"QAR\",\"symbol\":\"ق.ر\"},\n        {\"name\":\"Romanian Leu\",\"code\":\"RON\",\"symbol\":\"lei\"},\n        {\"name\":\"Russian Ruble\",\"code\":\"RUB\",\"symbol\":\"₽\"},\n        {\"name\":\"Rwandan Franc\",\"code\":\"RWF\",\"symbol\":\"FRw\"},\n        {\"name\":\"Salvadoran Colón\",\"code\":\"SVC\",\"symbol\":\"₡\"},\n        {\"name\":\"Samoan Tala\",\"code\":\"WST\",\"symbol\":\"SAT\"},\n        {\"name\":\"Saudi Riyal\",\"code\":\"SAR\",\"symbol\":\"﷼\"},\n        {\"name\":\"Serbian Dinar\",\"code\":\"RSD\",\"symbol\":\"din\"},\n        {\"name\":\"Seychellois Rupee\",\"code\":\"SCR\",\"symbol\":\"SRe\"},\n        {\"name\":\"Sierra Leonean Leone\",\"code\":\"SLL\",\"symbol\":\"Le\"},\n        {\"name\":\"Singapore Dollar\",\"code\":\"SGD\",\"symbol\":\"$\"},\n        {\"name\":\"Slovak Koruna\",\"code\":\"SKK\",\"symbol\":\"Sk\"},\n        {\"name\":\"Solomon Islands Dollar\",\"code\":\"SBD\",\"symbol\":\"Si$\"},\n        {\"name\":\"Somali Shilling\",\"code\":\"SOS\",\"symbol\":\"Sh.so.\"},\n        {\"name\":\"South African Rand\",\"code\":\"ZAR\",\"symbol\":\"R\"},\n        {\"name\":\"South Korean Won\",\"code\":\"KRW\",\"symbol\":\"₩\"},\n        {\"name\":\"Special Drawing Rights\",\"code\":\"XDR\",\"symbol\":\"SDR\"},\n        {\"name\":\"Sri Lankan Rupee\",\"code\":\"LKR\",\"symbol\":\"Rs\"},\n        {\"name\":\"St. Helena Pound\",\"code\":\"SHP\",\"symbol\":\"£\"},\n        {\"name\":\"Sudanese Pound\",\"code\":\"SDG\",\"symbol\":\".س.ج\"},\n        {\"name\":\"Surinamese Dollar\",\"code\":\"SRD\",\"symbol\":\"$\"},\n        {\"name\":\"Swazi Lilangeni\",\"code\":\"SZL\",\"symbol\":\"E\"},\n        {\"name\":\"Swedish Krona\",\"code\":\"SEK\",\"symbol\":\"kr\"},\n        {\"name\":\"Swiss Franc\",\"code\":\"CHF\",\"symbol\":\"CHf\"},\n        {\"name\":\"Syrian Pound\",\"code\":\"SYP\",\"symbol\":\"LS\"},\n        {\"name\":\"São Tomé and Príncipe Dobra\",\"code\":\"STD\",\"symbol\":\"Db\"},\n        {\"name\":\"Tajikistani Somoni\",\"code\":\"TJS\",\"symbol\":\"SM\"},\n        {\"name\":\"Tanzanian Shilling\",\"code\":\"TZS\",\"symbol\":\"TSh\"},\n        {\"name\":\"Thai Baht\",\"code\":\"THB\",\"symbol\":\"฿\"},\n        {\"name\":\"Tongan Pa'anga\",\"code\":\"TOP\",\"symbol\":\"$\"},\n        {\"name\":\"Trinidad & Tobago Dollar\",\"code\":\"TTD\",\"symbol\":\"$\"},\n        {\"name\":\"Tunisian Dinar\",\"code\":\"TND\",\"symbol\":\"ت.د\"},\n        {\"name\":\"Turkish Lira\",\"code\":\"TRY\",\"symbol\":\"₺\"},\n        {\"name\":\"Turkmenistani Manat\",\"code\":\"TMT\",\"symbol\":\"T\"},\n        {\"name\":\"Ugandan Shilling\",\"code\":\"UGX\",\"symbol\":\"USh\"},\n        {\"name\":\"Ukrainian Hryvnia\",\"code\":\"UAH\",\"symbol\":\"₴\"},\n        {\"name\":\"United Arab Emirates Dirham\",\"code\":\"AED\",\"symbol\":\"إ.د\"},\n        {\"name\":\"Uruguayan Peso\",\"code\":\"UYU\",\"symbol\":\"$\"},\n        {\"name\":\"US Dollar\",\"code\":\"USD\",\"symbol\":\"$\"},\n        {\"name\":\"Uzbekistan Som\",\"code\":\"UZS\",\"symbol\":\"лв\"},\n        {\"name\":\"Vanuatu Vatu\",\"code\":\"VUV\",\"symbol\":\"VT\"},\n        {\"name\":\"Venezuelan  Bolívar\",\"code\":\"VEF\",\"symbol\":\"Bs\"},\n        {\"name\":\"Vietnamese Dong\",\"code\":\"VND\",\"symbol\":\"₫\"},\n        {\"name\":\"Yemeni Rial\",\"code\":\"YER\",\"symbol\":\"﷼\"},\n        {\"name\":\"Zambian Kwacha\",\"code\":\"ZMK\",\"symbol\":\"ZK\"}\n    ];\n}","import { link, __attr, __html } from '@kenzap/k-cloud';\n\nexport const HTMLContent = () => {\n \n    return `\n        <div class=\"cat-controls\">\n            <div class=\"tags-holder\">\n                <div class=\"cata-sub-nav head\">\n                    <div class=\"arrow-holder-prev arrow-holder d-none\">\n                        <div class=\"nav-prev arrow\">\n                            <span>&lt;</span>\n                        </div>\n                    </div>\n                    <div class=\"slideset\">\n                        <div class=\"slide\"><a href=\"#\" data-cat=\"${ __attr(\"Rainwater systems\") }\" class=\"cl\">${ __html(\"Rainwater systems\") }</a></div>\n                        <div class=\"slide\"><a href=\"#\" data-cat=\"${ __attr(\"Window sill\") }\" class=\" cl\">${ __html(\"Window sill\") }</a></div>\n                        <div class=\"slide\"><a href=\"#\" data-cat=\"${ __attr(\"Stovepipe cap\") }\" class=\" cl\">${ __html(\"Stovepipe cap\") }</a></div>\n                        <div class=\"slide d-none\"><a href=\"#\" data-cat=\"${ __attr(\"Sheet metal\") }\" class=\" cl\">${ __html(\"Sheet metal\") }</a></div>\n                        <div class=\"slide\"><a href=\"#\" data-cat=\"${ __attr(\"Roofing\") }\" class=\" cl\">${ __html(\"Roofing\") }</a></div>\n                        <div class=\"slide\"><a href=\"#\" data-cat=\"${ __attr(\"Flange\") }\" class=\" cl\">${ __html(\"Flange\") }</a></div>\n                        <div class=\"slide\"><a href=\"#\" data-cat=\"${ __attr(\"Eaves element\") }\" class=\" cl\">${ __html(\"Eaves element\") }</a></div>\n                        <div class=\"slide\"><a href=\"#\" data-cat=\"${ __attr(\"Parapet\") }\" class=\" cl\">${ __html(\"Parapet\") }</a></div>\n                        <div class=\"slide\"><a href=\"#\" data-cat=\"${ __attr(\"Rake edge\") }\" class=\" cl\">${ __html(\"Rake edge\") }</a></div>\n                        <div class=\"slide\"><a href=\"#\" data-cat=\"${ __attr(\"Ridge\") }\" class=\" cl\">${ __html(\"Ridge\") }</a></div>\n                        <div class=\"slide\"><a href=\"#\" data-cat=\"${ __attr(\"Roof hatch\") }\" class=\" cl\">${ __html(\"Roof hatch\") }</a></div>\n                        <div class=\"slide\"><a href=\"#\" data-cat=\"${ __attr(\"Snow barrier system\") }\" class=\" cl\">${ __html(\"Snow barrier system\") }</a></div>\n                        <div class=\"slide\"><a href=\"#\" data-cat=\"${ __attr(\"Ventilation\") }\" class=\" cl\">${ __html(\"Ventilation\") }</a></div>\n                        <div class=\"slide\"><a href=\"#\" data-cat=\"${ __attr(\"Roof valley\") }\" class=\" cl\">${ __html(\"Roof valley\") }</a></div>\n                        <div class=\"slide\"><a href=\"#\" data-cat=\"${ __attr(\"Drip edge\") }\" class=\" cl\">${ __html(\"Drip edge\") }</a></div>\n                        <div class=\"slide\"><a href=\"#\" data-cat=\"${ __attr(\"Other Designs\") }\" class=\" cl d-none\">${ __html(\"Other Designs\") }</a></div>\n                    </div>\n                    <div class=\"arrow-holder-next arrow-holder\" style=\"display: none;\">\n                        <div class=\"nav-next arrow\">\n                            <span>&gt;</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"d-flex flex-nowrap bd-highlight align-items-center\">\n            <input id=\"search\" autocomplete=\"off\" class=\"form-control my-3 border-0\" type=\"text\" placeholder=\"${ __attr(\"Search..\") }\" style=\"max-width:200px;\" aria-label=\"default input example\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#212529\" class=\"clear-search bi bi-x-circle po text-start ms-3 d-none\" data-i=\"0\" viewBox=\"0 0 16 16\">\n            <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"></path>\n            <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"></path>\n            </svg>\n        </div>\n\n        <h3 class=\"search-title mb-4 d-none\"></h3>\n\n        <div class=\"contain\"> \n            <div class=\"search-results row row-cols-1 row-cols-md-2 row-cols-lg-3 g-2 g-lg-3 d-none\">\n\n\n            </div>\n        </div>\n\n        <div class=\"accordion\" id=\"accordionPanelsStayOpenExample\">\n\n            <div class=\"accordion-item border-0\">\n            <h2 class=\"accordion-header\" id=\"acc-heading-2\">\n                <button class=\"accordion-button first collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#acc-2\" aria-expanded=\"false\" aria-controls=\"panelsStayOpen-collapseTwo\" data-cats=\"${ __attr(\"Stovepipe cap\") }|${ __attr(\"Drip edge\") }|${ __attr(\"Flange\") }|${ __attr(\"Rake edge\") }|${ __attr(\"Ridge\") }|${ __attr(\"Roof hatch\") }|${ __attr(\"Roofing panel\") }|${ __attr(\"Ventilation Element\") }|${ __attr(\"Snow Barrier System\") }\">\n                ${ __html('ROOFING ELEMENTS') }\n                </button>\n            </h2>\n            <div id=\"acc-2\" class=\"accordion-collapse collapse\" aria-labelledby=\"acc-heading-2\">\n                <div class=\"accordion-body p-0 pt-4 bg-light row row-cols-1 row-cols-md-2 row-cols-lg-3 g-2 g-lg-3\" data-cats=\"Stovepipe cap|Drip edge|Flange|Rake edge|Ridge|Roof hatch|Roofing panel|Ventilation Element|Snow Barrier System\">\n\n\n                </div>\n            </div>\n            </div>\n\n            <div class=\"accordion-item border-0\">\n            <h2 class=\"accordion-header\" id=\"acc-heading-3\">\n                <button class=\"accordion-button  collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#acc-3\" aria-expanded=\"false\" aria-controls=\"panelsStayOpen-collapseThree\" data-cats=\"${ __attr(\"Window sill\") }|${ __attr(\"Metal cap\") }|${ __attr(\"Parapet\") }\">\n                ${ __html('FOR FACADES') }\n                </button>\n            </h2>\n            <div id=\"acc-3\" class=\"accordion-collapse collapse\" aria-labelledby=\"acc-heading-3\">\n                <div class=\"accordion-body p-0 pt-4 bg-light row row-cols-1 row-cols-md-2 row-cols-lg-3 g-2 g-lg-3\" >\n\n                \n                </div>\n            </div>\n            </div>\n\n            <div class=\"accordion-item border-0\">\n            <h2 class=\"accordion-header\" id=\"acc-heading-4\">\n                <button class=\"accordion-button  collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#acc-4\" aria-expanded=\"false\" aria-controls=\"panelsStayOpen-collapseThree\" data-cats=\"${ __attr(\"Rainwater systems\") }\">\n                ${ __html('RAINWATER SYSTEMS') }\n                </button>\n            </h2>\n            <div id=\"acc-4\" class=\"accordion-collapse collapse\" aria-labelledby=\"acc-headin4\">\n                <div class=\"accordion-body p-0 pt-4 bg-light row row-cols-1 row-cols-md-2 row-cols-lg-3 g-2 g-lg-3\" data-cats=\"Rainwater systems\">\n\n                \n                </div>\n            </div>\n            </div>\n\n            <div class=\"accordion-item border-0 d-none\">\n            <h2 class=\"accordion-header\" id=\"acc-heading-5\">\n                <button class=\"accordion-button  collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#acc-5\" aria-expanded=\"false\" aria-controls=\"panelsStayOpen-collapseThree\" data-cats=\"${ __attr(\"Sheet metal\") }\">\n                ${ __html('SHEET METAL') }\n                </button>\n            </h2>\n            <div id=\"acc-5\" class=\"accordion-collapse collapse\" aria-labelledby=\"acc-heading-5\">\n                <div class=\"accordion-body p-0 pt-4 bg-light row row-cols-1 row-cols-md-2 row-cols-lg-3 g-2 g-lg-3\" data-cats=\"Sheet metal\">\n\n        \n                </div>\n            </div>\n            </div>\n\n            <div class=\"accordion-item border-0 d-none\">\n            <h2 class=\"accordion-header\" id=\"acc-heading-5\">\n                <button class=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#acc-5\" aria-expanded=\"false\" aria-controls=\"panelsStayOpen-collapseThree\">\n                ${ __html('INSTRUMENTS') }\n                </button>\n            </h2>\n            <div id=\"acc-5\" class=\"accordion-collapse collapse\" aria-labelledby=\"acc-heading-5\">\n                <div class=\"accordion-body p-0 pt-4 bg-light\">\n                <strong>This is the third item's accordion body.</strong> It is hidden by default, until the collapse plugin adds the appropriate classes that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. It's also worth noting that just about any HTML can go within the <code>.accordion-body p-0 pt-4 bg-light</code>, though the transition does limit overflow.\n                </div>\n            </div>\n            </div>\n        </div>\n    `;\n}","// Utility function\nexport function Util () {};\n\n/* \n\tclass manipulation functions\n*/\nUtil.hasClass = function(el, className) {\n\tif (el.classList) return el.classList.contains(className);\n\telse return !!el.className.match(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'));\n};\n\nUtil.addClass = function(el, className) {\n\tvar classList = className.split(' ');\n \tif (el.classList) el.classList.add(classList[0]);\n \telse if (!Util.hasClass(el, classList[0])) el.className += \" \" + classList[0];\n \tif (classList.length > 1) Util.addClass(el, classList.slice(1).join(' '));\n};\n\nUtil.removeClass = function(el, className) {\n\tvar classList = className.split(' ');\n\tif (el.classList) el.classList.remove(classList[0]);\t\n\telse if(Util.hasClass(el, classList[0])) {\n\t\tvar reg = new RegExp('(\\\\s|^)' + classList[0] + '(\\\\s|$)');\n\t\tel.className=el.className.replace(reg, ' ');\n\t}\n\tif (classList.length > 1) Util.removeClass(el, classList.slice(1).join(' '));\n};\n\nUtil.toggleClass = function(el, className, bool) {\n\tif(bool) Util.addClass(el, className);\n\telse Util.removeClass(el, className);\n};\n\nUtil.setAttributes = function(el, attrs) {\n  for(var key in attrs) {\n    el.setAttribute(key, attrs[key]);\n  }\n};\n\n/* \n  DOM manipulation\n*/\nUtil.getChildrenByClassName = function(el, className) {\n  var children = el.children,\n    childrenByClass = [];\n  for (var i = 0; i < el.children.length; i++) {\n    if (Util.hasClass(el.children[i], className)) childrenByClass.push(el.children[i]);\n  }\n  return childrenByClass;\n};\n\n/* \n\tAnimate height of an element\n*/\nUtil.setHeight = function(start, to, element, duration, cb) {\n\tvar change = to - start,\n\t    currentTime = null;\n\n  var animateHeight = function(timestamp){  \n    if (!currentTime) currentTime = timestamp;         \n    var progress = timestamp - currentTime;\n    var val = parseInt((progress/duration)*change + start);\n    // console.log(val);\n    element.setAttribute(\"style\", \"height:\"+val+\"px;\");\n    if(progress < duration) {\n        window.requestAnimationFrame(animateHeight);\n    } else {\n    \tcb();\n    }\n  };\n  \n  //set the height of the element before starting animation -> fix bug on Safari\n  element.setAttribute(\"style\", \"height:\"+start+\"px;\");\n  window.requestAnimationFrame(animateHeight);\n};\n\n/* \n\tSmooth Scroll\n*/\n\nUtil.scrollTo = function(final, duration, cb) {\n  var start = window.scrollY || document.documentElement.scrollTop,\n      currentTime = null;\n      \n  var animateScroll = function(timestamp){\n  \tif (!currentTime) currentTime = timestamp;        \n    var progress = timestamp - currentTime;\n    if(progress > duration) progress = duration;\n    var val = Math.easeInOutQuad(progress, start, final-start, duration);\n    window.scrollTo(0, val);\n    if(progress < duration) {\n        window.requestAnimationFrame(animateScroll);\n    } else {\n      cb && cb();\n    }\n  };\n\n  window.requestAnimationFrame(animateScroll);\n};\n\n/* \n  Focus utility classes\n*/\n\n//Move focus to an element\nUtil.moveFocus = function (element) {\n  if( !element ) element = document.getElementsByTagName(\"body\")[0];\n  element.focus();\n  if (document.activeElement !== element) {\n    element.setAttribute('tabindex','-1');\n    element.focus();\n  }\n};\n\n/* \n  Misc\n*/\n\nUtil.getIndexInArray = function(array, el) {\n  return Array.prototype.indexOf.call(array, el);\n};\n\nUtil.cssSupports = function(property, value) {\n  if('CSS' in window) {\n    return CSS.supports(property, value);\n  } else {\n    var jsProperty = property.replace(/-([a-z])/g, function (g) { return g[1].toUpperCase();});\n    return jsProperty in document.body.style;\n  }\n};\n\n/* \n\tPolyfills\n*/\n//Closest() method\nif (!Element.prototype.matches) {\n\tElement.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n}\n\nif (!Element.prototype.closest) {\n\tElement.prototype.closest = function(s) {\n\t\tvar el = this;\n\t\tif (!document.documentElement.contains(el)) return null;\n\t\tdo {\n\t\t\tif (el.matches(s)) return el;\n\t\t\tel = el.parentElement || el.parentNode;\n\t\t} while (el !== null && el.nodeType === 1); \n\t\treturn null;\n\t};\n}\n\n//Custom Event() constructor\nif ( typeof window.CustomEvent !== \"function\" ) {\n\n  function CustomEvent ( event, params ) {\n    params = params || { bubbles: false, cancelable: false, detail: undefined };\n    var evt = document.createEvent( 'CustomEvent' );\n    evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n    return evt;\n   }\n\n  CustomEvent.prototype = window.Event.prototype;\n\n  window.CustomEvent = CustomEvent;\n}\n\n/* \n\tAnimation curves\n*/\nMath.easeInOutQuad = function (t, b, c, d) {\n\tt /= d/2;\n\tif (t < 1) return c/2*t*t + b;\n\tt--;\n\treturn -c/2 * (t*(t-2) - 1) + b;\n};","// https://codyhouse.co/demo/add-to-cart-interaction/index.html\nimport { onClick, __, __html, __attr } from '@kenzap/k-cloud';\nimport { Util } from \"../_/_cart_util.js\"\nimport { CDN, spaceID, priceFormat, onlyNumbers, mt, API_KEY, randomString } from \"../_/_helpers.js\"\n\nexport class Cart{\n    \n    constructor(_this) {\n \n        this._this = _this;\n\n        let cartStatic = localStorage.getItem('sk-design-cart');\n        if(!cartStatic) cartStatic = '{}';\n\n        this.cart = JSON.parse(cartStatic);\n        if(!this.cart) this.cart = {};\n        if(!this.cart.items) this.cart.items = [];\n        if(!this.cart.price) this.cart.price = {};\n        if(!this.cart.idd) this.cart.idd = randomString(8)+Math.floor(Date.now());\n\n        this.renderCartHTML();\n\n        this.cart.html = document.getElementsByClassName('js-cd-cart');\n        \n        if(this.cart.html.length > 0) {\n                \n            this.cart.cartAddBtns = document.getElementsByClassName('js-cd-add-to-cart');\n            this.cart.cartBody = this.cart.html[0].getElementsByClassName('cd-cart__body')[0],\n            this.cart.cartList = this.cart.cartBody.getElementsByTagName('ul')[0],\n            this.cart.cartListItems = this.cart.cartList.getElementsByClassName('cd-cart__product'),\n            this.cart.cartTotal = this.cart.html[0].getElementsByClassName('cart-checkout')[0].getElementsByTagName('span')[0],\n            this.cart.cartCount = this.cart.html[0].getElementsByClassName('cd-cart__count')[0],\n            this.cart.cartCountItems = this.cart.cartCount.getElementsByTagName('li'),\n            this.cart.cartUndo = this.cart.html[0].getElementsByClassName('cd-cart__undo')[0],\n            this.cart.productId = 0, //this is a placeholder -> use your real product ids instead\n            this.cart.cartTimeoutId = false,\n            this.cart.animatingQuantity = false;\n            this.initListeners();\n        }\n\n        this.refreshCartHTML();\n\n        this.cartButtonVissible();\n\n        this.saveCart();\n    }\n\n    /**\n     * Init cart listeners\n     * \n     * @returns {Boolean} - true\n     */\n    initListeners(){\n\n        let _this = this;\n\n        // add products to cart\n        for(var i = 0; i < this.cart.cartAddBtns.length; i++) {(function(i){\n\n            _this.cart.cartAddBtns[i].addEventListener('click', _this.addToCart);\n        })(i);}\n\n        // open/close cart\n        this.cart.html[0].getElementsByClassName('cd-cart__trigger')[0].addEventListener('click', function(e){\n\n            e.preventDefault();\n            _this.toggleCart();\n        });\n\n        // open checkout modal\n        onClick(\".cart-checkout\", (e) => {\n\n            e.preventDefault();\n\n            if(this.cart.price.total == 0) { alert( __html(\"Cart is empty\") ); return; }\n\n            _this.toggleCart();\n\n            let modal = document.querySelector(\".modal-item\");\n            let modalCont = new bootstrap.Modal(modal);\n            modalCont.show();\n\n            document.querySelector(\".modal-item .modal-title\").innerHTML = __html(\"Checkout\");\n            document.querySelector(\".modal .btn-primary\").innerHTML = __html(\"Confirm checkout\");\n            document.querySelector(\".modal .btn-primary\").classList.add('btn-danger');\n            document.querySelector(\".modal .btn-primary\").classList.remove('d-none');\n\n            let time = new Date((new Date().setHours(new Date().getHours() - (new Date().getTimezoneOffset() / 60)))).toISOString();\n\n            // metrics\n            gtag('event', 'Product', {'event_category': 'pre_checkout', 'page': 'feed', 'source': 'cart', 'time': time, 'idd': localStorage.idd});\n\n            let html = `\n            <div class=\"form-cont\">\n\n                <div class=\"btn-group mb-5\" role=\"group\" aria-label=\"Basic radio toggle button group\">\n                    <input type=\"radio\" class=\"btn-check\" name=\"entity-type\" id=\"btn-individual\" autocomplete=\"off\" >\n                    <label class=\"btn btn-outline-primary\" for=\"btn-individual\">${ __html(\"Individual\") }</label>\n                    <input type=\"radio\" class=\"btn-check\" name=\"entity-type\" id=\"btn-company\" autocomplete=\"off\" checked>\n                    <label class=\"btn btn-outline-primary\" for=\"btn-company\">${ __html(\"Company\") }</label>\n                </div>\n\n                <div class=\"form-checkout\">\n\n                    <div class=\"row\">\n                        <div class=\"col-lg-6 reg_num_cont\">\n                            <div class=\"form-group row mb-3 mt-1\">\n                                <label class=\"col-sm-3 col-form-label\">${ __html(\"Reg. Nr.\") }</label>\n                                <div class=\"col-sm-9\">\n                                    <input type=\"text\" class=\"form-control text reg_num\" placeholder=\"40008877333\" value=\"${ localStorage.getItem(\"checkout_reg_num\") ? localStorage.getItem(\"checkout_reg_num\") : \"\" }\">\n                                    <div class=\"invalid-feedback reg_num_notice\"></div>\n                                    <p class=\"form-text\">${ __html(\"Company registration number, without LV.\") }</p>\n                                </div> \n                            </div>\n                        </div>\n\n                        <div class=\"col-lg-6 full_name_cont d-none\">\n                            <div class=\"form-group row mb-3 mt-1\">\n                                <label class=\"col-sm-3 col-form-label\">${ __html(\"Full Name\") }</label>\n                                <div class=\"col-sm-9\">\n                                    <div class=\"row\">\n                                        <div class=\"col-sm-6\">\n                                            <input type=\"text\" class=\"form-control text f_name\" placeholder=\"Alex\" value=\"${ localStorage.getItem(\"checkout_f_name\") ? localStorage.getItem(\"checkout_f_name\") : \"\" }\">\n                                            <div class=\"invalid-feedback f_name_notice\"></div>\n                                            <p class=\"form-text\">${ __html(\"Your name\") }</p>\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            <input type=\"text\" class=\"form-control text l_name\" placeholder=\"Ziliņš\" value=\"${ localStorage.getItem(\"checkout_l_name\") ? localStorage.getItem(\"checkout_l_name\") : \"\" }\">\n                                            <div class=\"invalid-feedback l_name_notice\"></div>\n                                            <p class=\"form-text\">${ __html(\"Your surname\") }</p>\n                                        </div>\n                                    </div>\n                                </div> \n                            </div>\n                        </div>\n\n                        <div class=\"col-lg-6\">\n                            <div class=\"form-group row mb-3 mt-1\">\n                                <label class=\"col-sm-3 col-form-label\">${ __html(\"IBAN\") }</label>\n                                <div class=\"col-sm-9\">\n                                    <input type=\"text\" class=\"form-control iban\" placeholder=\"LV14HABA012345678910\" value=\"${ localStorage.getItem(\"checkout_iban\") ? localStorage.getItem(\"checkout_iban\") : \"\" }\">\n                                    <div class=\"invalid-feedback iban_notice\"></div>\n                                    <p class=\"form-text\">${ __html(\"Your bank account, ex.: LV14HABA012345678910\") }</p>\n                                </div> \n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div class=\"row\">\n                        <div class=\"col-lg-6\">\n                            <div class=\"form-group row mb-3 mt-1\">\n                                <label class=\"col-sm-3 col-form-label\">${ __html(\"Email\") }</label>\n                                <div class=\"col-sm-9\">\n                                    <input type=\"email\" class=\"form-control email\" placeholder=\"email@example.com\" value=\"${ localStorage.getItem(\"checkout_email\") ? localStorage.getItem(\"checkout_email\") : \"\" }\">\n                                    <div class=\"invalid-feedback email_notice\"></div>\n                                    <p class=\"form-text\">${ __html(\"Your email address.\") }</p>\n                                </div> \n                            </div>\n                        </div>\n            \n                        <div class=\"col-lg-6\">\n                            <div class=\"form-group row mb-3 mt-1\">\n                                <label class=\"col-sm-3 col-form-label\">${ __html(\"Phone\") }</label>\n                                <div class=\"col-sm-9\">\n                                    <input type=\"text\" class=\"form-control phone\" placeholder=\"+37126443313\" value=\"${ localStorage.getItem(\"checkout_phone\") ? localStorage.getItem(\"checkout_phone\") : \"\" }\">\n                                    <div class=\"invalid-feedback phone_notice\"></div>\n                                    <p class=\"form-text\">${ __html(\"Phone number.\") }</p>\n                                </div> \n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div class=\"row\">\n                        <div class=\"col-lg-6\">\n                            <div class=\"form-group row mb-3 mt-1\">\n                                <label class=\"col-sm-3 col-form-label\">${ __html(\"Notes\") }</label>\n                                <div class=\"col-sm-9\">\n                                    <textarea id=\"coupon_list\" class=\"form-control inp notes\" name=\"coupon_list\" rows=\"2\" data-type=\"text\" style=\"font-size:13px;font-family: monospace;\"></textarea>\n                                    <p class=\"form-text\">Notes to order.</p>\n                                </div> \n                            </div>\n                        </div>\n                        <div class=\"col-lg-6\">\n                            <div class=\"form-group row mb-3 mt-1\">\n                                <label class=\"col-sm-3 col-form-label\">${ __html(\"Pick up\") }</label>\n                                <div class=\"col-sm-9\">\n                                    <iframe src=\"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2174.979245108271!2d24.033549415978662!3d56.96628800521531!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x46eec554018684c3%3A0x67f5c808aea5ea81!2sSk%C4%81rda%20Nams%2C%20SIA!5e0!3m2!1sen!2slv!4v1662126718651!5m2!1sen!2slv\" width=\"100%\" height=\"225\" style=\"border:0;\" allowfullscreen=\"\" loading=\"lazy\" referrerpolicy=\"no-referrer-when-downgrade\"></iframe>\n                                    <p class=\"form-text\">${ __html(\"Order available for self-pickup at Mellužu iela 13-6, LV-1067, Rīga. Delivery options are currently not provided.\") }</p>\n                                </div> \n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"row mb-3\">\n                        <div class=\"col-lg-6\">\n                        \n                        </div>\n                        <div class=\"col-lg-6\">\n                            <h3 class=\"mb-3\">${ __html(\"Totals\") }</h3>\n                            <div class=\"form-group row mb-2 mt-1 total_cont\">\n                                <label class=\"col-7 col-form-label\">${ __html(\"Total\") }</label>\n                                <div class=\"col-5 col-form-label text-end\">\n                                    \n                                </div> \n                            </div>\n                            <div class=\"form-group row mb-2 mt-1 vat_cont d-none\">\n                                <label class=\"col-7 col-form-label\">${ __html(\"VAT 21%\") }</label>\n                                <div class=\"col-5 col-form-label text-end\">\n                                    \n                                </div> \n                            </div>\n                            <div class=\"form-group row mb-2 mt-1 vat_cont_0 d-none\">\n                                <label class=\"col-7 col-form-label\">${ __html(\"VAT (reverse payment of taxes article 143.4)\") }</label>\n                                <div class=\"col-5 col-form-label text-end\">\n                                    0.00 €\n                                </div> \n                                <div class=\"col-12 form-text\">${ __html('*A detailed breakdown is available in the final invoice.') }</div>\n                            </div>\n                            <div class=\"form-group row mb-2 mt-1 d-none\">\n                                <label class=\"col-7 col-form-label\">${ __html(\"Discount 10%\") }</label>\n                                <div class=\"col-5 col-form-label text-end\">\n                                    5.00 €\n                                </div> \n                            </div>\n                            <hr>\n                            <div class=\"form-group row mb-2 mt-1 fw-bolder grand_total_cont\">\n                                <label class=\"col-7 col-form-label fs-5\">${ __html(\"Grand total\") }</label>\n                                <div class=\"col-5 col-form-label text-end fs-5\">\n                                    \n                                </div> \n                            </div>\n                        </div>                \n                    </div>\n\n                    <div class=\"row\">\n                        <div class=\"col-lg-6\">\n                        \n                        </div>\n                        <div class=\"col-lg-6\">\n                            <div class=\"form-group row mb-3 mt-1\">\n                   \n                                <div class=\"col-sm-12\">\n                                    <div class=\"form-check\">\n                                        <input id=\"terms\" class=\"form-check-input inp\" name=\"terms\" type=\"checkbox\" value=\"1\" data-type=\"checkbox\">\n                                        <label class=\"form-check-label\" for=\"terms\">\n                                        ${ __html(\"Terms of service\") }\n                                        </label>\n                                    </div>\n                                    <p class=\"form-text\">${ __html(\"I acknowledge that Skarda Nams SIA uses cookies in order to provide best user experience. You also agree to Skarda Nams SIA Terms of Service, Privacy Policy.\") }</p>\n                                </div>\n                                \n                                <div class=\"col-sm-12\">\n                                    <div class=\"form-check\">\n                                        <input id=\"personal_data\" class=\"form-check-input inp\" name=\"personal_data\" type=\"checkbox\" value=\"1\" data-type=\"checkbox\">\n                                        <label class=\"form-check-label\" for=\"personal_data\">\n                                        ${ __html(\"Personal data processing\") }\n                                        </label>\n                                    </div>\n                                    <p class=\"form-text\">${ __html(\"I acknowledge that Skarda Nams SIA stores my personal data for order processing and accounting purposes. More information on https://www.skardanams.lv/privatuma-politika/.\") }</p>\n                                </div> \n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div class=\"row d-none\">\n                        <div class=\"col-lg-12\">\n\n                            <label class=\"col-sm-3 col-form-label\">${ __html(\"Notes\") }</label>\n                            <div class=\"col-sm-9 text-muted\">\n                                <input id=\"terms\" class=\"form-check-input inp terms\" name=\"terms\" type=\"checkbox\" value=\"1\" data-type=\"checkbox\">\n                                I acknowledge that Kenzap uses cookies in order to provide best user experience. You also agree to Kenzap Terms of Service, Privacy Policy.\n                            </div>\n                        </div>\n                    </div>\n \n                </div>\n\n            </div>`;\n\n            document.querySelector(\".modal-body\").innerHTML = html;\n\n            // prevents window closure on androids\n            if(window.location.hash != \"#checkout\") history.pushState({pageID: 'design'}, 'Design', window.location.pathname + window.location.search + \"#checkout\");\n\n            // android back pressed\n            setTimeout(() => {\n\n                window.addEventListener(\"hashchange\", function(e) {\n\n                    if(document.querySelector('body').classList.contains('modal-open')){\n        \n                        console.log(\"closing\");\n\n                        e.preventDefault();\n        \n                        if(modalCont) modalCont.hide();\n                        // productModal._this.state.modal.cont.hide();\n                        // this.closeModal();\n        \n                        return false;\n                    }\n                });\n                \n            }, 500);\n            \n            // checkout form listeners\n            onClick(\"#btn-individual\", (e) => {\n\n                document.querySelector(\".reg_num_cont\").classList.add(\"d-none\");\n                document.querySelector(\".full_name_cont\").classList.remove(\"d-none\");\n                // document.querySelector(\".vat_cont\").classList.remove(\"d-none\");\n\n                this.refreshCartCountAndTotals();\n            });\n\n            // checkout form listeners\n            onClick(\"#btn-company\", (e) => {\n\n                document.querySelector(\".reg_num_cont\").classList.remove(\"d-none\");\n                document.querySelector(\".full_name_cont\").classList.add(\"d-none\");\n                // document.querySelector(\".vat_cont\").classList.add(\"d-none\");\n\n                this.refreshCartCountAndTotals();\n            });\n\n            // onlyNumbers\n            onlyNumbers(\".reg_num\", [8]);\n\n            // confirm checkout listener\n            this._this.listeners.modalSuccessBtnFunc = (e) => {\n\n                e.preventDefault();\n\n                let obj = {};\n\n                // reset previous input fields warnings\n                let allow = true;\n                //  modal.querySelector(\".full_name\").setCustomValidity(\"\"); modal.querySelector(\".full_name_notice\").innerHTML = \"\";\n                modal.querySelector(\".f_name\").setCustomValidity(\"\"); modal.querySelector(\".f_name_notice\").innerHTML = \"\";\n                modal.querySelector(\".l_name\").setCustomValidity(\"\"); modal.querySelector(\".l_name_notice\").innerHTML = \"\";\n                modal.querySelector(\".reg_num\").setCustomValidity(\"\"); modal.querySelector(\".reg_num_notice\").innerHTML = \"\";\n                modal.querySelector(\".email\").setCustomValidity(\"\"); modal.querySelector(\".email_notice\").innerHTML = \"\";\n                modal.querySelector(\".iban\").setCustomValidity(\"\"); modal.querySelector(\".iban_notice\").innerHTML = \"\";\n                modal.querySelector(\".phone\").setCustomValidity(\"\"); modal.querySelector(\".phone_notice\").innerHTML = \"\";\n                modal.querySelector(\"#terms\").setCustomValidity(\"\"); // modal.querySelector(\"#terms\").checked = false;\n                modal.querySelector(\"#personal_data\").setCustomValidity(\"\"); // modal.querySelector(\"#personal_data\").innerHTML = \"\";\n\n                // validate checkout fields\n                if(modal.querySelector('#btn-individual').checked){\n\n                    // if(modal.querySelector('.full_name').value.length < 2){ allow = false; modal.querySelector(\".full_name\").setCustomValidity( __html(\"Full name too short\") ); }\n                    // modal.querySelector(\".full_name\").parentElement.classList.add('was-validated');\n\n                    if(modal.querySelector('.f_name').value.length < 2){ allow = false; modal.querySelector(\".f_name\").setCustomValidity( __html(\"Name too short\") ); }\n                    modal.querySelector(\".f_name\").parentElement.classList.add('was-validated');\n\n                    if(modal.querySelector('.l_name').value.length < 2){ allow = false; modal.querySelector(\".l_name\").setCustomValidity( __html(\"Surname too short\") ); }\n                    modal.querySelector(\".l_name\").parentElement.classList.add('was-validated');\n\n                }else{\n                    \n                    if(modal.querySelector('.reg_num').value.trim().length < 11){ allow = false; modal.querySelector(\".reg_num\").setCustomValidity( \"error\" ); modal.querySelector(\".reg_num_notice\").innerHTML = __html(\"Registration number too short\"); }\n                    if(modal.querySelector('.reg_num').value.trim().length > 12){ allow = false; modal.querySelector(\".reg_num\").setCustomValidity( \"error\" ); modal.querySelector(\".reg_num_notice\").innerHTML = __html(\"Registration number too long\"); }\n                    modal.querySelector(\".reg_num\").parentElement.classList.add('was-validated');\n                }\n\n                // if(document.querySelector(\".email\").innerHTML.trim().length < 4 ){ allow = false; document.querySelector(\".email\").setCustomValidity( __html(\"Wrong email address format\") ); }\n                if(modal.querySelector(\".email\").value.trim().length < 4 || modal.querySelector(\".email\").value.trim().length > 50){ allow = false; modal.querySelector(\".email\").setCustomValidity(\"error\"); modal.querySelector(\".email_notice\").innerHTML = __html(\"Wrong email address format\"); }\n                if(modal.querySelector(\".iban\").value.trim().length < 15 || modal.querySelector(\".iban\").value.trim().length > 33){ allow = false; modal.querySelector(\".iban\").setCustomValidity(\"error\"); modal.querySelector(\".iban_notice\").innerHTML = __html(\"Wrong IBAN format\"); }\n                if(modal.querySelector(\".phone\").value.trim().length < 4){ allow = false; modal.querySelector(\".phone\").setCustomValidity( \"error\" ); modal.querySelector(\".phone_notice\").innerHTML = __html(\"Wrong phone format\");  }\n\n                // was validated\n                modal.querySelector(\".email\").parentElement.classList.add('was-validated');\n                modal.querySelector(\".iban\").parentElement.classList.add('was-validated');\n                modal.querySelector(\".phone\").parentElement.classList.add('was-validated');  \n\n                // check if person agrees to terms\n                if(!modal.querySelector(\"#terms\").checked){\n\n                    modal.querySelector(\"#terms\").setCustomValidity(\"error\"); \n                    alert( __html('Please agree to Terms of service to continue') );\n                    return;\n                }\n                modal.querySelector(\"#terms\").parentElement.classList.add('was-validated'); \n\n                if(!modal.querySelector(\"#personal_data\").checked){\n\n                    modal.querySelector(\"#personal_data\").setCustomValidity(\"error\"); \n                    alert( __html('Please agree to Data processing to continue') );\n                    return;\n                }\n                modal.querySelector(\"#personal_data\").parentElement.classList.add('was-validated'); \n\n                // block ui\n                if(modal.querySelector(\".btn-primary\").dataset.loading === 'true') return;\n\n                // show loading button\n                modal.querySelector(\".btn-primary\").dataset.loading = true;\n                modal.querySelector(\".btn-primary\").innerHTML = '<span class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>' + __html('Loading..');\n                \n                // structure order object\n                obj.id = 0;\n                obj.idd = localStorage.idd;\n                obj.sid = spaceID();\n                obj.kid = 0;\n                obj.status = \"new\";\n                obj.price = this.cart.price;\n\n                if(modal.querySelector('#btn-individual').checked){\n\n                    // obj.from = modal.querySelector('.full_name').value.trim();\n                    // obj.name = modal.querySelector('.full_name').value.trim();\n                    obj.from = modal.querySelector('.f_name').value.trim() + \" \" + modal.querySelector('.l_name').value.trim();\n                    obj.name = obj.from;\n                    obj.fname = modal.querySelector('.f_name').value.trim();\n                    obj.lname = modal.querySelector('.l_name').value.trim();\n                    obj.entity = \"individual\";\n\n                    obj.price.tax_calc = true;\n                    obj.price.tax_percent = 21;\n                    obj.price.tax_total = this.cart.price.total * 0.21;   \n                    obj.price.total = this.cart.price.total;\n                    obj.price.grand_total = this.cart.price.total + obj.price.tax_total;\n                }else{\n\n                    obj.from = modal.querySelector('.reg_num').value.trim();\n                    obj.name = \"\";\n                    obj.fname = \"\";\n                    obj.lname = \"\";\n                    obj.entity = \"company\";\n\n                    obj.price.tax_calc = false;\n                    obj.price.tax_percent = 0;\n                    obj.price.tax_total = 0;  \n                    obj.price.total = this.cart.price.total;\n                    obj.price.grand_total = this.cart.price.grand_total;\n                }\n\n                obj.email = modal.querySelector('.email').value.trim();\n                obj.phone = modal.querySelector('.phone').value.trim();\n                obj.notes = modal.querySelector('.notes').value;\n                obj.iban = modal.querySelector('.iban').value.trim();\n                obj.items = this.cart.items;\n                obj.total_all = obj.price.grand_total;\n\n                // struct notifications\n                if(obj.notes != \"sk test\") obj.notify = {\n                    \"admin\": {\n                        \"subject\": __(\"📢 New order received\"),\n                        \"msg\": __(\"Hey admin, <br><br>New order %1$https://skarda.design/?order={{order__id}}%2$#{{order_id}}%3$ received. Check your Ecommerce dashboard for more details.\", \"<a href='\", \"' >\", \"</a>\"),\n                    },\n                    // \"client\": {\n                    //     \"subject\": __(\"📢 New order notification\"),\n                    //     \"msg\": __(\"Paldies, <br><br>Your order %1$https://skarda.design/?order={{order__id}}%2$#{{order_id}}%3$ is successfully received.\", '<a href=\"', '\" >', '</a>'),\n                    // }\n                };\n\n                // console.log(obj);\n                // return false;\n\n                // stop here and warn user\n                if(!allow){\n\n                    modal.scrollTo({ top: 0, behavior: 'smooth' });\n\n                    // warning\n                    alert( __html(\"Please make sure to enter all fields correctly\") );\n                    \n                    // show loading button\n                    modal.querySelector(\".btn-primary\").dataset.loading = false;\n                    modal.querySelector(\".btn-primary\").innerHTML = __html('Confirm checkout');\n                \n                    return;\n                }\n\n                // cache for future\n                localStorage.setItem(\"checkout_email\", modal.querySelector('.email').value);\n                localStorage.setItem(\"checkout_phone\", modal.querySelector('.phone').value);\n                localStorage.setItem(\"checkout_iban\", modal.querySelector('.iban').value);\n                // localStorage.setItem(\"checkout_full_name\", modal.querySelector('.full_name').value);\n                localStorage.setItem(\"checkout_f_name\", modal.querySelector('.f_name').value);\n                localStorage.setItem(\"checkout_l_name\", modal.querySelector('.l_name').value);\n                localStorage.setItem(\"checkout_reg_num\", modal.querySelector('.reg_num').value);\n\n                this.saveOrder(obj);\n            };\n\n            this.refreshCartCountAndTotals();\n        });\n\n        // update product quantity inside cart\n        this.cart.html[0].addEventListener('change', function(e) {\n            \n            if(e.target.tagName.toLowerCase() == 'select') _this.quickUpdateCart();\n        });\n\n        // reinsert product deleted from the cart\n        this.cart.cartUndo.addEventListener('click', function(e) {\n\n            if(e.target.tagName.toLowerCase() == 'a') {\n\n                e.preventDefault();\n                if(cartTimeoutId) clearInterval(cartTimeoutId);\n\n                // reinsert deleted product\n                let deletedProduct = this.cart.cartList.getElementsByClassName('cd-cart__product--deleted')[0];\n                Util.addClass(deletedProduct, 'cd-cart__product--undo');\n                deletedProduct.addEventListener('animationend', function cb(){\n\n                    deletedProduct.removeEventListener('animationend', cb);\n                    Util.removeClass(deletedProduct, 'cd-cart__product--deleted cd-cart__product--undo');\n                    deletedProduct.removeAttribute('style');\n                    quickUpdateCart();\n                });\n                Util.removeClass(this.cart.cartUndo, 'cd-cart__undo--visible');\n            }\n        });\n        \n        return  true;\n    }\n\n    /**\n     * Send new order to the database\n     * \n     * @returns {Object} - order object\n     */\n    saveOrder(order){\n\n        let _this = this;\n\n        // adding date\n        let dateObj = new Date();\n        order['created_ymd'] = dateObj.getUTCFullYear() + '' + mt(dateObj.getUTCMonth() + 1) + '' + mt(dateObj.getUTCDate());\n        order['created_ym'] = dateObj.getUTCFullYear() + '' + mt(dateObj.getUTCMonth() + 1);\n        order['created_y'] = dateObj.getUTCFullYear() + '';\n      \n        // metrics\n        let time = new Date((new Date().setHours(new Date().getHours() - (new Date().getTimezoneOffset() / 60)))).toISOString();\n        gtag('event', 'Product', {'event_category': 'checkout', 'page': 'feed', 'source': 'modal', 'time':time, 'idd':order.idd, 'entity':order.entity, 'total':order.total, 'total_all':order.total_all });\n\n        // do API query\n        fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n            method: 'post',\n            headers: {\n                'Accept': 'application/json',\n                'Content-type': 'application/x-www-form-urlencoded',\n                'Authorization': 'Bearer ' + API_KEY,\n                // 'Kenzap-Token': config.token,\n                'Kenzap-Sid': spaceID()\n            },\n            body: JSON.stringify({\n                query: {\n                    order: {\n                        type:       'create-order',\n                        key:        'ecommerce-order',        \n                        sid:        spaceID(),\n                        data:       order  \n                    },\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            if(response.success){\n\n                // console.log(response);\n\n                // cache order locally\n                let orders = localStorage.getItem('sk-design-orders');\n                orders = orders ? JSON.parse(orders) : [];\n                orders.push(response.order.id)\n                localStorage.setItem('sk-design-orders', JSON.stringify(orders));\n                \n                _this.clearCart();\n\n                let url = new URL(window.location.href);\n\n                window.location.href = url.origin+url.pathname+\"?order=\"+response.order.id+\"&recent=yes\";\n             \n            }else{\n\n                // alert(\"Error occured. Please try again!\");\n                alert('Error: '+JSON.stringify(response));\n\n            }\n        })\n        .catch(error => {\n            console.error('Error:', error);\n        });\n    }\n\n    /**\n     * Toggle cart button visibility\n     * \n     * @returns {Object} - cart object\n     */\n    cartButtonVissible(){\n\n        if(this.cart.items.length){ document.querySelector('.cd-cart').classList.remove('cd-cart--empty'); }else{ document.querySelector('.cd-cart').classList.add('cd-cart--empty'); }\n\n    }\n\n    /**\n     * Toggle cart visibility\n     * \n     * @returns {Object} - cart object\n     */\n    toggleCart(bool){\n\n        let _this = this;\n\n        let cartIsOpen = ( typeof bool === 'undefined' ) ? Util.hasClass(_this.cart.html[0], 'cart-open') : bool;\n\t\t\n        if( cartIsOpen ) {\n\n            Util.removeClass(_this.cart.html[0], 'cart-open');\n            //reset undo\n            if(_this.cart.cartTimeoutId) clearInterval(_this.cart.cartTimeoutId);\n            Util.removeClass(_this.cart.cartUndo, 'cd-cart__undo--visible');\n            // removePreviousProduct(); // if a product was deleted, remove it definitively from the cart\n            setTimeout(function(){\n\n                _this.cart.cartBody.scrollTop = 0;\n                //check if cart empty to hide it\n                if( Number(_this.cart.cartCountItems[0].innerText) == 0) Util.addClass(_this.cart.html[0], 'cd-cart--empty');\n            }, 500);\n        } else {\n            Util.addClass(_this.cart.html[0], 'cart-open');\n        }\n\n        return true;\n    }\n\n    /**\n     * Returns cart object\n     * \n     * @returns {Object} - cart object\n     */\n    getCart(){\n\n        return this.cart;\n    }\n\n    /**\n     * Add product to the cart\n     * \n     * @param obj {Object} product item\n     * @returns {Boolena} - \n     */\n    addToCart(obj){\n\n        // find if already in the cart\n        let ii = -1;\n        this.cart.items.forEach((item, i) => { if(obj.cid == item.cid) ii = i; });\n\n        // console.log(\"ii\" + ii);\n\n        // ecommerce defaults\n        if(!obj.variations){ obj.variations = []; }\n        if(!obj.note){ obj.note = \"\"; }\n\n        console.log(obj);\n\n        // && item.length\n        if(ii > -1){ \n\n            // this.cart.items[ii].qty = obj.qty;\n            // this.cart.items[ii].price = obj.price;\n            // this.cart.items[ii].total = obj.price * obj.qty;\n\n            this.cart.items[ii] = obj;\n\n        }else{\n\n            this.cart.items.push(obj);\n        }\n\n        this.cartButtonVissible();\n\n        this.saveCart();\n\n        this.refreshCartHTML();\n\n        // console.log(obj);\n\n        // metrics\n        gtag('event', 'Product', {'event_category': 'add_to_cart', 'page': 'feed', 'source': 'modal', 'event_label':obj._id, 'title':obj.title, 'coating':obj.coating, 'color':obj.color, 'qty':obj.qty, 'input_fields':JSON.stringify(obj.input_fields_values, null, 2) });\n\n        return true;\n    }\n\n    /**\n     * Product item to HTML\n     * \n     * @param obj {Object} product item\n     * @returns {Boolena} - \n     */\n    cartRowStruct(obj, i){\n\n        // let select_qty = '<select class=\"reset\" name=\"quantity\">';\n        // for(let i=0;i<=100;i++){\n        \n        //     select_qty += `<option value=\"${ i }\">${ i }</option>`;\n        // }\n        // select_qty += '</select>';\n\n        // console.log(obj);\n\n        let select_qty = `<input class=\"po form-control form-control-sm px-2\" disabled type=\"number\" value=\"${ obj.qty }\" min=\"1\" max=\"1000\" title=\"${ __html(\"Rectify\") }\"></input>`;\n\n        // let field_list = obj.input_fields_values.inputL ? '<span class=\"subtitle\">' + __html(\"Length %1$ mm\", obj.input_fields_values.inputL) + '</span>' : \"\";\n\n        let field_list = '<table class=\"form-text\">';\n\n        // preload with existing sizes\n        obj.input_fields.forEach((field, i) => {\n\n            field_list += `<tr><td><b>${ field.label }</b>&nbsp;</td><td>${ obj.input_fields_values['input'+field.label] + (field.type == \"polyline\" ? \"mm\" : \"°\") }</td></tr>`;\n        });\n\n        field_list += \"</table>\";\n        \n        return `<li class=\"cd-cart__product\"><div class=\"cd-cart__image\"><a data-id=\"${ obj._id }\" data-cid=\"${ obj.cid }\" data-i=\"${ i }\" data-preview=\"cart\" href=\"#\" title=\"${ __html(\"Rectify\") }\"><img src=\"${ CDN }S${ spaceID() }/sketch-${ obj._id }-1-500x500.jpeg\" alt=\"placeholder\"></a></div><div class=\"cart-details\"><h3 class=\"truncate\" ><a data-id=\"${ obj._id }\" data-cid=\"${ obj.cid }\" data-i=\"${ i }\" data-preview=\"cart\" href=\"#\" title=\"${ __html(\"Rectify\") }\">${ obj.title } <span class=\"subtitle\">${ obj.coating } ${ obj.color }</span></a><div class=\"form-text\">${ field_list }</div></h3><span class=\"cart-price\">${ priceFormat(this._this, obj.total) }</span><div class=\"cd-cart__actions\"><div class=\"cart-qty\"><span class=\"po cart-select pe-2\" data-id=\"${ obj._id }\" data-cid=\"${ obj.cid }\" data-i=\"${ i }\" data-preview=\"cart\"> ${ select_qty } <svg class=\"icon d-none\" viewBox=\"0 0 12 12\"><polyline fill=\"none\" stroke=\"currentColor\" points=\"2,4 6,8 10,4 \"/></svg></span> <a href=\"#0\" data-cid=\"${ obj.cid }\" class=\"cart-delete-item mt-1\">${ __html('Delete') }</a> </div></div></div></li>`;\n    }\n\n    /**\n     * Refresh cart counter number\n     * \n     */\n    refreshCartCountAndTotals(){\n\n        let actual = this.cart.items.length;\n        let next = actual + 1;\n        \n        this.cart.cartCountItems[0].innerText = actual;\n        this.cart.cartCountItems[1].innerText = next;\n        this.cart.animatingQuantity = false;\n\n        this.cart.price = { entity: 'company', grand_total: 0, total: 0, discount_percent: 0, discount_total: 0, fee_total: 0, tax_company_total: 0, tax_individual_total: 0, tax_total: 0, tax_percent: 0 };\n\n        if(document.querySelector('#btn-individual')) if(document.querySelector('#btn-individual').checked){ \n            \n            this.cart.price.entity = 'individual';\n            this.cart.price.tax_percent = 21;\n        }\n\n        let reversed_tax = false;\n\n        this.cart.items.forEach(obj => {\n\n            let total = (obj.price * obj.qty);\n            this.cart.price.total += (obj.price * obj.qty);\n\n            if(obj.tax_id.length == 4) reversed_tax = true;\n\n            // reversed tax\n            this.cart.price.tax_company_total += obj.tax_id.length == 4 ? 0 : total * 0.21;\n            this.cart.price.tax_individual_total += total * 0.21;\n\n            // console.log(obj.tax_id + \" \" + (obj.tax_id.length == 4 ? 0 : total * 0.21));\n        });\n\n        this.cart.price.tax_total = this.cart.price.total * ((this.cart.price.tax_percent / 100));\n        this.cart.price.grand_total = this.cart.price.total + this.cart.price.tax_total;\n\n        // update checkout if present\n\n        if(document.querySelector('.total_cont')) document.querySelector('.total_cont div').innerHTML = priceFormat(this._this, this.cart.price.total)\n\n        if(this.cart.price.entity == \"company\"){\n\n            if(document.querySelector('.vat_cont')) document.querySelector('.vat_cont div').innerHTML = priceFormat(this._this, this.cart.price.tax_company_total)\n            if(document.querySelector('.grand_total_cont')) document.querySelector('.grand_total_cont div').innerHTML = priceFormat(this._this, this.cart.price.total + this.cart.price.tax_company_total)\n\n            if(document.querySelector('.vat_cont')) if(this.cart.price.tax_company_total > 0) document.querySelector('.vat_cont').classList.remove('d-none');\n            if(document.querySelector('.vat_cont_0')) if(reversed_tax) document.querySelector('.vat_cont_0').classList.remove('d-none');\n        }else{\n\n            if(document.querySelector('.vat_cont')) document.querySelector('.vat_cont div').innerHTML = priceFormat(this._this, this.cart.price.tax_individual_total)\n            if(document.querySelector('.grand_total_cont')) document.querySelector('.grand_total_cont div').innerHTML = priceFormat(this._this, this.cart.price.total + this.cart.price.tax_individual_total)\n\n            if(document.querySelector('.vat_cont')) document.querySelector('.vat_cont').classList.remove('d-none');\n            if(document.querySelector('.vat_cont_0')) document.querySelector('.vat_cont_0').classList.add('d-none');\n        }\n        document.querySelector('.cart-checkout em span').innerHTML = priceFormat(this._this, this.cart.price.grand_total);  \n    }\n\n    /**\n     * Refresh cart html state\n     * \n     */\n    refreshCartHTML(){\n\n        let _this = this;\n\n        this.cart.cartList.innerHTML = \"\";\n        \n        // console.log(this.cart.items);\n\n        this.cart.items.forEach((obj, i)=>{\n\n            // console.log(obj.coating + obj.color + obj.id + JSON.stringify(obj.input_fields));\n\n            this.cart.cartList.insertAdjacentHTML('beforeend', this.cartRowStruct(obj, i));\n        });\n\n        // remove listener\n        onClick(\".cart-delete-item\", (e) => {\n\n            if(!confirm( __html('Remove from cart?') )) return;\n\n            let cid = e.currentTarget.dataset.cid;\n\n            _this.cart.items = _this.cart.items.filter(item => cid != item.cid);\n\n            _this.saveCart();\n\n            _this.refreshCartHTML();\n        });\n\n        // qty listener\n\n        // modal listener\n        onClick('[data-preview=\"cart\"]', (e) => {\n\n            e.preventDefault();\n\n            _this.toggleCart(true);\n\n            _this._this.listeners.renderModal(e);\n        });\n\n        // // modal listener\n        // onClick(\".cart-details h3 a\", (e) => {\n\n        //     e.preventDefault();\n\n        //     _this.toggleCart(true);\n\n        //     _this._this.listeners.renderModal(e);\n        // });\n    \n        this.refreshCartCountAndTotals();\n    }\n\n    /**\n     * Save cart to loal storage\n     * \n     */\n    saveCart(){\n\n        localStorage.setItem('sk-design-cart', JSON.stringify(this.cart));\n    }\n    \n    /**\n     * Render cart if products are present\n     * \n     */\n    renderCart(){\n\n        localStorage.setItem('sk-design-cart', JSON.stringify(this.cart));\n    }\n\n    /**\n     * Clear cart\n     * \n     */\n    clearCart(){\n\n        localStorage.removeItem('sk-design-cart');\n    }\n    \n    /**\n     * Render cart HTML\n     * \n     */\n    renderCartHTML(){\n\n        if(!document.querySelector('.cd-cart')){ \n            \n        document.querySelector('#cart').innerHTML = `\n        \n        <div class=\"cd-cart cd-cart--empty js-cd-cart\">\n            <a href=\"#0\" class=\"cd-cart__trigger\">\n                <ul class=\"cd-cart__count\">\n                    <li>0</li>\n                    <li>0</li>\n                </ul>\n            </a>\n        \n            <div class=\"cd-cart__content\">\n                <div class=\"cd-cart__layout\">\n                    <header class=\"cd-cart__header\">\n                    <h4 class=\"mt-3\">${ __html(\"Cart\") }</h4>\n                    <span class=\"cd-cart__undo\">Item removed. <a href=\"#0\">Undo</a></span>\n                    </header>\n                    \n                    <div class=\"cd-cart__body pe-3\">\n                        <ul>\n                            \n                        </ul>\n                    </div>\n            \n                    <footer class=\"cd-cart__footer\">\n                    <a href=\"#0\" class=\"cart-checkout\">\n                        <em>${ __html(\"Checkout\") } - <span></span>\n                        <svg class=\"icon icon--sm d-none\" viewBox=\"0 0 24 24\"><g fill=\"none\" stroke=\"currentColor\"><line stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" x1=\"3\" y1=\"12\" x2=\"21\" y2=\"12\"/><polyline stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" points=\"15,6 21,12 15,18 \"/></g>\n                        </svg>\n                        </em>\n                    </a>\n                    </footer>\n                </div>\n            </div>\n        </div>\n        `;\n\n        }\n    }\n}","// https://codyhouse.co/demo/add-to-cart-interaction/index.html\nimport { onClick, onChange, onKeyUp, toast, __, __attr, __html, getCookie } from '@kenzap/k-cloud';\nimport { Util } from \"../_/_cart_util.js\"\nimport { CDN, priceFormat, onlyNumbers, degToRad, stringToHash, lazyLoad, spaceID, randomString, setCookie, unescape} from \"../_/_helpers.js\"\n\nexport const productModal = {\n    \n    // cache state locally\n    _this: null,\n\n    // render product modal\n    render: (_this) => {\n\n        productModal._this = _this;\n\n        let urlParams = new URLSearchParams(window.location.search);\n        \n        document.querySelector(\".modal-item .modal-title\").innerHTML = (_this.state.item.N ? _this.state.item.N + \". \" : \"\") + _this.state.item.title;\n\n        let parts = [], parts_options = '', coating_options = '', color_options = '', parent_list = [];\n\n        // coating options\n        let ic = localStorage.getItem('input-coating') ? localStorage.getItem('input-coating') : parent_list[0];\n\n        // console.log(_this.state.item_preview);\n\n        // preview mode = cart\n        if(_this.state.item_preview == \"cart\"){\n    \n            // preload with existing sizes\n            _this.state.item.input_fields.forEach((field, i)=>{\n\n                field.default = _this.state.item.input_fields_values['input'+field.label];\n            });\n\n            ic = _this.state.item.coating;\n        }\n  \n        // preview mode = order\n        if(_this.state.item_preview == \"order\"){\n            \n            // override coating option when \n            ic = _this.state.item.coating;\n        }\n\n        // override params from iframe\n        if(urlParams.get('iframe')){\n\n            let input_fields_values;\n\n            // normalize coating\n            if(urlParams.get('coating')) ic = urlParams.get('coating');\n            if(ic == \"MattPE\") ic = \"Matt Polyester\";\n            if(ic == \"Pural Matt\") ic = \"Matt Pural\";\n            if(ic == \"ZN\") ic = \"Zinc\";\n            if(ic == \"-\") ic = \"Painted\";\n\n            // input fields\n            if(urlParams.get('input_fields_values')) input_fields_values = JSON.parse(unescape(urlParams.get('input_fields_values')));\n            if(input_fields_values) _this.state.item.input_fields.forEach((field, i)=>{\n\n                field.default = input_fields_values['input'+field.label] ? input_fields_values['input'+field.label] : field.default;\n            });\n\n            // set quantity\n            if(urlParams.get('qty')) _this.state.item.qty = urlParams.get('qty');\n\n            // set notes\n            if(urlParams.get('note')) _this.state.item.note = urlParams.get('note');\n        }\n\n        // make Polyester default coating\n        if(!ic) ic = \"Polyester\";\n\n        // console.log(_this.state.item);\n        \n        // calc price options\n        switch(_this.state.item.calc_price){\n\n            case 'variable': \n\n                // console.log(_this.state.item.var_price);\n                // let parent = [];\n                _this.state.item.var_price.forEach((price, i) => {\n\n                    if(!parent_list.includes(price.parent)) parent_list.push(price.parent);\n                });\n\n                parent_list.forEach((parent, i) => { coating_options += `<option ${ ic == parent ? \"selected\" : \"\" } value=\"${ parent }\">${ __html(parent) }</option>`; });\n\n            break;\n            case 'formula':\n            default:\n\n                // prepare array for coating options\n                for(let price of _this.state.sk_settings.price){\n\n                    if(price.public){\n\n                        if(!parent_list.includes(price.parent)) parent_list.push(price.parent) \n                    }\n                }\n\n                parent_list.forEach((parent, i) => { coating_options += `<option ${ ic == parent ? \"selected\" : \"\" } value=\"${ parent }\">${ __html(parent) }</option>`; });\n\n            break;\n        }\n        \n        // parts options\n        if(_this.state.item.parts){ parts = _this.state.item.parts; }\n\n        // item < parts options\n        if(_this.state.item_parent) if(_this.state.item_parent.parts){ parts = _this.state.item_parent.parts; } \n\n        // price calc model\n        if(!_this.state.item.calc_price){ _this.state.item.calc_price = 'default'; }\n\n        // find selected part\n        parts.forEach(part => {\n\n            let item_part = _this.state.items.filter(item => { return part.id == item._id });\n            if(item_part[0]) parts_options += `<option ${ _this.state.item._id == part.id ? \"selected\" : \"\" } data-parent=\"${ _this.state.item_parent ? _this.state.item_parent._id : _this.state.item._id }\" value=\"${ part.id }\">${ item_part[0].title }</option>`;\n        });\n\n        // struct breadcrumbs\n        if(_this.state.bc[1]){\n            _this.state.bc[1] = { id: _this.state.item._id, title: _this.state.item.title };\n        }else{\n            _this.state.bc.push({ id: _this.state.item._id, title: _this.state.item.title });\n        }\n\n        let html = `\n        <div class=\"form-cont\">\n            <nav style=\"--bs-breadcrumb-divider: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&quot;);\" aria-label=\"breadcrumb\">\n                <ol class=\"breadcrumb\"></ol>\n            </nav>\n            <div class=\"form-group mt-3\">\n                <div class=\"alert alert-warning alert-dismissible ${ ( getCookie('size-warning') != '1' && _this.state.item.calc_price == 'formula') ? '' : 'd-none' }\" role=\"alert\">${ __html('Enter product sizes in millimeters') }<button type=\"button\" class=\"btn-close size-warning\" data-bs-dismiss=\"alert\" aria-label=\"Close\"></button></div>\n                <label for=\"mprice\" class=\"form-label d-none\">${ __html('Price') }</label>\n                <div class=\"input-group mb-3\">\n        \n                    <div class=\"sketch-3d-controls d-flex\">\n\n                        <div class=\"form-check form-switch sketch-3d-switch color-danger d-none\">\n                            <input class=\"form-check-input\" type=\"checkbox\" id=\"sketch3d\" >\n                            <label class=\"form-check-label text-muted\" for=\"sketch3d\">3D</label>\n                        </div>\n\n                        <div class=\"${ _this.state.item.modelling == \"1\" ? \"\" : \"d-none\" }\" style=\"z-index:10; position:absolute;\">\n                            <button class=\"btn btn-sm btn-outline-secondary mb-1 text-muted set-sketch-view\" data-type=\"sketch\" >\n                            ${ __html('Sketch') }\n                            </button>\n\n                            <button class=\"btn btn-sm btn-light mb-1 text-muted set-sketch-view\" data-type=\"Iso\" >\n                            ${ __html('3D') }\n                            </button>\n\n                            <button class=\"btn btn-sm btn-light mb-1 text-muted set-sketch-view\" data-type=\"Top\" >\n                            ${ __html('Top') }        \n                            </button>\n\n                            <button class=\"btn btn-sm btn-light mb-1 text-muted set-sketch-view\" data-type=\"Bottom\" >\n                            ${ __html('Bottom') }        \n                            </button>\n\n                            <button class=\"btn btn-sm btn-light mb-1 text-muted set-sketch-view\" data-type=\"Left\" >\n                            ${ __html('Left') }        \n                            </button>\n\n                            <button class=\"btn btn-sm btn-light mb-1 text-muted set-sketch-view\" data-type=\"Right\" >\n                            ${ __html('Right') }        \n                            </button>\n                        </div>\n                    </div>\n                    <div class=\"sketch-3d d-none\">\n                        <div data-index=\"sketch0\" style=\"position: relative;\"></div>\n                    </div>\n                    <div class=\"sketch float-start\" data-mode=\"editing\" style=\"max-width:100%;\">\n                        <div data-index=\"sketch0\" style=\"position: relative;overflow:scroll;\">\n \n                            <img class=\"images-sketch0 lazys\" width=\"550\" height=\"550\" data-index=\"sketch0\" src=\"${ CDN }S${ spaceID() }/sketch-${ _this.state.item._id }-1-500x500.jpeg?${ _this.state.item.updated }\" data-srcset=\"${ CDN }S${ spaceID() }/sketch-${ _this.state.item._id }-1-500x500.jpeg?${ _this.state.item.updated }\">\n                            <svg id=\"svg\" xmlns=\"http://www.w3.org/2000/svg\">\n                                `;\n                            \n                            let htmlLabels = '', htmlLines = '';\n                            _this.state.item.input_fields.forEach((field, i) => {\n\n                                // console.log(field);\n                                let points = field.points.split(' '), x, y;\n                                let xi = 0, yi = 0, scale = 1.1;\n\n                                // scale poligon. ex 500px to 550px\n                                let pointsScaled = \"\"; points.forEach(p => { pointsScaled += isNaN(p) ? p : (p * scale) + \" \"; });\n\n                                switch(field.type){\n\n                                    case 'polyline':\n\n                                        field.ext = \"\";\n                                        // xi = Math.abs(parseFloat(points[0]) - parseFloat(points[2]));\n                                        // yi = Math.abs(parseFloat(points[1]) - parseFloat(points[3]));\n\n                                        x = (parseFloat(points[0]) + parseFloat(points[2])) / 2;\n                                        y = (parseFloat(points[1]) + parseFloat(points[3])) / 2;\n\n                                        htmlLines += `\n                                        <g data-id=\"${ field.id }\">\n                                            <polyline data-id=\"${ field.id }\" points=\"${ pointsScaled }\" style=\"\"></polyline>\n                                            <rect data-id=\"start${ field.id }\" x=\"${ parseFloat(points[0])*scale-4 }\" y=\"${ parseFloat(points[1])*scale-4 }\" width=\"8\" height=\"8\" rx=\"8\" \"></rect>\n                                            <rect data-id=\"end${ field.id }\" x=\"${ parseFloat(points[2])*scale-4 }\" y=\"${ parseFloat(points[3])*scale-4 }\" width=\"8\" height=\"8\" rx=\"8\" ></rect>\n                                        </g>\n                                        `;\n\n                                    break;\n                                    case 'arc':\n\n                                        x = field.params.x;\n                                        y = field.params.y;\n\n                                        field.ext = '°';\n\n                                        xi = x;\n                                        yi = y;\n                                        \n                                        let deg = field.params.startAngle + ((field.params.endAngle - field.params.startAngle) / 2);\n\n                                        // console.log(field.points);\n                                        // console.log(pointsScaled);\n\n                                        x = field.params.x + field.params.radius / 2 + (((field.params.radius*2) * Math.cos(degToRad(deg)))) + 5;;\n                                        y = field.params.y + field.params.radius / 2 + (((field.params.radius*2) * Math.sin(degToRad(deg)))) - 5;;\n\n                                        htmlLines += `\n                                        <g data-id=\"${ field.id }\">\n                                            <path data-id=\"${ field.id }\" d=\"${ pointsScaled }\" stroke-linecap=\"round\" style=\"\"></path>\n                                        </g>\n                                        `;\n\n                                    break;\n                                }\n\n                                // // load previous values\n                                // if(_this.state.item_preview == \"cart\"){\n\n                                //     field.default\n                                // }\n                                \n                                htmlLabels += `\n                                <div class=\"svg-input m-2 ${ field.type }\" style=\"left:${ x * scale }px;top:${ y * scale }px;\" data-id=\"${ field.id }\" >\n                                    <label for=\"input${ field.label }\">${ field.label + field.ext }</label>\n                                    <input type=\"text\" data-bs-toggle=\"tooltip\" data-bs-placement=\"bottom\" data-bs-container=\"body\" ${ (i==0 && getCookie(\"first-time\") != \"1\") ? 'data-bs-toggle=\"popover\" data-bs-trigger=\"focus\" data-bs-placement=\"bottom\" data-bs-content=\"'+ __attr(\"Hit enter to continue\") + '\"' : '' } class=\"form-control input-label form-control-sm ${ field.label_pos ? field.label_pos : \"\" }\" autocomplete=\"off\" data-lable=${ field.label } id=\"input${ field.label }\" placeholder=\"${ field.default }\" value=\"${ field.default }\" data-valuemin=\"${ field.min }\" data-valuemax=\"${ field.max }\" maxlength=\"5\" tabindex=\"${ i+1 }\" >\n                                </div>\n                                `;\n\n                            });\n\n                            html += htmlLines;\n\n                            html += '</svg>';\n\n                            html += htmlLabels;\n\n                            html += `\n                        </div>\n                    </div>\n                    <div class=\"ps-lg-4 ps-0\">\n                        \n                        <div>\n                            <div class=\"form-group mt-1\">\n                                <div class=\"input-parts-cnt d-none\">\n                                    <h4>${ __html('Part') }</h4>\n                                    <div class=\"input-group\">\n                                        <select class=\"form-select input-parts form-select-lg mb-3\">\n                                            <option value=\"${ _this.state.item_parent ? _this.state.item_parent._id : _this.state.item._id }\" data-back=\"true\" >${ __html('Choose part') }</option>\n                                            ${ parts_options }\n                                        </select>\n                                    </div>\n                                </div>\n                                <div class=\"input-coating-cnt\">\n                                    <h4>${ __html('Coating') }</h4>\n                                    <div class=\"input-group\">\n                                        <select class=\"form-select input-coating form-select-lg mb-3\">\n                                            ${ coating_options }\n                                        </select>\n                                    </div>\n                                </div>\n                                <div class=\"input-color-cnt\">\n                                    <h4 class=\"input-group\">${ __html('Color') }</h4>\n                                    <div class=\"input-group\">\n                                        <select class=\"form-select input-color form-select-lg mb-3\" >\n\n                                        </select>\n                                    </div>\n                                </div>\n                                <div class=\"input-quantity-cnt\">\n                                    <h4>${ __html('Quantity') }</h4>\n                                    <div class=\"input-group\">\n                                        <input type=\"text\" class=\"qty form-control input-qty form-select-lg mb-3\" value=\"${ _this.state.item.qty }\" >\n                                    </div>\n                                </div>\n                                <div class=\"input-notes\">\n                                    <h4>${ __html('Notes') }</h4>\n                                    <div class=\"input-group\">\n                                        <textarea type=\"text\" class=\"notes form-control input-note form-select-lg mb-3\" rows=\"1\" >${ _this.state.item.note ? _this.state.item.note : \"\" }</textarea>\n                                    </div>\n                                </div>\n                                <div class=\"input-price-cnt\">\n                                    <h4>${ __html('Price') }</h4>\n                                    <div> \n                                        <input type=\"text\" class=\"price form-control input-price form-select-lg mb-3\" value=\"1\" data-total=\"0\" data-price=\"0\" disabled>\n                                        <p class=\"form-text\">${ __html('* VAT is not included in the price above.') }</p>\n                                        <p class=\"form-text price-desc ${ getCookie(\"admin\") ? \"\" : \"d-none\" }\"> </p\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    \n                    </div>\n                </div>\n            </div>\n        </div>`;\n\n        document.querySelector(\".modal-body\").innerHTML = html;\n\n        // hide popover on mobile devices\n        if(screen.width>700){\n            let popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle=\"popover\"]'))\n            let popoverList = popoverTriggerList.map(function (popoverTriggerEl) {\n                return new bootstrap.Popover(popoverTriggerEl)\n            });\n\n            // focus first input field\n            if(document.querySelector(\".svg-input [tabindex='1']\")){\n                \n                document.querySelector(\".svg-input [tabindex='1']\").focus();\n                document.querySelector(\".svg-input [tabindex='1']\").select();\n            }\n        }\n\n        // sketch view when 3d modelling enabled\n        onClick('.set-sketch-view', e => {\n\n            let type = e.currentTarget.dataset.type;\n\n            for(let btn of document.querySelectorAll(\".set-sketch-view\")){\n\n                btn.classList.remove(\"btn-outline-secondary\");\n                btn.classList.add(\"btn-light\");\n            }\n\n            e.currentTarget.classList.remove(\"btn-light\");\n            e.currentTarget.classList.add(\"btn-outline-secondary\");\n\n            if(type == \"sketch\"){\n\n                document.querySelector(\".sketch\").classList.remove(\"d-none\");\n                document.querySelector(\".sketch-3d\").classList.add(\"d-none\");\n\n                return;\n            }\n\n            document.querySelector(\".sketch\").classList.add(\"d-none\");\n            document.querySelector(\".sketch-3d\").classList.remove(\"d-none\");\n            \n            if(document.querySelector(\".sketch-3d > div\").innerHTML.length > 10){ document.getElementById(type).setAttribute('set_bind','true'); return; }\n\n\n            // let id = 'a6959988164ddd62e94a5a12398e7b7b343a434f';\n            fetch('/assets/x3d/'+_this.state.item._id+'.xhtml', {\n                method: 'get',\n                headers: {\n                    // 'Accept': 'application/json',\n                    // 'Content-Type': 'text/plain',\n                    // 'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n                    // 'Kenzap-Header': localStorage.hasOwnProperty('header'),\n                    // 'Kenzap-Token': getCookie('kenzap_token'),\n                    // 'Kenzap-Sid': spaceID(),\n                }\n            })\n            .then(response => response.text())\n            .then(response => {\n    \n                _this.state.x3d_response = response;\n\n                // console.log(\"render3dSketch\");\n\n                productModal.render3dSketch(_this);\n\n                document.getElementById(type).setAttribute('set_bind','true');\n            })\n            .catch(error => {\n                console.error('Error:', error);\n            });\n        });\n\n        // load & init x3d sketch\n        onClick('.sketch-3d-switch > input', (e) => {\n\n            // e.preventDefault();\n\n            if(!e.currentTarget.checked){\n                \n                document.querySelector(\".sketch\").classList.remove(\"d-none\");\n                document.querySelector(\".sketch-3d\").classList.add(\"d-none\");\n                return;\n\n            }else{\n\n                document.querySelector(\".sketch\").classList.add(\"d-none\");\n                document.querySelector(\".sketch-3d\").classList.remove(\"d-none\");\n            }\n\n            if(document.querySelector(\".sketch-3d > div\").innerHTML.length > 10){ return;}\n\n            // let id = 'a6959988164ddd62e94a5a12398e7b7b343a434f';\n            fetch('/assets/x3d/'+_this.state.item._id+'.xhtml', {\n                method: 'get',\n                headers: {\n                    // 'Accept': 'application/json',\n                    // 'Content-Type': 'text/plain',\n                    // 'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n                    // 'Kenzap-Header': localStorage.hasOwnProperty('header'),\n                    // 'Kenzap-Token': getCookie('kenzap_token'),\n                    // 'Kenzap-Sid': spaceID(),\n                }\n            })\n            .then(response => response.text())\n            .then(response => {\n    \n                _this.state.x3d_response = response;\n\n                productModal.render3dSketch(_this);\n            })\n            .catch(error => {\n                console.error('Error:', error);\n            });\n        });\n\n        // dismiss millimiters notification bar\n        onClick('.size-warning', (e) => {\n\n            // console.log(\"size-warning\");\n            setCookie(\"size-warning\", \"1\");\n        });\n\n        // coating change listener\n        onChange('.input-coating', (e) => {\n\n            localStorage.setItem('input-coating', e.currentTarget.value);\n\n            _this.loadColors(e.currentTarget.value);\n\n            // productModal.render3dSketch(productModal._this);\n        });\n\n        // color change listener\n        onChange('.input-color', (e) => {\n\n            localStorage.setItem('input-color', e.currentTarget.value);\n\n            // productModal.render3dSketch(productModal._this);\n        });\n\n        // capture enter click event\n        onKeyUp('.input-label', (e) => {\n            \n            // Array.from(document.querySelectorAll('.tooltip')).forEach((el) => {el.remove();});\n            // init tooltip array\n            if(!productModal._this.tooltips) productModal._this.tooltips = [];\n\n            // remove previous tooltips\n            productModal._this.tooltips.forEach((tooltip, i) => {\n\n                tooltip.dispose();\n                productModal._this.tooltips.splice(i,1);\n            });\n\n            // check min max input values\n            setTimeout((el) => {\n\n                if(!document.querySelector('body').classList.contains('modal-open')){ return; }\n\n                let tooltip = null, value = el.value;\n\n                if(value == \"\") value = 0;\n\n                if(parseFloat(value) < parseFloat(el.dataset.valuemin)){\n\n                    tooltip = new bootstrap.Tooltip(el, { title: __html(\"Value should be greater than %1$\", el.dataset.valuemin), offset: [0, 8] });\n                    tooltip.show();\n\n                    productModal._this.tooltips.push(tooltip);\n                    // console.log(\"tooltip show\");\n                }\n\n                if(parseFloat(value) > parseFloat(el.dataset.valuemax)){\n\n                    tooltip = new bootstrap.Tooltip(el, { title: __html(\"Value should be smaller than %1$\", el.dataset.valuemax), offset: [0, 8] });\n                    tooltip.show();\n\n                    productModal._this.tooltips.push(tooltip);\n                    // console.log(\"tooltip show\");\n                }\n\n            }, 1500, e.currentTarget);\n\n            // console.log(e.which);\n            if(e.which == 13){\n\n                let tabindex = parseInt(e.currentTarget.getAttribute(\"tabindex\"));\n\n                tabindex+=1;\n\n                // console.log(tabindex);\n\n                if(document.querySelector(\".input-label[tabindex='\"+tabindex+\"']\")){\n\n                    document.querySelector(\".input-label[tabindex='\"+tabindex+\"']\").focus();\n                    document.querySelector(\".input-label[tabindex='\"+tabindex+\"']\").select();\n                }else{\n\n                    if(!e.currentTarget.classList.contains(\"qty\")){\n\n                        document.querySelector(\".qty\").focus();\n                        document.querySelector(\".qty\").select();\n                    }\n                }\n            }\n        });\n\n        // parts change listener\n        onChange('.input-parts', e => {\n\n            const el = document.querySelector(\".input-parts\");\n            // console.log(el.options[el.selectedIndex].value);\n\n            // reset breadcrumbs\n            if(el.options[el.selectedIndex].dataset.back) { productModal._this.state.bc = []; }\n\n            let item = productModal._this.state.items.filter(item => { return item._id == el.options[el.selectedIndex].value });\n            let item_parent = productModal._this.state.items.filter(item => { return item._id == el.options[el.selectedIndex].dataset.parent });\n\n            productModal._this.state.item = item[0];\n            productModal._this.state.item_parent = item_parent[0];\n\n            productModal._this.state.item.qty = 1;\n\n            productModal.render(productModal._this);\n\n            // el.options[el.selectedIndex].value\n        });\n\n        // parts select visibility\n        if(parts_options){ document.querySelector(\".input-parts-cnt\").classList.remove('d-none'); }\n        // console.log(parts_options);\n        // document.querySelector(\".input-parts-cnt\").classList.remove('d-none');\n\n        // calc price options\n        switch(_this.state.item.calc_price){\n\n            // hide price variation input fields\n            case 'complex': \n\n                document.querySelector(\".input-coating-cnt\").classList.add(\"d-none\");\n                document.querySelector(\".input-color-cnt\").classList.add(\"d-none\");\n                document.querySelector(\".input-quantity-cnt\").classList.add(\"d-none\");\n                document.querySelector(\".input-price-cnt\").classList.add(\"d-none\");\n                document.querySelector(\".input-notes\").classList.add(\"d-none\");\n                document.querySelector(\".modal .btn-primary\").classList.add(\"d-none\");\n            break;\n\n            default:\n                document.querySelector(\".modal .btn-primary\").classList.remove(\"d-none\");\n            break;\n        }\n\n        // add to cart listener\n        _this.listeners.modalSuccessBtnFunc = (e) => {\n\n            e.preventDefault();\n\n            let obj = {};\n\n            obj['_id'] = _this.state.item._id;\n            obj['title'] = _this.state.item.title;\n            obj['coating'] = _this.state.modal.querySelector(\".input-coating\").value;\n            obj['color'] = _this.state.modal.querySelector(\".input-color\").value;\n            obj['qty'] = _this.state.modal.querySelector(\".input-qty\").value;\n            obj['price'] = _this.state.modal.querySelector(\".input-price\").dataset.price;\n            obj['total'] = _this.state.modal.querySelector(\".input-price\").dataset.total;\n            obj['area'] = _this.state.modal.querySelector(\".input-price\").dataset.area;\n            obj['note'] = _this.state.modal.querySelector(\".input-note\").value;\n            obj['tax_id'] = _this.state.item.tax_id;\n            obj['calc_price'] = _this.state.item.calc_price;\n            obj['var_price'] = _this.state.item.var_price ? _this.state.item.var_price : [];\n            obj['formula'] = _this.state.item.formula;\n            obj['formula_price'] = _this.state.item.formula_price;\n            obj['formula_width'] = _this.state.modal.querySelector(\".input-price\").dataset.width;\n            obj['formula_length'] = _this.state.modal.querySelector(\".input-price\").dataset.length;\n            obj['input_fields'] = _this.state.item.input_fields;\n            obj['input_fields_values'] = {};\n\n            // validate quantity\n            if(obj['qty'] == \"\"){\n\n                alert( __(\"Please enter quantity\") );\n                return;\n            }\n\n            for(let lable of document.querySelectorAll(\".input-label\")){\n\n                // validate input fields\n                if(lable.value == \"\"){\n\n                    alert( __(\"Please enter %1$ field\", lable.dataset.lable) );\n                    return;\n                }\n\n                obj['input_fields_values'][lable.id] = lable.value;\n            }\n\n            // console.log(obj['total']);\n\n            // validate price\n            if(isNaN(obj['total']) || obj['total'] == 0){\n\n                alert( __(\"Make sure all fields are entered properly\") );\n                return;\n            }\n\n            // cart - update existing product\n            if(_this.state.item_preview == \"cart\"){\n\n                obj['cid'] = _this.state.item_cid;\n            }\n\n            // feed - add new product\n            if(_this.state.item_preview == \"feed\"){\n\n                // to match product configuration\n                // obj['cid'] = stringToHash(obj.coating + obj.color + obj.id + JSON.stringify(obj.input_fields_values));\n                obj['cid'] = randomString(12);\n            }\n\n            // console.log(obj);\n\n            // parse URL\n            let urlParams = new URLSearchParams(window.location.search);\n            let iframe = urlParams.get('iframe') ? urlParams.get('iframe') : \"\";\n\n            // send to parent iframe\n            if(iframe){\n               \n                // calc width and length\n\n                let msg = {cmd: 'confirm', inputs: {}, note: obj['note'], inputs_label: {}, input_fields: obj['input_fields'], input_fields_values: obj['input_fields_values'], formula_width: obj['formula_width'], formula_length: obj['formula_length'], viewpoint: null, id: urlParams.get('id'), _id: obj['_id'], qty: obj['qty'], price: obj['price'], total: obj['total'], color: obj['color'], coating: obj['coating']};\n      \n                // console.log(msg);\n      \n                parent.postMessage(JSON.stringify(msg), \"*\");\n\n                _this.state.modal.cont.hide();\n\n                // return;\n\n            // add to cart\n            }else{\n\n                _this.state.cart.addToCart(obj);\n            }\n\n            // console.log(obj);\n\n            _this.state.modal.cont.hide();\n\n            toast( __('Added to cart') );\n\n            // setTimeout(() => _this.initListeners('partial'), 10);\n        }\n\n        // refresh sketch price\n        onKeyUp(\".modal-item .svg-input input\", _this.listeners.refreshSketchPrice);\n        onKeyUp(\".modal-item .qty\", _this.listeners.refreshSketchPrice);\n\n        // input key change listener\n        onlyNumbers(\".modal-item .svg-input input\", [8]);\n        onlyNumbers(\".modal-item .qty\", [8]);\n\n        _this.listeners.refreshSketchPrice();\n\n        // capture svg-input focus event\n        _this.listeners.focusListener();\n\n        _this.loadColors(ic);\n\n        productModal.bc();\n\n        lazyLoad();\n\n        setCookie(\"first-time\", \"1\");\n\n        // prevents window closure on androids\n        if(window.location.hash != \"#editing\") history.pushState({pageID: 'design'}, 'Design', window.location.pathname + window.location.search + \"#editing\");\n\n        // console.log(window.location.pathname + window.location.search + \"#editing\");\n\n        // android back pressed\n        setTimeout(() => {\n\n            window.addEventListener(\"hashchange\", function(e) {\n\n                if(document.querySelector('body').classList.contains('modal-open')){\n    \n                    // console.log(\"closing\");\n\n                    e.preventDefault();\n    \n                    productModal.closeModal();\n    \n                    return false;\n                }\n            });\n              \n        }, 500);\n\n        // android scroll into view chrome problem\n        // try{\n        //     if(/Android/.test(navigator.appVersion)) {\n        //         const handleAndroidResizeEvents = () => {\n        //             if ( typeof window === 'object' && document.activeElement.tagName === \"INPUT\" || document.activeElement.tagName === \"TEXTAREA\") {\n        //                 const intervals = [0,5,10,20,40,50,60,200]\n        //                 intervals.forEach(interval => {\n        //                     window.setTimeout(function () {\n        //                         try {\n        //                             document?.activeElement?.scrollIntoView({\"block\": \"center\"})\n        //                         } catch (e) {\n        //                         }\n        //                     }, interval)\n        //                 })\n        //             }\n        //         }\n        //         handleAndroidResizeEvents();\n        //         // window.addEventListener(\"resize\", function() {\n        //         // if(document.activeElement.tagName==\"INPUT\" || document.activeElement.tagName==\"TEXTAREA\") {\n        //         //     document.activeElement.scrollIntoView();\n        //         // }\n        //         // })\n        //     } \n        // }catch(e){   \n        // }\n        // enable tooltips\n        // var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle=\"tooltip\"]'))\n        // var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {\n        //     return new bootstrap.Tooltip(tooltipTriggerEl)\n        // })\n        // document.querySelector(\"[data-toggle=popover]\").popover();\n    },\n\n    closeModal: () => {\n\n        productModal._this.state.modal.cont.hide();\n    },\n\n    render3dSketch: (_this) => {\n\n        // if(!document.querySelector('.sketch-3d-switch > input').checked) return;\n\n        // Initialize the DOM parser\n        let parser = new DOMParser();\n\n        // Parse the text\n        let x3d = parser.parseFromString(_this.state.x3d_response, \"text/xml\");\n\n        // x3d.get\n        let x3dRoot = x3d.getRootNode();\n\n        // x3dRoot.querySelector(\"Background\").setAttribute(\"groundColor\", \"1 1 1\"); \n        // x3dRoot.querySelector(\"Background\").setAttribute(\"skyColor\", \"1 1 1\"); \n\n        let material = document.createElement(\"Material\"); \n        material.setAttribute('shininess', '0.9'); \n        material.setAttribute('specularColor', '1 1 1');\n        x3dRoot.querySelector(\"Appearance\").appendChild(material);\n        x3dRoot.querySelector(\"X3D\").style.width = (screen.width < 581 ? screen.width - 32 : 550) + 'px';\n        x3dRoot.querySelector(\"X3D\").style.height = '550px';\n        x3dRoot.querySelector(\"X3D\").setAttribute('width', (screen.width < 581 ? screen.width - 32 : 550) + 'px');\n        x3dRoot.querySelector(\"X3D\").setAttribute('height', '550px');\n\n        let textureTransform = document.createElement(\"TextureTransform\"); textureTransform.setAttribute('translation', '0.000000 0.000000'); textureTransform.setAttribute('scale', '1 1');\n        x3dRoot.querySelector(\"Appearance\").appendChild(textureTransform);\n\n        // get current coating and color\n        let coating = document.querySelector(\".input-coating\").value.toLowerCase().replace(\" \", \"-\");\n        let color = document.querySelector(\".input-color\").value.toLowerCase().replace(\" \", \"-\");\n\n        // this seems to be more clear, darks coatings not looking good\n        coating = \"polyester\";\n        color = \"rr20\";\n\n        // apply texture\n        let imageTexture = document.createElement(\"ImageTexture\"); \n        imageTexture.setAttribute('repeatT', 'false');\n        imageTexture.setAttribute('url', ' \"/assets/textures/'+coating+'-'+color+'.png\" \"https://www.web3d.org/x3d/content/examples/ConformanceNist/vts.jpg\"');\n        x3dRoot.querySelector(\"Appearance\").appendChild(imageTexture); \n\n        // add sketch to DOM               \n        document.querySelector(\".sketch-3d > div\").innerHTML = x3dRoot.querySelector(\"X3D\").outerHTML;\n\n        x3dom.reload();\n    },\n\n    // render breadcrumbs\n    bc: () => {\n\n        let _this = productModal._this;\n\n        let html = '';\n        _this.state.bc.forEach((el, i) => {\n\n            // last link\n            if (_this.state.bc.length == i+1) {\n\n                html += `<li class=\"breadcrumb-item\" data-id=\"${ el.id }\">${ el.title }</li>`;\n\n            // prev links\n            }else{\n\n                html += `<li class=\"breadcrumb-item \"><a class=\"bc-click\" data-id=\"${ el.id }\" href=\"#\">${ el.title }</a></li>`;\n            }\n            // ${ _this.state.bc.length == 0 ? \"active\" : \"\" }\n        });\n        \n        document.querySelector(\".breadcrumb\").innerHTML = html;\n\n        onClick(\".bc-click\", (e) => {\n\n            e.preventDefault();\n\n            productModal._this.state.bc = [];\n\n            let item = productModal._this.state.items.filter(item => { return item._id == e.currentTarget.dataset.id});\n\n            productModal._this.state.item = item[0];\n\n            _this.state.item.qty = 1;\n\n            productModal.render(productModal._this);\n        });\n\n        // <li class=\"breadcrumb-item\"><a href=\"#\">K-style rainwater system</a></li>\n        // <li class=\"breadcrumb-item active\" aria-current=\"page\">Downspout strap</li>\n    }\n}","import { onClick, __, __html, __attr, __init, attr, parseApiError, hideLoader } from '@kenzap/k-cloud';\nimport { Util } from \"../_/_cart_util.js\"\nimport { CDN, spaceID, makeNumber, priceFormat, onlyNumbers, mt, API_KEY, randomString } from \"../_/_helpers.js\"\nimport { productModal } from \"../_/_modal_product.js\"\n\nexport class Order{\n    \n    constructor(_this, id) {\n \n        this._this = _this;\n\n        this.id = id;\n\n        this.getOrder(id);\n    }\n\n    /**\n     * Get cart listeners\n     * \n     * @param {String} - order id\n     * @returns {Boolean} - true\n     */\n    getOrder = (id) => {\n      \n        // check locale\n        let locale = localStorage.locale ? localStorage.locale : \"lv\";\n\n        // do API query\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: {\n                'Accept': 'application/json',\n                'Content-type': 'application/x-www-form-urlencoded',\n                'Authorization': 'Bearer KYSh2L3rH7egsE7CBOr1OyYUwqwC2wi8k5jcSiYQCFnUHN3aKjRpXxzD6PzRakp0',\n                // 'Kenzap-Token': config.token,\n                'Kenzap-Sid': spaceID(),\n            },\n            body: JSON.stringify({\n                query: {\n                    order: {\n                        type:       'find',\n                        key:        'ecommerce-order',\n                        id:         id,   \n                        // limit:      10,\n                        fields:     ['_id', 'id', 'items', 'from', 'entity', 'sdesc', 'price', 'total_all', 'email', 'phone', 'notes', 'status', 'updated'],\n                    },\n                    settings: {\n                        type:       'get',\n                        key:        'ecommerce-settings',\n                        fields:     ['currency', 'currency_symb', 'currency_symb_loc', 'tax_calc', 'tax_auto_rate', 'tax_rate', 'tax_display'],\n                    },\n                    sk_settings: {\n                        type:       'get',\n                        key:        'sk-settings',\n                        fields:     ['price'],\n                    },\n                    locale: {\n                        type:       'locale',\n                        locales: [\n                            {\n                                key: 'sk-design',\n                                source: 'extension',\n                                locale: locale,   \n                            }, \n                            {\n                                key: 'ecommerce',\n                                source: 'extension',\n                                locale: locale,\n                            },\n                            {\n                                key: 'ecommerce',\n                                source: 'content',\n                                locale: locale,\n                            }\n                        ]\n                    }\n                }\n            }) \n        })\n        .then(response => response.json())\n        .then(response => {\n\n            // hide UI loader\n            hideLoader();\n \n            if(response.success){\n\n                // console.log(response);\n\n                this._this.state.order = response.order;\n                this._this.state.settings = response.settings;\n                this._this.state.sk_settings = response.sk_settings;\n\n                // preload translations\n                __init(response.locale);\n\n                if(this._this.state.order) if(this._this.state.order.length == 0){ \n                    \n                    // alert( __(\"Order does not exist or was removed\") ); \n                    let html = \"\";\n                    \n                    html += `\n                    <div class=\" text-center\" >\n                        <div class=\"card-header\">   \n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"64\" height=\"64\" fill=\"currentColor\" class=\"bi bi-exclamation-circle text-danger\" viewBox=\"0 0 16 16\">\n                                <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\n                                <path d=\"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z\"/>\n                            </svg>\n                        </div>\n                        <div class=\"card-body\">\n                            <h5 class=\"card-title\">${ __html(\"No order found\") }</h5>\n                            <p class=\"card-text\">${ __html(\"Order does not exist or was removed.\") }</p>\n                            <a href=\"https://wa.me/37126443313\" target=\"_blank\" class=\"btn btn-danger\" >\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-whatsapp mb-1 me-1\" viewBox=\"0 0 16 16\">\n                                    <path d=\"M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z\"/>\n                                </svg> ${ __html(\"Ask question\") }\n                            </a>\n                        </div>\n                        <div class=\"card-footer text-muted d-none\">${ __html(\"Order details\") }</div>\n                    </div>\n                    `;\n\n                    document.querySelector('#contents').innerHTML = html;\n\n                    return; \n                }\n\n                this.renderOrder();\n\n            }else{\n\n                parseApiError(response);\n            }\n\n            // init header\n            this._this.initHeader(response);\n\n            // init footer\n            this._this.initFooter();\n\n            // init general listeners\n            this._this.initListeners();\n\n            // init this page listeners\n            this.initListeners();\n        })\n        .catch(error => { parseApiError(error); });\n    }\n\n    /**\n     * Render HTML part of the order\n     * \n     * @returns {Boolean} - true\n     */\n    renderOrder = () => {\n\n        // parse URL\n        let urlParams = new URLSearchParams(window.location.search);\n        let recent = urlParams.get('recent') ? urlParams.get('recent') : \"\";\n        let total = 0, total_with_tax = 0;\n        let html = \"\";\n        if(recent == \"yes\"){\n\n            html += `\n\n            <nav style=\"--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&#34;);\" aria-label=\"breadcrumb\">\n                <ol class=\"breadcrumb\">\n                    <li class=\"breadcrumb-item\"><a href=\"/?orders=recent\">${ __html('My Orders') }</a></li>\n                    <li class=\"breadcrumb-item active\" aria-current=\"page\">#${ this._this.state.order.id }</li>\n                </ol>\n            </nav>\n\n            <div class=\" text-center\">\n                <div class=\"card-header\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"64\" height=\"64\" fill=\"currentColor\" class=\"bi bi-check-circle text-danger my-1\" viewBox=\"0 0 16 16\">\n                        <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\n                        <path d=\"M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z\"/>\n                    </svg>\n                </div>\n                <div class=\"card-body my-2\">\n                    <h5 class=\"card-title\">#${ this._this.state.order.id } ${ __html(\"Order received\") }</h5>\n                    <p class=\"card-text\">${ __html(\"Your order is being processed. The manager will contact you soon.\") }</p>\n                    <p class=\"form-text\"> ${ __html(\"*working hours: 9.00 - 17.00, Monday - Friday.\") }</p>\n                    <a href=\"https://wa.me/37126443313\" target=\"_blank\" class=\"btn btn-danger \">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-whatsapp mb-1 me-1\" viewBox=\"0 0 16 16\">\n                            <path d=\"M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z\"/>\n                        </svg> ${ __html(\"Ask question\") }\n                    </a>\n                </div>\n                <div class=\"card-footer text-muted\">${ __html(\"Order details\") }</div>\n            </div>\n\n            `;\n        }\n\n        html += this.renderClient();\n\n        html += `\n        <div class=\"table-responsive\">\n            <table class=\"table\" style=\"min-width:840px;\">\n                <thead>\n                    <tr>\n                        <th scope=\"col\">#</th>\n                        <th scope=\"col\">${ __html(\"Product\") }</th>\n                        <th scope=\"col\">${ __html(\"Price\") }</th>\n                        <th scope=\"col\">${ __html(\"Qty\") }</th>\n                        <th scope=\"col\"><div class=\"${ this._this.state.order.entity == \"individual\" ? \"text-end\" : \"text-start\" }\">${ __html(\"Total\") }</div></th>\n                        <th scope=\"col\" class=\"${ this._this.state.order.entity == \"individual\" ? \"d-none\" : \"\" }\">${ __html(\"Tax\") } / ${ __html(\"Code\") }</th>\n                        <th scope=\"col\" class=\"${ this._this.state.order.entity == \"individual\" ? \"d-none\" : \"\" }\"><div class=\"text-end\">${ __html(\"Total with tax\") }</div></th>\n                    </tr>\n                </thead>\n                <tbody>\n        `;\n\n        // iterate order items\n        this._this.state.order.items.forEach((item, i) => {\n\n            item.updated = 1;\n\n            if(!item.tax_id) item.tax_id = \"\";\n            total += makeNumber(item.total);\n            total_with_tax += makeNumber(item.total * (item.tax_id.length == 4 ? 1 : 1.21));\n\n            html += `\n                <tr class=\"${ i == this._this.state.order.items.length-1 ? \"border-secondary\": \"\" }\">\n                    <th scope=\"row\">${ i+1 }</th>\n                    <td>\n                        <a href=\"#\" class=\"preview-order-item link-dark\" data-i=\"${ attr(i) }\" data-id=\"${ attr(item._id) }\" data-preview=\"order\">          \n                            <div class=\"timgc d-inline-block me-2\" style=\"width:25px;\">\n                                <span><img src=\"${ CDN }S${ spaceID() }/sketch-${ item._id }-1-100x100.jpeg?${ item.updated }\" data-srcset=\"${ CDN }S${ spaceID() }/sketch-${ item._id }-1-100x100.jpeg?${ item.updated }\" class=\"img-fluid rounded\" alt=\"Product placeholder\" srcset=\"${ CDN }S${ spaceID() }/sketch-${ item._id }-1-100x100.jpeg?${ item.updated }\"></span>\n                            </div>${ item.title } ${ item.coating } ${ item.color }\n                        </a>\n                        <div class=\"form-text\">${ item.note }</div>\n                    </td>\n                    <td>${ priceFormat(this._this, item.price) }</td>\n                    <td>${ item.qty }</td>\n                    <td class=\"${ this._this.state.order.entity == \"individual\" ? \"text-end\" : \"text-start\" }\">${ priceFormat(this._this, item.total) }</td>\n                    <td class=\"${ this._this.state.order.entity == \"individual\" ? \"d-none\" : \"d-none\" }\">${ item.tax_id }</td>\n                    <td class=\"${ this._this.state.order.entity == \"individual\" ? \"d-none\" : \"\" }\">${ item.tax_id.length == 4 ? \"ANM / \" + item.tax_id: \"21%\" }</td>\n                    <td class=\"text-end ${ this._this.state.order.entity == \"individual\" ? \"d-none\" : \"\" }\">${ priceFormat(this._this, item.total * (item.tax_id.length == 4 ? 1 : 1.21)) }</td>\n                </tr>\n            `;\n        });\n\n        console.log(this._this.state.order.price);\n\n        // vat\n        if(this._this.state.order.entity == \"individual\"){\n\n            \n            // total\n            html += `\n            <tr>\n                <td class=\"text-end fs-5\" colspan=\"5\">${ __html(\"Total\") } ${ priceFormat(this._this, this._this.state.order.price.total) }</td>\n            </tr>\n            `;\n\n            // vat\n            html += `\n            <tr>\n                <td class=\"text-end fs-5\" colspan=\"5\">${ __html(\"VAT 21%\") } ${ priceFormat(this._this, this._this.state.order.price.total * 0.21) }</td>\n            </tr>\n            `;\n\n            // grand total\n            html += `\n                <tr>\n                    <td class=\"text-end fs-3\" colspan=\"5\">${ __html(\"Grand total\") } ${ priceFormat(this._this, this._this.state.order.price.total + this._this.state.order.price.total * 0.21) }</td>\n                </tr>\n                `;\n        }\n\n        // vat\n        if(this._this.state.order.entity == \"company\"){\n\n            // total\n            html += `\n            <tr class=\"border-top\">\n                <td class=\"text-start fs-5\" colspan=\"1\"></td>\n                <td class=\"text-start fs-5\" colspan=\"1\"></td>\n                <td class=\"text-start fs-5\" colspan=\"1\"></td>\n                <td class=\"text-start fs-5\" colspan=\"1\"></td>\n                <td class=\"text-start\" colspan=\"1\">${ priceFormat(this._this, total) }</td>\n                <td class=\"text-end\" colspan=\"2\">${ priceFormat(this._this, total_with_tax) }</td>\n            </tr>\n            <td class=\"text-end fs-5\" colspan=\"7\">${ __html(\"Grand total\") } ${ priceFormat(this._this, total_with_tax) }</td>\n\n            `;\n        }\n\n\n        html += `\n                </tbody>\n            </table>      \n        </div>  \n        `;\n\n        document.querySelector('#contents').innerHTML = html;\n\n        onClick(\".preview-order-item\", (e) => {\n\n        });\n    }\n\n    /**\n     * Render order client requisites\n     * \n     * @returns {Boolean} - true\n     */\n    renderClient = () => {\n\n        let html = `\n\n        <div class=\"my-3\">\n            <h5 class=\"card-title\">${ __html(\"From\") }</h5>\n            <div class=\"card-text\">${ this._this.state.order.from }</div>\n            <div class=\"card-text\">${ this._this.state.order.entity }</div>\n            <div class=\"card-text\">${ this._this.state.order.email }</div>\n            <div class=\"card-text\">${ this._this.state.order.phone }</div>\n            <div class=\"card-text\">${ this._this.state.order.notes }</div>\n        </div>\n\n        `;\n\n        return html;\n    }\n\n    /**\n     * Init cart listeners\n     * \n     * @returns {Boolean} - true\n     */\n    initListeners = () => {\n\n        let _this = this._this;\n\n        // modal order item preview button\n        onClick('.preview-order-item', this.itemPreview);\n\n        \n        return  true;\n    }\n\n    /**\n     * Preview item modal\n     * \n     */\n    itemPreview = (e) => {\n\n        e.preventDefault();\n\n        let i = e.currentTarget.dataset.i;\n        let id = e.currentTarget.dataset.id;\n        \n\n        document.querySelector(\".modal .btn-secondary\").innerHTML = __html('Close');\n        // document.querySelector(\".modal .btn-primary\").innerHTML = __html('Update cart');\n\n        this._this.state.item = this._this.state.order.items[i];\n        this._this.state.item.N = parseInt(i) + 1;\n        this._this.state.item.title = this._this.state.item.title;\n\n        // set ordered perameters\n        this._this.state.item.input_fields.forEach(field => {\n\n            field.default = parseFloat(this._this.state.item.input_fields_values['input' + field.label]);\n\n        });\n\n        console.log(this._this.state.item);\n        \n        this._this.state.bc = [];\n\n        this._this.state.modal = document.querySelector(\".modal-item\");\n        this._this.state.modal.cont = new bootstrap.Modal(this._this.state.modal);\n        this._this.state.modal.cont.show();\n        this._this.state.item_parent = null;\n\n        // order preview mode\n        this._this.state.item_preview = e.currentTarget.dataset.preview;\n\n        productModal.render(this._this);\n\n        document.querySelector(\".modal .btn-primary\").classList.add('d-none');\n    }\n}","import { onClick, __, __html, __attr, __init, attr, parseApiError, hideLoader } from '@kenzap/k-cloud';\nimport { Util } from \"../_/_cart_util.js\"\nimport { spaceID, priceFormat, onlyNumbers, mt, API_KEY, randomString, timeConverterAgo } from \"../_/_helpers.js\"\nimport { productModal } from \"../_/_modal_product.js\"\n\nexport class OrderList{\n    \n    constructor(_this, type) {\n \n        this._this = _this;\n\n        this.type = type;\n\n        this.getOrderList(type);\n    }\n\n    /**\n     * Get cart listeners\n     * \n     * @param {String} - order id\n     * @returns {Boolean} - true\n     */\n     getOrderList = (type) => {\n      \n        // check locale\n        let locale = localStorage.locale ? localStorage.locale : \"lv\";\n        let order_list = localStorage.getItem('sk-design-orders') ? JSON.parse(localStorage.getItem('sk-design-orders')) : [];\n\n        // console.log(order_list);\n        // console.log(order_list.reverse());\n\n        // do API query\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: {\n                'Accept': 'application/json',\n                'Content-type': 'application/x-www-form-urlencoded',\n                'Authorization': 'Bearer KYSh2L3rH7egsE7CBOr1OyYUwqwC2wi8k5jcSiYQCFnUHN3aKjRpXxzD6PzRakp0',\n                // 'Kenzap-Token': config.token,\n                'Kenzap-Sid': spaceID(),\n            },\n            body: JSON.stringify({\n                query: {\n                    orders: {\n                        type:       'find',\n                        key:        'ecommerce-order',\n                        id:         order_list,\n                        limit:      10,\n                        fields:     ['_id', 'id', 'items', 'from', 'entity', 'sdesc', 'price', 'total_all', 'email', 'phone', 'notes', 'status', 'updated'],\n                    },\n                    settings: {\n                        type:       'get',\n                        key:        'ecommerce-settings',\n                        fields:     ['currency', 'currency_symb', 'currency_symb_loc', 'tax_calc', 'tax_auto_rate', 'tax_rate', 'tax_display'],\n                    },\n                    sk_settings: {\n                        type:       'get',\n                        key:        'sk-settings',\n                        fields:     ['price'],\n                    },\n                    locale: {\n                        type:       'locale',\n                        locales: [\n                            {\n                                key: 'sk-design',\n                                source: 'extension',\n                                locale: locale,   \n                            }, \n                            {\n                                key: 'ecommerce',\n                                source: 'extension',\n                                locale: locale,\n                            },\n                            {\n                                key: 'ecommerce',\n                                source: 'content',\n                                locale: locale,\n                            }\n                        ]\n                    }\n                }\n            }) \n        })\n        .then(response => response.json())\n        .then(response => {\n\n            // hide UI loader\n            hideLoader();\n \n            if(response.success){\n\n                // console.log(response);\n\n                this._this.state.meta = response.meta;\n                this._this.state.orders = response.orders.reverse();\n                this._this.state.settings = response.settings;\n                this._this.state.sk_settings = response.sk_settings;\n\n                // preload translations\n                __init(response.locale);\n\n                if(this._this.state.orders) if(this._this.state.orders.length == 0){ \n                    \n                    // alert( __(\"Order does not exist or was removed\") ); \n                    let html = \"\";\n                    \n                    html += `\n                    <div class=\" text-center\" >\n                        <div class=\"card-header\">   \n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"64\" height=\"64\" fill=\"currentColor\" class=\"bi bi-check-circle text-danger my-1\" viewBox=\"0 0 16 16\">\n                                <path d=\"M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z\"/>\n                                <path d=\"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z\"/>\n                            </svg>\n                        </div>\n                        <div class=\"card-body\">\n                            <h5 class=\"card-title\">${ __html(\"My Orders\") }</h5>\n                            <p class=\"card-text\">${ __html(\"No orders to display yet.\") }</p>\n                            <a href=\"/\" class=\"btn btn-outline-danger btn-lg\" >\n                                ${ __html(\"view products\") }\n                            </a>\n                        </div>\n                        <div class=\"card-footer text-muted d-none\">${ __html(\"Recent orders\") }</div>\n                    </div>\n                    <div class=\"table-responsive\">\n                        <table class=\"table\" style=\"min-width:700px;\">\n                            <thead>\n                                <tr>\n                                    <th scope=\"col\">${ __html(\"ID\") }</th>\n                                    <th scope=\"col\">${ __html(\"Products\") }</th>\n                                    <th scope=\"col\">${ __html(\"Ordered\") }</th>\n                                    <th scope=\"col text-end\"></th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr>\n                                    <td class=\"text-center pb-5\" colspan=\"5\">${ __html(\"No orders to display yet.\") }</td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                    `;\n\n                    document.querySelector('#contents').innerHTML = html;\n\n    \n                }else{\n\n                    this.renderOrders();\n                }\n\n            }else{\n\n                parseApiError(response);\n            }\n\n            // init header\n            this._this.initHeader(response);\n\n            // init footer\n            this._this.initFooter();\n\n            // init general listeners\n            this._this.initListeners();\n\n            // init this page listeners\n            this.initListeners();\n        })\n        .catch(error => { parseApiError(error); });\n    }\n\n    /**\n     * Render HTML part of the order\n     * \n     * @returns {Boolean} - true\n     */\n    renderOrders = () => {\n\n        // parse URL\n        let urlParams = new URLSearchParams(window.location.search);\n        let orders = urlParams.get('orders') ? urlParams.get('orders') : \"\";\n        let html = \"\";\n        if(orders == \"recent\"){\n\n            html += `\n\n            <div class=\" text-center\">\n                <div class=\"card-header\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"64\" height=\"64\" fill=\"currentColor\" class=\"bi bi-check-circle text-danger my-1\" viewBox=\"0 0 16 16\">\n                        <path d=\"M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z\"/>\n                        <path d=\"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z\"/>\n                    </svg>\n                </div>\n                <div class=\"card-body my-2\">\n                    <h5 class=\"card-title\">${ __html(\"My Orders\") }</h5>\n                    <p class=\"card-text\">${ __html(\"List of recently placed orders.\") }</p>\n                    <a href=\"https://wa.me/37126443313\" target=\"_blank\" class=\"btn btn-danger \">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-whatsapp mb-1 me-1\" viewBox=\"0 0 16 16\">\n                            <path d=\"M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z\"/>\n                        </svg> ${ __html(\"Ask question\") }\n                    </a>\n                </div>\n                <div class=\"card-footer text-muted\">${ __html(\"Recent orders\") }</div>\n            </div>\n\n            `;\n        }\n\n        html += `\n        <div class=\"table-responsive\">\n            <table class=\"table\" style=\"min-width:700px;\">\n                <thead>\n                    <tr>\n                        <th scope=\"col\">${ __html(\"ID\") }</th>\n                        <th scope=\"col\">${ __html(\"Products\") }</th>\n                        <th scope=\"col\">${ __html(\"Ordered\") }</th>\n                        <th scope=\"col text-end\"></th>\n                    </tr>\n                </thead>\n                <tbody>\n        `;\n    \n        // iterate order items\n        this._this.state.orders.forEach((order, i) => {\n\n            // item.updated = 1;\n\n            let items = \"\";\n            order.items.forEach((item, ii) => {\n\n                items += `\n                    ${ item.title } ${ item.coating } ${ item.color }</br>\n                `;\n            });\n\n            html += `\n                <tr>\n                    <th scope=\"row\"><a href=\"?order=${ order._id }\">#${ order.id }</a></th>\n                    <td style=\"font-size: 0.82rem;\">\n                    ${ items }\n                    </td>\n                    <td>${ timeConverterAgo(__, this._this.state.meta.time, order.updated) }</td>\n                    <td class=\"text-end\"><a href=\"?order=${ order._id }\" class=\"pt-2\"><button type=\"button\" class=\"btn btn-outline-danger btn-sm\">${ __html(\"view order\") }</button></a></td>\n                </tr>\n            `;\n\n            // totals\n        html += `\n        <tr>\n            <td class=\"text-end fs-4 pb-5\" colspan=\"5\">${ __html(\"Total\") } ${ priceFormat(this._this, order.total_all) }</td>\n        </tr>\n        `;\n        });\n\n\n\n        html += `\n                </tbody>\n            </table>      \n        </div>  \n        `;\n\n        document.querySelector('#contents').innerHTML = html;\n\n        onClick(\".preview-order-item\", (e) => {\n\n        });\n    }\n\n    /**\n     * Init cart listeners\n     * \n     * @returns {Boolean} - true\n     */\n    initListeners = () => {\n\n        let _this = this._this;\n\n        // modal order item preview button\n        onClick('.preview-order-item', this.itemPreview);\n\n        return  true;\n    }\n\n    /**\n     * Preview item modal\n     * \n     */\n    itemPreview = (e) => {\n\n        e.preventDefault();\n\n        let i = e.currentTarget.dataset.i;\n        let id = e.currentTarget.dataset.id;\n        \n\n        document.querySelector(\".modal .btn-secondary\").innerHTML = __html('Close');\n        // document.querySelector(\".modal .btn-primary\").innerHTML = __html('Update cart');\n\n        this._this.state.item = this._this.state.order.items[i];\n        this._this.state.item.N = parseInt(i) + 1;\n        this._this.state.item.title = this._this.state.item.title;\n\n        // set ordered perameters\n        this._this.state.item.input_fields.forEach(field => {\n\n            field.default = parseFloat(this._this.state.item.input_fields_values['input' + field.label]);\n\n        });\n\n        console.log(this._this.state.item);\n        \n        this._this.state.bc = [];\n\n        this._this.state.modal = document.querySelector(\".modal-item\");\n        this._this.state.modal.cont = new bootstrap.Modal(this._this.state.modal);\n        this._this.state.modal.cont.show();\n        this._this.state.item_parent = null;\n\n        // order preview mode\n        this._this.state.item_preview = e.currentTarget.dataset.preview;\n\n        productModal.render(this._this);\n\n        document.querySelector(\".modal .btn-primary\").classList.add('d-none');\n    }\n}","// js dependencies\nimport { headers, showLoader, hideLoader, onClick, onChange, onKeyUp, simulateClick, initFooter, initBreadcrumbs, parseApiError, getCookie, getSiteId, link, toast, __, __init, __html, __attr, html, attr, setCookie } from '@kenzap/k-cloud';\nimport { CDN, onlyNumbers, makeNumber, degToRad, priceFormat, stringToHash, lazyLoad, spaceID, API_KEY, randomString, sortAlphaNum } from \"../_/_helpers.js\"\nimport { HTMLContent } from \"../_/_cnt_www.js\"\nimport { Cart } from \"../_/_cart.js\"\nimport { Order } from \"../_/_order.js\"\nimport { OrderList } from \"../_/_order_list.js\"\nimport { productModal } from \"../_/_modal_product.js\"\n\n// where everything happens\nconst _this = {\n\n    state: {\n        locale: null,\n        s: \"\", // search param\n        items: [],\n        firstLoad: true,\n        focusOutBlock: false,\n        ajaxQueue: 0,\n        cart: null,\n        order: null,\n        item: null,\n        bc: [],\n        modal: { cont: null },\n        colors: {'RR11': { hex_bg: '#14360f', hex_text: '#ffffff' }, 'RR20': { hex_bg: '#f5f9fc', hex_text: '#000000' }, 'RR21': { hex_bg: '#c0c0c0', hex_text: '#000000' }, 'RR22': { hex_bg: '#878a89', hex_text: '#000000' }, 'RR23': { hex_bg: '#37383d', hex_text: '#ffffff' }, 'RR29': { hex_bg: '#681a11', hex_text: '#ffffff' }, 'RR30': { hex_bg: '#cebb7f', hex_text: '#000000' }, 'RR32': { hex_bg: '#2f2218', hex_text: '#ffffff' }, 'RR33': { hex_bg: '#000000', hex_text: '#ffffff' }, 'RR887': { hex_bg: '#32211f', hex_text: '#ffffff' }, 'RR750': { hex_bg: '#7e2f0d', hex_text: '#ffffff' }, 'RR887': { hex_bg: '#37130d', hex_text: '#ffffff' }, 'RR946': { hex_bg: '#afafaf', hex_text: '#000000' }, '2H3': { hex_bg: '#28292b', hex_text: '#ffffff' }}\n    },\n    init: () => {\n\n        // random user id\n        if(!localStorage.idd) localStorage.idd = randomString(8)+Math.floor(Date.now());\n\n        // parse URL\n        let urlParams = new URLSearchParams(window.location.search);\n\n        // single order page\n        let order_id = urlParams.get('order') ? urlParams.get('order') : \"\";\n        if(order_id.length > 12){ _this.state.order = new Order(_this, order_id); return; }\n\n        // all orders page\n        let orders = urlParams.get('orders') ? urlParams.get('orders') : \"\";\n        if(orders.length > 1){ _this.state.order_list = new OrderList(_this, orders); return; }\n\n        // get locale language\n        _this.state.locale = urlParams.get('lang') ? urlParams.get('lang') : localStorage.locale ? localStorage.locale : \"lv\"; urlParams.set('lang', '');\n\n        // search param\n        _this.state.s = urlParams.get('s') ? urlParams.get('s') : \"\";\n\n        // last cached state\n        if(!localStorage.state_last) localStorage.state_last = 0;\n\n        // restore state\n        if(urlParams.get('cache') != \"clear\" && ((Math.floor(Date.now() / 1000) - localStorage.state_last) < 3600*12 && localStorage.key(\"state\"))){ // && localStorage.key(localStorage.state)\n\n            _this.state = JSON.parse(localStorage.state);\n            _this.state.cached = true;\n        }\n\n        // search param\n        _this.state.s = urlParams.get('s') ? urlParams.get('s') : \"\";\n\n        // render feed page\n        if(_this.state.cached){ _this.getDataParse(_this); return; }\n        \n        // get data + render feed page\n        if(!_this.state.cached){ _this.getData(); return; }\n    },\n    getData: () => {\n\n        // do API query\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: {\n                'Accept': 'application/json',\n                'Content-type': 'application/x-www-form-urlencoded',\n                'Authorization': 'Bearer KYSh2L3rH7egsE7CBOr1OyYUwqwC2wi8k5jcSiYQCFnUHN3aKjRpXxzD6PzRakp0',\n                // 'Kenzap-Token': config.token,\n                'Kenzap-Sid': spaceID(),\n            },\n            body: JSON.stringify({\n                query: {\n                    items: {\n                        type:       'find',\n                        key:        'ecommerce-product',\n                        // id:         id,   \n                        limit:      1000,\n                        fields:     ['_id', 'id', 'title', 'cats', 'modelling', 'tax_id', 'img', 'sdesc', 'status', 'input_fields', 'formula', 'formula_price', 'formula_width', 'formula_length', 'calc_price', 'var_price', 'parts', 'updated'],\n                        term:       [\n                            {\n                                type:       'string',\n                                field:      'status',\n                                value:      '1',\n                                relation:   '='\n                            }\n                        ],\n                        sortby:     [\n                            {\n                                field: 'title',\n                                order: 'ASC'\n                            }\n                        ]\n                    },\n                    settings: {\n                        type:       'get',\n                        key:        'ecommerce-settings',\n                        fields:     ['currency', 'currency_symb', 'currency_symb_loc', 'tax_calc', 'tax_auto_rate', 'tax_rate', 'tax_display'],\n                    },\n                    sk_settings: {\n                        type:       'get',\n                        key:        'sk-settings',\n                        fields:     ['price'],\n                    },\n                    locale: {\n                        type:       'locale',\n                        locales: [\n                            {\n                                key: 'sk-design',\n                                source: 'extension',\n                                locale: _this.state.locale,   \n                            }, \n                            {\n                                key: 'sk-design',\n                                source: 'content',\n                                locale: _this.state.locale,   \n                            }, \n                            {\n                                key: 'ecommerce',\n                                source: 'extension',\n                                locale: _this.state.locale,\n                            },\n                            {\n                                key: 'ecommerce',\n                                source: 'content',\n                                locale: _this.state.locale,\n                            }\n                        ]\n                    }\n                }\n            }) \n        })\n        .then(response => response.json())\n        .then(response => {\n\n            // hide UI loader\n            hideLoader();\n\n            if(response.success){\n\n                // cache data\n                _this.state.response = response;\n                _this.state.items = response.items;\n                _this.state.settings = response.settings;\n                _this.state.sk_settings = response.sk_settings;\n\n                localStorage.state = JSON.stringify(_this.state);\n                localStorage.state_last = Math.floor(Date.now() / 1000);\n\n                _this.getDataParse(_this);\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => { parseApiError(error); });\n    },\n    getDataParse: (_this) => {\n\n        hideLoader();\n\n        // preload translations\n        __init(_this.state.response.locale);\n\n        // init header\n        _this.initHeader(_this.state.response);\n\n        // get core html content \n        _this.loadHomeStructure();  \n\n        // render page\n        _this.renderPage(_this.state.response);\n\n        // render cart\n        _this.state.cart = new Cart(_this);\n\n        // init footer\n        _this.initFooter();\n\n        // init listeners\n        _this.initListeners();\n\n        // first load\n        _this.state.firstLoad = false;\n    },\n    renderPage: (response) => {\n\n        let d = document;\n\n        // iterate locales\n        _this.state.items.forEach((item, i) => {\n\n            _this.state.items[i].title_or = _this.state.items[i].title,\n            _this.state.items[i].cats_or = _this.state.items[i].cats,\n\n            _this.state.items[i].cats.forEach((cat, c) => {\n                _this.state.items[i].cats[c] = __(cat);\n            });\n\n            _this.state.items[i].title = __(_this.state.items[i].title)\n        });\n\n        // sort title as numbers. Ex.: Parapet type 10, Parapet type 11\n        _this.state.items.sort(sortAlphaNum);\n        \n        // url based search\n        // console.log(_this.state.s);\n        if(_this.state.s.length>0) setTimeout(() => { document.querySelector('#search').value = (_this.state.s); _this.search(); },100);\n    },\n    initHeader: (response) => {\n\n        // navigation menu\n        setTimeout(() => {\n\n            document.querySelector(\".menu-cont ul\").innerHTML = `\n                <li>\n                    <a href=\"/\">${ __html(\"Products\") }</a>\n                </li>\n                <li>\n                    <a href=\"/?orders=recent\">${ __html(\"My Orders\") }</a>\n                </li>\n                <li>\n                    <a target=\"_blank\" href=\"https://www.skardanams.com/privacy-policy/\">${ __html(\"Privacy\") }</a>\n                </li>\n                <li>\n                    <a target=\"_blank\" href=\"https://www.skardanams.com/documentation/\">${ __html(\"Documentation\") }</a>\n                </li>\n                <li>\n                    <a target=\"_blank\" href=\"https://www.skardanams.lv/kontakti/\">${ __html(\"Contact us\") }</a>\n                </li>\n            `;     \n            \n            document.querySelector(\".menu-cont\").classList.remove(\"d-none\");\n        },520);\n\n        // scrollEvents\n        document.addEventListener(\"scroll\", _this.listeners.scrollEvents);\n    },\n    initListeners: () => {\n\n        // render modal\n        // onClick('.item', _this.listeners.renderModal);\n\n        if(!_this.state.firstLoad) return;\n        \n        // tag listener\n        onClick('.slideset a', _this.listeners.openTag);\n        \n        // clean search input\n        onClick('.clear-search', _this.listeners.clearSearch);\n        \n        // accordion click\n        onClick('.accordion-button', _this.listeners.openCat);\n        \n        // search listener\n        onKeyUp('#search', _this.search);\n\n        // search event\n        onClick('#search', (e) => {\n\n            gtag('event', 'Search', {'event_category': 'search', 'page': 'feed', 'source': 'input'});\n        });\n\n        // open first tab\n        let link = document.querySelector('.accordion-button.first');\n        if(link) simulateClick(link);\n            \n        // modal success button\n        onClick('.modal .btn-primary', _this.listeners.modalSuccessBtn);\n\n        // lang picker\n        onClick('.bi-globe', (e) => {\n\n            gtag('event', 'Language', {'event_category': 'picker', 'page': 'feed', 'source': 'button'});\n        });\n        \n        // language picker\n        onClick('.sw-ln', _this.listeners.changeLanguage);\n\n        // image async loading\n        document.addEventListener(\"scroll\", lazyLoad);\n        window.addEventListener(\"resize\", lazyLoad);\n        window.addEventListener(\"orientationchange\", lazyLoad);\n\n        // side menu\n        const burger = document.querySelector('.burger');\n        const menu_close = document.querySelector('.menu-close');\n        const nav = document.querySelector('nav');\n        \n        // toggle menu visibility\n        burger.addEventListener('click', e => {\n            burger.dataset.state === 'closed' ? burger.dataset.state = \"open\" : burger.dataset.state = \"closed\";\n            nav.dataset.state === \"closed\" ? nav.dataset.state = \"open\" : nav.dataset.state = \"closed\";\n        });\n\n        // close menu\n        menu_close.addEventListener('click', e => {\n\n            burger.dataset.state = \"closed\";\n            nav.dataset.state = \"closed\";\n        });\n\n        // open feed row\n        let urlParams = new URLSearchParams(window.location.search);\n        let _id = urlParams.get('_id') ? urlParams.get('_id') : \"\";\n\n        if(_id){\n\n            document.querySelector('#pseudo').dataset.id = _id;\n            document.querySelector('#pseudo').dataset.preview = \"feed\";\n            document.querySelector('#pseudo').dataset.i = 0;\n\n            if(document.querySelector('#pseudo')) simulateClick(document.querySelector('#pseudo'));\n        }\n\n        // hisotry state chnaged\n        window.addEventListener('popstate', function(event) {\n          \n            setTimeout(() => {\n\n                let urlParams = new URLSearchParams(window.location.search);\n                let s = urlParams.get('s') ? urlParams.get('s') : \"\";\n    \n                document.querySelector('#search').value = s;\n    \n                _this.search(); \n            \n            },100);\n\n        }, false);\n    },\n    listeners: {\n\n        renderModal: (e) => {\n\n            let i = e.currentTarget.dataset.i;\n            let id = e.currentTarget.dataset.id;\n            let cid = e.currentTarget.dataset.cid;\n            _this.state.item_preview = e.currentTarget.dataset.preview;\n            _this.state.item_cid = cid;\n\n            let time = new Date((new Date().setHours(new Date().getHours() - (new Date().getTimezoneOffset() / 60)))).toISOString();\n            \n            // console.log(id);\n\n            document.querySelector(\".modal .btn-secondary\").innerHTML = __html('Close');\n            document.querySelector(\".modal .btn-primary\").classList.remove('d-none');\n\n            // cart sketch\n            if(_this.state.item_preview == 'cart'){\n\n                document.querySelector(\".modal .btn-primary\").classList.remove('btn-danger');\n                document.querySelector(\".modal .btn-primary\").innerHTML = __html('Update cart');\n\n                _this.state.item = _this.state.cart.getCart().items[i];\n                \n                // metrics\n                gtag('event', 'Product', {'event_category': 'preview', 'page': 'feed', 'source': 'cart', 'event_label':_this.state.item._id, 'time':time, 'idd':localStorage.idd, 'title':_this.state.item.title});\n            }\n            \n            // new sketch\n            if(_this.state.item_preview == 'feed'){\n\n                document.querySelector(\".modal .btn-primary\").classList.add('btn-danger');\n                document.querySelector(\".modal .btn-primary\").innerHTML = __html('Add to cart');\n\n                _this.state.item = _this.state.items.filter(item => { return item._id == id; })[0];\n                _this.state.item.qty = 1;\n\n                // metrics\n                gtag('event', 'Product', {'event_category': 'preview', 'page': 'feed', 'source': 'feed', 'event_label':_this.state.item._id, 'time':time, 'idd':localStorage.idd, 'title':_this.state.item.title});\n            }\n\n            _this.state.bc = [];\n\n            _this.state.modal = document.querySelector(\".modal-item\");\n            _this.state.modal.cont = new bootstrap.Modal(_this.state.modal);\n            _this.state.modal.cont.show();\n            _this.state.item_parent = null;\n\n            productModal.render(_this);\n        },\n\n        clearSearch: (e) => {\n\n            document.querySelector(\"#search\").value = \"\";\n\n            _this.search();\n        },\n\n        refreshSketchPrice: () => {\n\n            let coatingPrice = makeNumber(document.querySelector(\".input-price\").dataset.pricem2); // per m2\n            let price = _this.getPrice(_this, coatingPrice); \n\n            document.querySelector(\".price\").value = priceFormat(_this, price.total);\n            document.querySelector(\".price\").dataset.price = makeNumber(price.price);\n            document.querySelector(\".price\").dataset.total = makeNumber(price.total);\n            document.querySelector(\".price\").dataset.width = makeNumber(price.formula_width);\n            document.querySelector(\".price\").dataset.length = makeNumber(price.formula_length);\n            document.querySelector(\".input-price\").dataset.area = \"\";\n\n            // calc price options\n            switch(_this.state.item.calc_price){\n\n                case 'variable': \n                    document.querySelector(\".price-desc\").innerHTML = '<div class=\"ms-3 p-0\">'+__html(\"Variable price\")+' ' + priceFormat(_this, price.total) + '</div>';\n                break;\n                case 'formula':\n                default:\n\n                    let area = eval(price.formula);\n\n                    document.querySelector(\".price-desc\").innerHTML = '\\\n                    <ul class=\"ms-3 p-0\">\\\n                        <li>' + document.querySelector(\".qty\").value + ' x ' + (area / 1000000) + ' &#13217; x ' + (coatingPrice) + ' = ' + priceFormat(_this, (parseFloat(document.querySelector(\".qty\").value) * (eval(price.formula) / 1000000) * coatingPrice)) + '</li>\\\n                        <li>' + document.querySelector(\".qty\").value + ' x ' + priceFormat(_this, eval(price.formula_price)) + ' = ' + priceFormat(_this, parseFloat(document.querySelector(\".qty\").value) * eval(price.formula_price)) + '</li>\\\n                    </ul>';\n\n                    document.querySelector(\".input-price\").dataset.area = area;\n                break;\n            }\n        },\n\n        focusListener: (e) => {\n\n            for(let el of document.querySelectorAll(\".svg-input input\")){\n\n                el.addEventListener(\"focus\", (e) => {\n                \n                    let id = e.currentTarget.parentElement.dataset.id;\n\n                    setTimeout((el, id) => {\n\n                        // deemphasize\n                        for(let svginp of document.querySelectorAll(\".svg-input\")){   \n                            svginp.classList.add('deemphasize');\n                        };\n\n                        for(let svgg of document.querySelectorAll(\"#svg g\")){   \n                            svgg.classList.add('deemphasize');\n                        };\n                        \n                        document.querySelector('#svg g[data-id=\"'+id+'\"]').classList.remove('deemphasize');\n                        document.querySelector('.svg-input[data-id=\"'+id+'\"]').classList.remove('deemphasize');\n\n                        // console.log('focus in');\n                        _this.state.focusOutBlock = true;\n\n                        setTimeout(() => { _this.state.focusOutBlock = false; }, 100);\n\n                    }, 1, el, id);\n                });\n\n                el.addEventListener(\"focusout\",  (e) => {\n                 \n                    // if(_this.state.focusOutBlock) return;\n\n                    setTimeout((el) => {\n\n                        if(_this.state.focusOutBlock) return;\n\n                        for(let svginp of document.querySelectorAll(\".svg-input\")){   \n                            svginp.classList.remove('deemphasize');\n                        };\n\n                        for(let svgg of document.querySelectorAll(\"#svg g\")){   \n                            svgg.classList.remove('deemphasize');\n                        };\n\n                        // console.log('focus out');\n                    }, 5, el);\n                });\n            }\n        },\n\n        openTag: (e) => {\n\n            e.preventDefault();\n\n            document.querySelector('#search').value = e.currentTarget.innerHTML;\n\n            _this.clearActiveTags();\n\n            e.currentTarget.classList.add('active');\n\n            _this.search();\n        },\n\n        openCat: (e) => {\n\n            let cats = e.currentTarget.dataset.cats.split('|');\n\n            // console.log(cats);\n\n            let html = '';\n\n            _this.state.items.forEach((item, i) => {\n\n                let allow = false;\n                cats.forEach(cat => {\n\n                    // console.log(item);\n                    \n                    if(item.cats.includes(cat)) allow = true;\n\n                });\n\n                if(allow){\n                    \n                    html += _this.structBlock(i, item);\n                }\n            });\n\n            e.currentTarget.parentElement.parentElement.querySelector(\".accordion-body\").innerHTML = html;  \n\n            onClick('.item', _this.listeners.renderModal);\n\n            lazyLoad();\n        },\n\n        /**\n        * Scroll listener. Add/Remove scrolled class to body\n        * @public\n        */\n        scrollEvents: (e) => {\n\n            // console.log(document.documentElement.scrollTop);\n            if(document.documentElement.scrollTop>0){\n\n                document.querySelector(\".logo-only-header\").classList.add('scrolled');\n            }else{\n\n                document.querySelector(\".logo-only-header\").classList.remove('scrolled');\n            }\n        },\n\n        changeLanguage: (e) => {\n\n            e.preventDefault();\n\n            _this.state.locale = e.currentTarget.dataset.ln;\n\n            localStorage.state_last = 0;\n\n            // Construct URLSearchParams object instance from current URL querystring.\n            var queryParams = new URLSearchParams(window.location.search);\n            \n            // Set new or modify existing parameter value. \n            //queryParams.set(\"myParam\", \"myValue\");\n            queryParams.set(\"lang\", _this.state.locale);\n            queryParams.delete(\"s\");\n\n            localStorage.locale = _this.state.locale;\n            \n            // Replace current querystring with the new one.\n            history.replaceState(null, null, \"?\"+queryParams.toString());\n\n            // remove lang from url if present\n            \n            // _this.state.locale\n\n            // console.log(_this.state.locale);\n\n            // _this.getData();\n\n            location.reload();\n\n            // setCookie(\"locale\", lang);\n        },\n\n        modalSuccessBtn: (e) => {\n            \n            _this.listeners.modalSuccessBtnFunc(e);\n        },\n\n        modalSuccessBtnFunc: null\n    },\n    getPrice: (_this, coatingPrice) => {\n\n        // console.log('getPrice');\n        let obj = {};\n\n        switch(_this.state.item.calc_price){\n\n            case 'variable':\n                \n                obj.price = makeNumber(coatingPrice);\n                obj.total = obj.price * parseFloat(document.querySelector(\".qty\").value);\n                obj.formula_width = _this.state.item.formula_width ? _this.state.item.formula_width : '0';\n                obj.formula_length = _this.state.item.formula_length ? _this.state.item.formula_length : '0';\n                \n            break;\n            case 'formula':\n            default:\n\n                obj.formula = _this.state.item.formula;\n                obj.formula_price = _this.state.item.formula_price ? _this.state.item.formula_price : '0';\n                obj.formula_width = _this.state.item.formula_width ? _this.state.item.formula_width : '0';\n                obj.formula_length = _this.state.item.formula_length ? _this.state.item.formula_length : '0';\n\n                // selected coating price\n                obj.formula = obj.formula.replaceAll(\"COATING\", coatingPrice);\n                obj.formula_price = obj.formula_price.replaceAll(\"COATING\", coatingPrice);\n        \n                for(let price of _this.state.sk_settings.price){\n        \n                    if(price.id.length > 0){\n        \n                        obj.formula = obj.formula.replaceAll(price.id, parseFloat(price.price));\n                        obj.formula_price = obj.formula_price.replaceAll(price.id, parseFloat(price.price));\n                    }\n                }\n        \n                for(let el of document.querySelectorAll(\".svg-input input\")){   \n        \n                    let label = el.id.replace('input', '');\n                    let value = parseFloat(el.value);\n        \n                    obj.formula = obj.formula.replaceAll(label, value);\n                    obj.formula_price = obj.formula_price.replaceAll(label, value);\n                    obj.formula_width = obj.formula_width.replaceAll(label, value);\n                    obj.formula_length = obj.formula_length.replaceAll(label, value);\n\n                    // if(urlParams.get('input_fields_values')) input_fields_values = JSON.parse(unescape(urlParams.get('input_fields_values')));\n                    // if(input_fields_values) _this.state.item.input_fields.forEach((field, i)=>{\n        \n                    //     field.default = input_fields_values['input'+field.label] ? input_fields_values['input'+field.label] : field.default;\n                    //     // _this.state.item.formula_width = _this.state.item.formula_width.replaceAll(field.label, field.default);\n                    //     // _this.state.item.formula_length = _this.state.item.formula_length.replaceAll(field.label, field.default);\n                    // });\n        \n                    // _this.state.item.formula_width = eval(_this.state.item.formula_width);\n                    // _this.state.item.formula_length = eval(_this.state.item.formula_length);\n                }\n        \n                // evaluate final calculations\n                obj.price = makeNumber((eval(obj.formula) / 1000000 * coatingPrice)) + makeNumber(eval(obj.formula_price));\n                obj.total = obj.price * parseFloat(document.querySelector(\".qty\").value);\n                obj.formula_width = eval(obj.formula_width);\n                obj.formula_length = eval(obj.formula_length);\n\n                // console.log(obj);\n            break;\n        }\n\n        return obj;\n    },\n    getMinPrice: (item) => {\n\n        let obj = { COATING: 1 };\n        // console.log(item);\n        // calc price options\n        switch(item.calc_price){\n\n            case 'complex': \n\n                obj.price = 0;\n                obj.total = 0;\n                obj.type = 'complex';\n\n                return '<div class=\"badge rounded-pill bg-danger fw-bold mt-3\" style=\"font-size: 1rem;\">'+ __html('Calculate') +'</div>'; // <span style=\"font-size:0.8rem\">no</span>\n            break;\n            case 'variable': \n                            \n                let min_price = parseFloat(item.var_price[0].price);\n                item.var_price.filter(price => {\n\n                    if(parseFloat(price.price) < min_price) min_price = parseFloat(price.price);\n                });\n\n                obj.price = makeNumber(min_price);\n                obj.total = obj.price;\n                obj.type = 'variable';\n\n                return '<div class=\"badge rounded-pill bg-danger fw-bold mt-3\" style=\"font-size: 1.1rem;\"><span style=\"font-size:0.8rem\">no</span> ' + priceFormat(_this, obj.total) + '</div>';\n            break;\n            case 'formula':\n            default:\n\n                obj.formula = item.formula;\n                obj.formula_price = item.formula_price;\n        \n                for(let price of _this.state.sk_settings.price){\n\n                    // ZN typically has the lowest price range\n                    if(price.id == \"ZN\"){\n        \n                        obj.COATING = parseFloat(price.price);\n                    }\n        \n                    // find price clasificators\n                    if(price.id.length > 0){\n        \n                        obj.formula = obj.formula.replaceAll(price.id, parseFloat(price.price));\n                        obj.formula_price = obj.formula_price.replaceAll(price.id, parseFloat(price.price));\n                    }\n                }\n        \n                // selected coating price\n                obj.formula = obj.formula.replaceAll(\"COATING\", obj.COATING);\n                obj.formula_price = obj.formula_price.replaceAll(\"COATING\", obj.COATING);\n            \n                // console.log(obj);\n        \n                // default labels\n                item.input_fields.forEach((field, i) => {\n        \n                    obj.formula = obj.formula.replaceAll(field.label, field.default);\n                    obj.formula_price = obj.formula_price.replaceAll(field.label, field.default);\n                });\n        \n                obj.price = makeNumber((eval(obj.formula) / 1000000 * obj.COATING)) + makeNumber(eval(obj.formula_price));\n                obj.total = obj.price * 1;\n                obj.type = 'formula';\n\n                return '<div class=\"badge rounded-pill bg-danger fw-bold mt-3\" style=\"font-size: 1.1rem;\"><span style=\"font-size:0.8rem\">no</span> ' + priceFormat(_this, obj.total) + '</div>';\n            break;\n        }\n\n        \n    },\n    loadColors: (parent) => {\n\n        let urlParams = new URLSearchParams(window.location.search);\n\n        let color_options = '', ic = localStorage.getItem('input-color') ? localStorage.getItem('input-color') : \"\";\n\n        // override coating option when preview mode = order\n        if(_this.state.item_preview == \"order\") ic = _this.state.item.color;\n\n        // override coating option when preview mode = order\n        if(_this.state.item_preview == \"cart\") ic = _this.state.item.color;\n\n        // override coating when iframe\n        if(urlParams.get('iframe') && urlParams.get('color')) ic = urlParams.get('color').replace(\"-\",\"\");\n\n        // calc price options\n        switch(_this.state.item.calc_price){\n\n            case 'variable': \n\n                for(let price of _this.state.item.var_price){\n\n                    if(price.public && price.parent == parent && price.title != \"*\"){\n        \n                        color_options += `<option ${ price.title == ic ? \"selected\":\"\" } data-price=\"${ price.price }\" value=\"${ price.title }\">${ __html(price.title) }</option>`; \n                    }\n                }\n\n            break;\n            case 'formula':\n            default:\n\n                for(let price of _this.state.sk_settings.price){\n\n                    if(price.public && price.parent == parent && price.title != \"*\"){\n        \n                        color_options += `<option ${ price.title == ic ? \"selected\":\"\" } data-price=\"${ price.price }\" value=\"${ price.title }\">${ __html(price.title) }</option>`; \n                    }\n                }\n            break;\n        }\n\n        if(color_options != '' && _this.state.item.calc_price != \"complex\"){ document.querySelector(\".input-color-cnt\").classList.remove('d-none'); }\n        if(color_options == ''){ document.querySelector(\".input-color-cnt\").classList.add('d-none'); }\n\n        document.querySelector(\".input-color\").innerHTML = color_options;\n\n        // coating change listener\n        onChange('.input-color', e => {\n\n            _this.loadPrice();\n        });\n        _this.loadPrice();\n    },\n    loadPrice: () =>{\n\n        let el = document.querySelector(\".input-color\");\n\n        // calc price options\n        switch(_this.state.item.calc_price){\n\n            case 'variable':\n\n                // price from color\n                if(el.options[el.selectedIndex]){\n    \n                    document.querySelector(\".input-price\").dataset.pricem2 = el.options[el.selectedIndex].dataset.price;\n                    document.querySelector(\".input-color\").style.background = _this.state.colors[el.options[el.selectedIndex].value].hex_bg;\n                    document.querySelector(\".input-color\").style.color = _this.state.colors[el.options[el.selectedIndex].value].hex_text;\n\n                // price from coating only\n                }else{\n\n                    let el_coating = document.querySelector(\".input-coating\");\n                    let coating = el_coating.options[el_coating.selectedIndex];\n\n                    document.querySelector(\".input-price\").dataset.pricem2 = _this.state.item.var_price.filter(el => { return el.parent == coating.value })[0].price;\n                }\n            break;\n            case 'formula':\n            default:\n\n                // price from color\n                if(el.options[el.selectedIndex]){\n                    \n                    document.querySelector(\".input-price\").dataset.pricem2 = el.options[el.selectedIndex].dataset.price;\n                    document.querySelector(\".input-color\").style.background = _this.state.colors[el.options[el.selectedIndex].value].hex_bg;\n                    document.querySelector(\".input-color\").style.color = _this.state.colors[el.options[el.selectedIndex].value].hex_text;\n\n                // price from coating only\n                }else{\n\n                    let el_coating = document.querySelector(\".input-coating\");\n                    let coating = el_coating.options[el_coating.selectedIndex];\n\n                    document.querySelector(\".input-price\").dataset.pricem2 = _this.state.sk_settings.price.filter(el => { return el.parent == coating.value })[0].price;\n                }\n            break;\n        }\n\n        _this.listeners.refreshSketchPrice();\n    },\n    search: (e) => {\n\n        // set defaults\n        document.querySelector('.search-results').classList.add('d-none');\n        document.querySelector('.accordion').classList.remove('d-none');\n        document.querySelector('.search-title').classList.add('d-none');\n        document.querySelector('.clear-search').classList.remove('d-none');\n\n        let search = document.querySelector('#search').value;\n\n        // Construct URLSearchParams object instance from current URL querystring.\n        // var queryParams = new URLSearchParams(window.location.search);  \n\n        // search is empty\n        if(search.length == 0){\n\n            // update url\n            // queryParams.delete(\"s\");\n            // history.pushState(null, null, \"?\"+queryParams.toString());\n\n            // document.querySelector('.accordion').classList.remove('d-none');\n            document.querySelector('.clear-search').classList.add('d-none');\n            _this.clearActiveTags();\n\n            return;\n        }\n\n        // update url\n        // queryParams.set(\"s\", search);\n        // history.pushState(null, null, \"?\"+queryParams.toString());\n\n        let html = \"\";\n        // console.log('search: ' + search);\n\n        _this.state.items.forEach((item, i) => {\n\n            let allow = false;\n\n            // console.log(\" \"+item.cats.join(\" \").toLowerCase());\n\n            if(\" \"+item.cats.join(\" \").toLowerCase().indexOf(search.toLowerCase())!=-1) allow = true;\n            if(\" \"+item.title.toLowerCase().indexOf(search.toLowerCase())!=-1) allow = true;\n\n            if(allow){\n                \n                html += _this.structBlock(i, item);\n            }\n        });\n\n        document.querySelector('.search-results').innerHTML = html;\n\n        lazyLoad();\n\n        // show search results\n        if(html.length>0){\n            document.querySelector('.search-results').classList.remove('d-none');\n            document.querySelector('.accordion').classList.add('d-none');\n            document.querySelector('.search-title').innerHTML = __html(\"Search results for %1$\", '\"' + search + '\"');\n            document.querySelector('.search-title').classList.remove('d-none');\n\n            onClick('.item', _this.listeners.renderModal);\n        }else{\n\n            document.querySelector('.search-title').innerHTML = __html(\"No products found for %1$\", '\"' + search + '\"');\n            document.querySelector('.search-title').classList.remove('d-none');\n            document.querySelector('.search-results').classList.add('d-none');\n            document.querySelector('.accordion').classList.add('d-none');\n        }\n    },\n    structBlock: (i, item) => {\n\n        return `\n\n        <div class=\"col item po \" data-i=\"${ attr(i) }\" data-id=\"${ attr(item._id) }\" data-preview=\"feed\">\n            <img data-src=\"${ CDN }S${ spaceID() }/sketch-${ item._id }-1-500x500.jpeg?${ item.updated }\" data-srcset=\"${ CDN }S${ spaceID() }/sketch-${ item._id }-1-500x500.jpeg?${ item.updated }\" src=\"/assets/img/placeholder.png\" class=\"card-img-top rounded-3 lazy\" alt=\"${ attr(item.title) }\">\n            <div class=\"card-body\">\n                <h5 class=\"card-title\">\n                    <div>${ __html(item.title) } </div>\n                    ${ _this.getMinPrice(item) }\n                </h5>\n                <p class=\"card-text\">${ __html(item.sdesc) }</p>\n            </div>\n            <div class=\"card-footer d-none\">\n                <small class=\"text-muted\">Last updated 3 mins ago</small>\n            </div>\n        </div>\n\n        `;\n    },\n    clearActiveTags: () => {\n\n        for(let el of document.querySelectorAll(\".slideset .slide a\")){ el.classList.remove('active'); }\n    },\n    loadHomeStructure: () => {\n\n        if(!_this.state.firstLoad) return;\n\n        // get core html content \n        document.querySelector('#contents').innerHTML = HTMLContent();\n    },\n    initFooter: () => {\n        \n        initFooter( __('Manufactured ❤️ in Latvia. %1$Documentation%2$ %3$Privacy%4$ %5$Support%6$', '<a class=\"text-muted mx-1\" href=\"https://www.skardanams.com/documentation/\" target=\"_blank\">', '</a>', '<a class=\"text-muted mx-1\" href=\"https://www.skardanams.com/privacy-policy/\" target=\"_blank\">', '</a>', '<a class=\"text-muted mx-1\" href=\"https://www.skardanams.lv/kontakti/\" target=\"_blank\">', '</a>'), '');\n        // initFooter(__('Copyright © %1$ %2$ Kenzap%3$. All rights reserved.', new Date().getFullYear(), '<a class=\"text-muted\" href=\"https://kenzap.com/\" target=\"_blank\">', '</a>'), __('Kenzap Cloud Services - Dashboard'));\n    }\n}\n\n_this.init();\n"],"names":["spaceID","setCookie","CDN","API_KEY","sortAlphaNum","a","b","localeCompare","numeric","randomString","length_","chars","split","Math","floor","random","str","i","length","mt","val","priceFormat","_this","price","makeNumber","round","parseFloat","toFixed","state","settings","currency_symb_loc","currency_symb","onlyNumbers","sel","document","querySelector","querySelectorAll","el","addEventListener","e","includes","which","isNaN","String","fromCharCode","value","preventDefault","timeConverterAgo","__","now","time","parseInt","past","Date","months","year","getFullYear","month","getMonth","date","getDate","getHours","getMinutes","getSeconds","escape","htmlStr","replace","unescape","lazyLoad","lazyImages","slice","call","dataset","lazyLoading","setTimeout","forEach","lazyImage","getBoundingClientRect","top","window","innerHeight","bottom","getComputedStyle","display","src","srcset","classList","remove","filter","image","degToRad","deg","PI","name","days","expires","setTime","getTime","toUTCString","cookie","HTMLContent","__attr","__html","Util","hasClass","className","contains","match","RegExp","addClass","add","join","removeClass","reg","toggleClass","bool","setAttributes","attrs","key","setAttribute","getChildrenByClassName","children","childrenByClass","push","setHeight","start","to","element","duration","cb","change","currentTime","animateHeight","timestamp","progress","requestAnimationFrame","scrollTo","final","scrollY","documentElement","scrollTop","animateScroll","easeInOutQuad","moveFocus","getElementsByTagName","focus","activeElement","getIndexInArray","array","Array","prototype","indexOf","cssSupports","property","CSS","supports","jsProperty","g","toUpperCase","body","style","Element","matches","msMatchesSelector","webkitMatchesSelector","closest","s","parentElement","parentNode","nodeType","CustomEvent","event","params","bubbles","cancelable","detail","undefined","evt","createEvent","initCustomEvent","Event","t","c","d","Cart","cartStatic","localStorage","getItem","cart","JSON","parse","items","idd","renderCartHTML","html","getElementsByClassName","cartAddBtns","cartBody","cartList","cartListItems","cartTotal","cartCount","cartCountItems","cartUndo","productId","cartTimeoutId","animatingQuantity","initListeners","refreshCartHTML","cartButtonVissible","saveCart","addToCart","toggleCart","onClick","total","alert","modal","modalCont","bootstrap","Modal","show","innerHTML","setHours","getTimezoneOffset","toISOString","gtag","location","hash","history","pushState","pageID","pathname","search","console","log","hide","refreshCartCountAndTotals","listeners","modalSuccessBtnFunc","obj","allow","setCustomValidity","checked","trim","loading","id","sid","kid","status","from","fname","lname","entity","tax_calc","tax_percent","tax_total","grand_total","email","phone","notes","iban","total_all","notify","behavior","setItem","saveOrder","target","tagName","toLowerCase","quickUpdateCart","clearInterval","deletedProduct","removeEventListener","removeAttribute","order","dateObj","getUTCFullYear","getUTCMonth","getUTCDate","fetch","method","headers","stringify","query","type","data","then","response","json","success","orders","clearCart","url","URL","href","origin","error","cartIsOpen","Number","innerText","ii","item","cid","variations","note","_id","title","coating","color","qty","input_fields_values","select_qty","field_list","input_fields","field","label","actual","next","discount_percent","discount_total","fee_total","tax_company_total","tax_individual_total","reversed_tax","tax_id","insertAdjacentHTML","cartRowStruct","confirm","currentTarget","renderModal","removeItem","productModal","render","urlParams","URLSearchParams","N","parts","parts_options","coating_options","parent_list","ic","item_preview","get","calc_price","var_price","parent","sk_settings","item_parent","part","item_part","bc","getCookie","modelling","updated","htmlLabels","htmlLines","points","x","y","xi","scale","pointsScaled","p","ext","startAngle","endAngle","radius","cos","sin","label_pos","min","max","screen","width","popoverTriggerList","map","popoverTriggerEl","Popover","select","btn","getElementById","text","x3d_response","render3dSketch","onChange","loadColors","onKeyUp","tooltips","tooltip","dispose","splice","valuemin","Tooltip","offset","valuemax","tabindex","getAttribute","options","selectedIndex","back","area","formula","formula_price","lable","item_cid","iframe","msg","cmd","inputs","inputs_label","formula_width","formula_length","viewpoint","postMessage","cont","toast","refreshSketchPrice","focusListener","closeModal","parser","DOMParser","x3d","parseFromString","x3dRoot","getRootNode","material","createElement","appendChild","height","textureTransform","imageTexture","outerHTML","x3dom","reload","Order","locale","fields","locales","source","hideLoader","__init","renderOrder","parseApiError","initHeader","initFooter","recent","total_with_tax","renderClient","attr","itemPreview","preview","getOrder","OrderList","order_list","limit","meta","reverse","renderOrders","getOrderList","firstLoad","focusOutBlock","ajaxQueue","colors","hex_bg","hex_text","init","order_id","set","state_last","cached","getDataParse","getData","term","relation","sortby","loadHomeStructure","renderPage","title_or","cats_or","cats","cat","sort","scrollEvents","openTag","clearSearch","openCat","link","simulateClick","modalSuccessBtn","changeLanguage","burger","menu_close","nav","getCart","coatingPrice","pricem2","getPrice","eval","svginp","svgg","clearActiveTags","structBlock","ln","queryParams","replaceState","toString","replaceAll","getMinPrice","COATING","min_price","color_options","loadPrice","background","el_coating","sdesc"],"mappings":"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"}